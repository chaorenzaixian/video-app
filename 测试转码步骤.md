# æµ‹è¯•è½¬ç åŠŸèƒ½ - æ“ä½œæ­¥éª¤

## âœ… å½“å‰çŠ¶æ€
- FFmpeg å·²å®‰è£… (v8.0.1)
- è½¬ç è„šæœ¬å·²é…ç½®
- ç›‘æ§æœåŠ¡å·²é…ç½®

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ–¹æ³•1ï¼šä½¿ç”¨ FFmpeg åˆ›å»ºæµ‹è¯•è§†é¢‘

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```powershell
# 1. åˆ›å»ºä¸€ä¸ª5ç§’çš„æµ‹è¯•è§†é¢‘
ffmpeg -f lavfi -i testsrc=duration=5:size=640x480:rate=30 -pix_fmt yuv420p C:\VideoTranscode\downloads\test.mp4

# 2. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åˆ›å»º
dir C:\VideoTranscode\downloads\test.mp4

# 3. æ‰‹åŠ¨æµ‹è¯•è½¬ç 
powershell -ExecutionPolicy Bypass -File C:\VideoTranscode\scripts\transcode.ps1 -i C:\VideoTranscode\downloads\test.mp4 -o C:\VideoTranscode\completed\test_out.mp4

# 4. æ£€æŸ¥è½¬ç ç»“æœ
dir C:\VideoTranscode\completed\test_out.mp4
```

### æ–¹æ³•2ï¼šä½¿ç”¨çœŸå®è§†é¢‘æµ‹è¯•

å¦‚æœä½ æœ‰è§†é¢‘æ–‡ä»¶ï¼š

```powershell
# 1. å°†è§†é¢‘å¤åˆ¶åˆ° downloads ç›®å½•
copy "ä½ çš„è§†é¢‘.mp4" C:\VideoTranscode\downloads\

# 2. æ‰‹åŠ¨æµ‹è¯•è½¬ç 
powershell -ExecutionPolicy Bypass -File C:\VideoTranscode\scripts\transcode.ps1 -i C:\VideoTranscode\downloads\ä½ çš„è§†é¢‘.mp4 -o C:\VideoTranscode\completed\è¾“å‡º.mp4
```

### æ–¹æ³•3ï¼šæµ‹è¯•ç›‘æ§æœåŠ¡

```powershell
# 1. å¯åŠ¨ç›‘æ§æœåŠ¡
powershell -ExecutionPolicy Bypass -NoExit -File C:\VideoTranscode\scripts\watcher.ps1

# 2. åœ¨å¦ä¸€ä¸ªçª—å£ï¼Œå°†è§†é¢‘æ”¾å…¥ downloads ç›®å½•
copy "è§†é¢‘.mp4" C:\VideoTranscode\downloads\

# 3. ç›‘æ§æœåŠ¡ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶è½¬ç 
# 4. è½¬ç å®Œæˆåï¼Œæ–‡ä»¶ä¼šå‡ºç°åœ¨ completed ç›®å½•
```

## ğŸ“Š é¢„æœŸç»“æœ

### æˆåŠŸçš„æ ‡å¿—
- âœ… è½¬ç è¿‡ç¨‹ä¸­æ˜¾ç¤º FFmpeg è¾“å‡º
- âœ… è½¬ç å®Œæˆåæ˜¾ç¤º "è½¬ç å®Œæˆ"
- âœ… è¾“å‡ºæ–‡ä»¶å‡ºç°åœ¨ completed ç›®å½•
- âœ… åŸæ–‡ä»¶è¢«åˆ é™¤ï¼ˆç›‘æ§æœåŠ¡æ¨¡å¼ï¼‰

### å¦‚æœå¤±è´¥
æ£€æŸ¥ï¼š
1. FFmpeg æ˜¯å¦åœ¨ PATH ä¸­ï¼š`ffmpeg -version`
2. è¾“å…¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. ç£ç›˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿ
4. æŸ¥çœ‹æ—¥å¿—ï¼š`C:\VideoTranscode\logs\`

## ğŸš€ å¯åŠ¨è‡ªåŠ¨è½¬ç æœåŠ¡

æµ‹è¯•æˆåŠŸåï¼Œå¯åŠ¨ç›‘æ§æœåŠ¡ï¼š

```powershell
# æ–¹æ³•1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
powershell -ExecutionPolicy Bypass -File C:\VideoTranscode\start.ps1

# æ–¹æ³•2ï¼šç›´æ¥è¿è¡Œ
powershell -ExecutionPolicy Bypass -NoExit -File C:\VideoTranscode\scripts\watcher.ps1
```

ç„¶åï¼š
1. å°†è§†é¢‘æ–‡ä»¶æ”¾å…¥ `C:\VideoTranscode\downloads`
2. ç›‘æ§æœåŠ¡ä¼šè‡ªåŠ¨è½¬ç 
3. å®Œæˆçš„è§†é¢‘åœ¨ `C:\VideoTranscode\completed`

## ğŸ“ è½¬ç å‚æ•°è¯´æ˜

å½“å‰é…ç½®ï¼ˆåœ¨ transcode.ps1 ä¸­ï¼‰ï¼š
```powershell
param($i,$o)
ffmpeg -i $i -c:v libx264 -preset medium -crf 23 -c:a aac -b:a 128k -movflags +faststart -y $o
```

å‚æ•°è¯´æ˜ï¼š
- `-i $i`: è¾“å…¥æ–‡ä»¶
- `-c:v libx264`: ä½¿ç”¨ H.264 ç¼–ç 
- `-preset medium`: ç¼–ç é€Ÿåº¦ï¼ˆå¯é€‰ï¼šultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslowï¼‰
- `-crf 23`: è´¨é‡ï¼ˆ18-28ï¼Œè¶Šå°è´¨é‡è¶Šå¥½ï¼Œ23æ˜¯æ¨èå€¼ï¼‰
- `-c:a aac`: éŸ³é¢‘ç¼–ç  AAC
- `-b:a 128k`: éŸ³é¢‘æ¯”ç‰¹ç‡ 128kbps
- `-movflags +faststart`: ä¼˜åŒ–ç½‘ç»œæ’­æ”¾
- `-y`: è¦†ç›–è¾“å‡ºæ–‡ä»¶

## âš¡ æ€§èƒ½ä¼˜åŒ–

### æé«˜è½¬ç é€Ÿåº¦
ä¿®æ”¹ `C:\VideoTranscode\scripts\transcode.ps1`ï¼š

```powershell
# æ›´å¿«çš„é¢„è®¾ï¼ˆè´¨é‡ç¨ä½ï¼‰
ffmpeg -i $i -c:v libx264 -preset fast -crf 23 -c:a aac -b:a 128k -movflags +faststart -y $o

# æˆ–è€…æ›´å¿«
ffmpeg -i $i -c:v libx264 -preset veryfast -crf 23 -c:a aac -b:a 128k -movflags +faststart -y $o
```

### å¹¶å‘å¤„ç†
å¯åŠ¨å¤šä¸ªç›‘æ§æœåŠ¡çª—å£ï¼Œæ¯ä¸ªå¤„ç†ä¸åŒçš„è§†é¢‘ã€‚

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… FFmpeg å·²å®‰è£…
2. â­ï¸ åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•è½¬ç 
3. â­ï¸ å¯åŠ¨ç›‘æ§æœåŠ¡
4. â­ï¸ é…ç½® Telegram è‡ªåŠ¨ä¸‹è½½
5. â­ï¸ é…ç½®è‡ªåŠ¨ä¸Šä¼ åˆ°ä¸»æœåŠ¡å™¨

---

**è¯·åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä¸Šè¿°æµ‹è¯•å‘½ä»¤ï¼Œç„¶åå‘Šè¯‰æˆ‘ç»“æœï¼**
