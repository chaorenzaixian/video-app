import{_ as s}from"./ic_back-BPdSG6fy.js";import{_ as e,u as a}from"./index-C3P4JTuA.js";import{E as t}from"./element-plus-DlIn_qXi.js";import{c as l,X as i,r,j as n,y as c,C as o,L as v,z as u}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const g={class:"settings-page"},d={class:"page-header"},p={class:"settings-card"},m={class:"setting-value"},h=["src"],w={class:"setting-value"},f={class:"value-text"},C={class:"setting-value"},x={class:"value-text"},k={class:"setting-value"},S={class:"value-text"},b={class:"setting-value"},M={class:"value-text"},z={class:"setting-value"},_={class:"value-text"},B={class:"setting-value"},L={class:"value-text"},$={class:"setting-value"},y={class:"value-text"},I=e({__name:"Settings",setup(e){const I=a(),j=l(()=>I.user);i(()=>{I.fetchUser()});const O=r("1.0.4"),P=r("0.0MB"),V=l(()=>{var s;return(null==(s=j.value)?void 0:s.id)?String(1528900+j.value.id):"------"}),D=l(()=>{var s;const e=null==(s=j.value)?void 0:s.gender;return"male"===e?"男":"female"===e?"女":"secret"===e?"保密":"未设置"}),U=l(()=>{var s;const e=null==(s=j.value)?void 0:s.email;if(!e)return"";const a=e.indexOf("@");return a<=2?e:e.slice(0,2)+"***"+e.slice(a-1)}),E=l(()=>{var s,e;const a=null==(s=j.value)?void 0:s.avatar;if(a)return a.startsWith("http")||a.startsWith("/")?a:`/${a}`;return(s=>{const e=s%52;if(e<17)return`/images/avatars/icon_avatar_${e+1}.webp`;if(e<32)return`/images/avatars/DM_20251217202131_${String(e-17+1).padStart(3,"0")}.JPEG`;return`/images/avatars/DM_20251217202341_${String(e-32+1).padStart(3,"0")}.JPEG`})((null==(e=j.value)?void 0:e.id)||1)}),H=async()=>{try{await navigator.clipboard.writeText(V.value),t.success("SOULID已复制")}catch(s){t.error("复制失败")}},G=()=>{let s=0;for(let a in localStorage)localStorage.hasOwnProperty(a)&&(s+=2*localStorage[a].length);for(let a in sessionStorage)sessionStorage.hasOwnProperty(a)&&(s+=2*sessionStorage[a].length);const e=s/1048576;P.value=e.toFixed(1)+"MB"},J=async()=>{try{const s=localStorage.getItem("token"),e=localStorage.getItem("user");if(localStorage.clear(),s&&localStorage.setItem("token",s),e&&localStorage.setItem("user",e),sessionStorage.clear(),"caches"in window){const s=await caches.keys();await Promise.all(s.map(s=>caches.delete(s)))}G(),t.success("缓存已清除")}catch(s){t.error("清除缓存失败")}},W=()=>{t.info("当前已是最新版本")};return n(()=>{G(),I.fetchUser()}),(e,a)=>{var t,l,i;return u(),c("div",g,[o("header",d,[o("div",{class:"back-btn",onClick:a[0]||(a[0]=s=>e.$router.back())},[...a[9]||(a[9]=[o("img",{src:s,alt:"返回",class:"back-icon"},null,-1)])]),a[10]||(a[10]=o("h1",{class:"page-title"},"设置中心",-1)),a[11]||(a[11]=o("div",{class:"header-right"},null,-1))]),o("div",p,[o("div",{class:"setting-item",onClick:a[1]||(a[1]=s=>e.$router.push("/user/settings/avatar"))},[a[13]||(a[13]=o("span",{class:"setting-label"},"头像",-1)),o("div",m,[o("img",{src:E.value,class:"avatar-preview"},null,8,h),a[12]||(a[12]=o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1))])]),o("div",{class:"setting-item",onClick:a[2]||(a[2]=s=>e.$router.push("/user/settings/nickname"))},[a[15]||(a[15]=o("span",{class:"setting-label"},"昵称",-1)),o("div",w,[o("span",f,v((null==(t=j.value)?void 0:t.nickname)||(null==(l=j.value)?void 0:l.username)||"未设置"),1),a[14]||(a[14]=o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1))])]),o("div",{class:"setting-item",onClick:a[3]||(a[3]=s=>e.$router.push("/user/settings/gender"))},[a[17]||(a[17]=o("span",{class:"setting-label"},"性别",-1)),o("div",C,[o("span",x,v(D.value),1),a[16]||(a[16]=o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1))])]),o("div",{class:"setting-item",onClick:H},[a[19]||(a[19]=o("span",{class:"setting-label"},"SOULID",-1)),o("div",k,[o("span",S,v(V.value),1),a[18]||(a[18]=o("svg",{class:"copy-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1))])]),o("div",{class:"setting-item",onClick:a[4]||(a[4]=s=>e.$router.push("/user/settings/email"))},[a[21]||(a[21]=o("span",{class:"setting-label"},"邮箱",-1)),o("div",b,[o("span",M,v(U.value||"立即绑定"),1),a[20]||(a[20]=o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1))])]),o("div",{class:"setting-item",onClick:a[5]||(a[5]=s=>e.$router.push("/user/settings/recovery"))},[...a[22]||(a[22]=[o("span",{class:"setting-label"},"账号找回",-1),o("div",{class:"setting-value"},[o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})])],-1)])]),o("div",{class:"setting-item",onClick:a[6]||(a[6]=s=>e.$router.push("/user/promotion"))},[a[24]||(a[24]=o("span",{class:"setting-label"},"邀请码",-1)),o("div",z,[o("span",_,v((null==(i=j.value)?void 0:i.invite_code)||"未设置"),1),a[23]||(a[23]=o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1))])]),o("div",{class:"setting-item",onClick:a[7]||(a[7]=s=>e.$router.push("/user/account-credential"))},[...a[25]||(a[25]=[o("span",{class:"setting-label"},"账号凭证",-1),o("div",{class:"setting-value"},[o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})])],-1)])]),o("div",{class:"setting-item",onClick:a[8]||(a[8]=s=>e.$router.push("/user/settings/faq"))},[...a[26]||(a[26]=[o("span",{class:"setting-label"},"常见问题",-1),o("div",{class:"setting-value"},[o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})])],-1)])]),o("div",{class:"setting-item",onClick:J},[a[28]||(a[28]=o("span",{class:"setting-label"},"清除缓存",-1)),o("div",B,[o("span",L,v(P.value),1),a[27]||(a[27]=o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1))])]),o("div",{class:"setting-item",onClick:W},[a[30]||(a[30]=o("span",{class:"setting-label"},"检查更新",-1)),o("div",$,[o("span",y,"V"+v(O.value),1),a[29]||(a[29]=o("svg",{class:"arrow-icon",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1))])])])])}}},[["__scopeId","data-v-1670b3c3"]]);export{I as default};
