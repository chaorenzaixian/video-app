/* empty css             *//* empty css                   *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                  *//* empty css                    *//* empty css                    *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                  */import{bz as e,bk as a,E as l,bA as t,aM as u,aQ as o,a6 as d,bl as i,bm as r,bh as s,bi as n,b6 as p,bj as c,bo as v,bs as m,bt as _,aR as g,aS as h,aT as f,bw as b,aF as V,bv as y,a as w}from"./element-plus-DlIn_qXi.js";import{_ as k,a as U}from"./index-C3P4JTuA.js";import{r as j,w as x,j as C,y as z,C as q,O as I,F as L,z as S,G as $,K as D,u as F,E as M,L as O,I as P,M as R,aa as E}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const G={class:"dating-manage"},A={class:"tab-header"},K={class:"tab-header"},Q={key:0},T={key:1},B={key:2},H={key:3},J={class:"avatar-upload"},N={class:"avatar-box"},W={key:1,class:"avatar-placeholder"},X={key:2,class:"avatar-mask"},Y={class:"avatar-upload"},Z={class:"avatar-box"},ee={key:1,class:"avatar-placeholder"},ae={key:2,class:"avatar-mask"},le=k({__name:"DatingManage",setup(k){const le=j("groups"),te=j([]),ue=j(!1),oe=j(1),de=j(20),ie=j(0),re=j(""),se=j(!1),ne=j(null),pe=j(!1),ce=j({name:"",description:"",avatar:"",join_url:"",member_count:"0",coin_cost:0,is_free:!1,category:"soul",sort_order:0}),ve=j([]),me=j(!1),_e=j(1),ge=j(20),he=j(0),fe=j(""),be=j(!1),Ve=j(null),ye=j(!1),we=j({nickname:"",avatar:"",age:null,height:null,weight:null,cup:"",chat_count:0,is_vip:!1,is_ace:!1,profile_url:"",category:"chat",sub_category:"",sort_order:0}),ke=async()=>{ue.value=!0;try{const e={page:oe.value,page_size:de.value};re.value&&(e.category=re.value);const a=await U.get("/admin/dating/groups",{params:e}),l=a.data||a;te.value=l.items||[],ie.value=l.total||0}catch(e){l.error("获取群聊列表失败")}finally{ue.value=!1}},Ue=(e=null)=>{ne.value=e,ce.value=e?{...e}:{name:"",description:"",avatar:"",join_url:"",member_count:"0",coin_cost:0,is_free:!1,category:"soul",sort_order:0},se.value=!0},je=async()=>{if(ce.value.name){pe.value=!0;try{ne.value?(await U.put(`/admin/dating/groups/${ne.value.id}`,ce.value),l.success("更新成功")):(await U.post("/admin/dating/groups",ce.value),l.success("添加成功")),se.value=!1,ke()}catch(e){l.error("保存失败")}finally{pe.value=!1}}else l.warning("请输入群名称")},xe=async()=>{me.value=!0;try{const e={page:_e.value,page_size:ge.value};fe.value&&(e.category=fe.value);const a=await U.get("/admin/dating/hosts",{params:e}),l=a.data||a;ve.value=l.items||[],he.value=l.total||0}catch(e){l.error("获取主播列表失败")}finally{me.value=!1}},Ce=(e=null)=>{Ve.value=e,we.value=e?{...e}:{nickname:"",avatar:"",age:null,height:null,weight:null,cup:"",chat_count:0,is_vip:!1,is_ace:!1,profile_url:"",category:"chat",sub_category:"",sort_order:0},be.value=!0},ze=async()=>{if(we.value.nickname){ye.value=!0;try{Ve.value?(await U.put(`/admin/dating/hosts/${Ve.value.id}`,we.value),l.success("更新成功")):(await U.post("/admin/dating/hosts",we.value),l.success("添加成功")),be.value=!1,xe()}catch(e){l.error("保存失败")}finally{ye.value=!1}}else l.warning("请输入昵称")},qe=async(e,a)=>{const t=new FormData;t.append("file",e.file);try{const e=await U.post("/admin/dating/upload-image",t,{headers:{"Content-Type":"multipart/form-data"}}),u=(e.data||e).url;"group"===a?ce.value.avatar=u:we.value.avatar=u,l.success("上传成功")}catch(u){l.error("上传失败")}};return x(re,()=>{oe.value=1,ke()}),x(fe,()=>{_e.value=1,xe()}),C(()=>{ke(),xe()}),(k,j)=>{const x=o,C=u,Ie=r,Le=i,Se=n,$e=p,De=c,Fe=v,Me=s,Oe=_,Pe=t,Re=e,Ee=f,Ge=h,Ae=b,Ke=y,Qe=g,Te=a,Be=m;return S(),z("div",G,[j[49]||(j[49]=q("div",{class:"page-header"},[q("h2",null,"交友管理")],-1)),I(Re,{modelValue:le.value,"onUpdate:modelValue":j[8]||(j[8]=e=>le.value=e),class:"manage-tabs"},{default:L(()=>[I(Pe,{label:"群聊管理",name:"groups"},{default:L(()=>[q("div",A,[I(C,{type:"primary",onClick:j[0]||(j[0]=e=>Ue())},{default:L(()=>[I(x,null,{default:L(()=>[I(F(d))]),_:1}),j[35]||(j[35]=D(" 添加群聊 ",-1))]),_:1}),I(Le,{modelValue:re.value,"onUpdate:modelValue":j[1]||(j[1]=e=>re.value=e),placeholder:"分类筛选",clearable:"",style:{width:"120px","margin-left":"10px"}},{default:L(()=>[I(Ie,{label:"SOUL群",value:"soul"}),I(Ie,{label:"裸聊",value:"chat"}),I(Ie,{label:"直播",value:"live"})]),_:1},8,["modelValue"])]),$((S(),M(Me,{data:te.value,stripe:""},{default:L(()=>[I(Se,{prop:"id",label:"ID",width:"60"}),I(Se,{label:"头像",width:"80"},{default:L(({row:e})=>[I($e,{src:e.avatar,size:40},null,8,["src"])]),_:1}),I(Se,{prop:"name",label:"群名称","min-width":"150"}),I(Se,{prop:"description",label:"描述","min-width":"200","show-overflow-tooltip":""}),I(Se,{prop:"member_count",label:"人数",width:"80"}),I(Se,{prop:"coin_cost",label:"金币",width:"80"}),I(Se,{label:"免费",width:"70"},{default:L(({row:e})=>[I(De,{type:e.is_free?"success":"info",size:"small"},{default:L(()=>[D(O(e.is_free?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),I(Se,{label:"分类",width:"80"},{default:L(({row:e})=>[I(De,{size:"small"},{default:L(()=>{return[D(O((a=e.category,{soul:"SOUL群",chat:"裸聊",live:"直播"}[a]||a)),1)];var a}),_:2},1024)]),_:1}),I(Se,{prop:"sort_order",label:"排序",width:"70"}),I(Se,{label:"状态",width:"70"},{default:L(({row:e})=>[I(Fe,{modelValue:e.is_active,"onUpdate:modelValue":a=>e.is_active=a,onChange:a=>(async e=>{try{await U.put(`/admin/dating/groups/${e.id}`,{is_active:e.is_active})}catch(a){e.is_active=!e.is_active,l.error("操作失败")}})(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),I(Se,{label:"操作",width:"150",fixed:"right"},{default:L(({row:e})=>[I(C,{type:"primary",link:"",onClick:a=>Ue(e)},{default:L(()=>[...j[36]||(j[36]=[D("编辑",-1)])]),_:1},8,["onClick"]),I(C,{type:"danger",link:"",onClick:a=>(async e=>{try{await w.confirm("确定删除该群聊？","提示",{type:"warning"}),await U.delete(`/admin/dating/groups/${e.id}`),l.success("删除成功"),ke()}catch(a){"cancel"!==a&&l.error("删除失败")}})(e)},{default:L(()=>[...j[37]||(j[37]=[D("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Be,ue.value]]),I(Oe,{"current-page":oe.value,"onUpdate:currentPage":j[2]||(j[2]=e=>oe.value=e),"page-size":de.value,"onUpdate:pageSize":j[3]||(j[3]=e=>de.value=e),total:ie.value,layout:"total, prev, pager, next",onCurrentChange:ke,style:{"margin-top":"16px"}},null,8,["current-page","page-size","total"])]),_:1}),I(Pe,{label:"主播管理",name:"hosts"},{default:L(()=>[q("div",K,[I(C,{type:"primary",onClick:j[4]||(j[4]=e=>Ce())},{default:L(()=>[I(x,null,{default:L(()=>[I(F(d))]),_:1}),j[38]||(j[38]=D(" 添加主播 ",-1))]),_:1}),I(Le,{modelValue:fe.value,"onUpdate:modelValue":j[5]||(j[5]=e=>fe.value=e),placeholder:"分类筛选",clearable:"",style:{width:"120px","margin-left":"10px"}},{default:L(()=>[I(Ie,{label:"裸聊",value:"chat"}),I(Ie,{label:"直播",value:"live"})]),_:1},8,["modelValue"])]),$((S(),M(Me,{data:ve.value,stripe:""},{default:L(()=>[I(Se,{prop:"id",label:"ID",width:"60"}),I(Se,{label:"头像",width:"80"},{default:L(({row:e})=>[I($e,{src:e.avatar,size:40},null,8,["src"])]),_:1}),I(Se,{prop:"nickname",label:"昵称",width:"120"}),I(Se,{label:"资料","min-width":"180"},{default:L(({row:e})=>[e.age?(S(),z("span",Q,O(e.age)+"岁",1)):P("",!0),e.height?(S(),z("span",T,O(e.height)+"cm",1)):P("",!0),e.weight?(S(),z("span",B,O(e.weight)+"kg",1)):P("",!0),e.cup?(S(),z("span",H,O(e.cup)+"罩杯",1)):P("",!0)]),_:1}),I(Se,{prop:"chat_count",label:"聊天数",width:"80"}),I(Se,{label:"标签",width:"120"},{default:L(({row:e})=>[e.is_vip?(S(),M(De,{key:0,type:"warning",size:"small"},{default:L(()=>[...j[39]||(j[39]=[D("VIP",-1)])]),_:1})):P("",!0),e.is_ace?(S(),M(De,{key:1,type:"danger",size:"small"},{default:L(()=>[...j[40]||(j[40]=[D("王牌",-1)])]),_:1})):P("",!0)]),_:1}),I(Se,{prop:"sub_category",label:"子分类",width:"100"}),I(Se,{prop:"sort_order",label:"排序",width:"70"}),I(Se,{label:"状态",width:"70"},{default:L(({row:e})=>[I(Fe,{modelValue:e.is_active,"onUpdate:modelValue":a=>e.is_active=a,onChange:a=>(async e=>{try{await U.put(`/admin/dating/hosts/${e.id}`,{is_active:e.is_active})}catch(a){e.is_active=!e.is_active,l.error("操作失败")}})(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),I(Se,{label:"操作",width:"150",fixed:"right"},{default:L(({row:e})=>[I(C,{type:"primary",link:"",onClick:a=>Ce(e)},{default:L(()=>[...j[41]||(j[41]=[D("编辑",-1)])]),_:1},8,["onClick"]),I(C,{type:"danger",link:"",onClick:a=>(async e=>{try{await w.confirm("确定删除该主播？","提示",{type:"warning"}),await U.delete(`/admin/dating/hosts/${e.id}`),l.success("删除成功"),xe()}catch(a){"cancel"!==a&&l.error("删除失败")}})(e)},{default:L(()=>[...j[42]||(j[42]=[D("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Be,me.value]]),I(Oe,{"current-page":_e.value,"onUpdate:currentPage":j[6]||(j[6]=e=>_e.value=e),"page-size":ge.value,"onUpdate:pageSize":j[7]||(j[7]=e=>ge.value=e),total:he.value,layout:"total, prev, pager, next",onCurrentChange:xe,style:{"margin-top":"16px"}},null,8,["current-page","page-size","total"])]),_:1})]),_:1},8,["modelValue"]),I(Te,{modelValue:se.value,"onUpdate:modelValue":j[19]||(j[19]=e=>se.value=e),title:ne.value?"编辑群聊":"添加群聊",width:"500px"},{footer:L(()=>[I(C,{onClick:j[18]||(j[18]=e=>se.value=!1)},{default:L(()=>[...j[44]||(j[44]=[D("取消",-1)])]),_:1}),I(C,{type:"primary",onClick:je,loading:pe.value},{default:L(()=>[...j[45]||(j[45]=[D("保存",-1)])]),_:1},8,["loading"])]),default:L(()=>[I(Qe,{model:ce.value,"label-width":"80px"},{default:L(()=>[I(Ge,{label:"群名称",required:""},{default:L(()=>[I(Ee,{modelValue:ce.value.name,"onUpdate:modelValue":j[9]||(j[9]=e=>ce.value.name=e),placeholder:"请输入群名称"},null,8,["modelValue"])]),_:1}),I(Ge,{label:"描述"},{default:L(()=>[I(Ee,{modelValue:ce.value.description,"onUpdate:modelValue":j[10]||(j[10]=e=>ce.value.description=e),type:"textarea",rows:2,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),I(Ge,{label:"头像"},{default:L(()=>[q("div",J,[I(Ae,{"show-file-list":!1,"http-request":e=>qe(e,"group"),accept:"image/*"},{default:L(()=>[q("div",N,[ce.value.avatar?(S(),M($e,{key:0,src:ce.value.avatar,size:80},null,8,["src"])):(S(),z("div",W,[I(x,{size:24},{default:L(()=>[I(F(d))]),_:1}),j[43]||(j[43]=q("span",null,"上传头像",-1))])),ce.value.avatar?(S(),z("div",X,[I(x,null,{default:L(()=>[I(F(V))]),_:1})])):P("",!0)])]),_:1},8,["http-request"]),I(Ee,{modelValue:ce.value.avatar,"onUpdate:modelValue":j[11]||(j[11]=e=>ce.value.avatar=e),placeholder:"或输入头像URL",style:{"margin-top":"8px"}},null,8,["modelValue"])])]),_:1}),I(Ge,{label:"跳转链接"},{default:L(()=>[I(Ee,{modelValue:ce.value.join_url,"onUpdate:modelValue":j[12]||(j[12]=e=>ce.value.join_url=e),placeholder:"加入群聊的跳转链接"},null,8,["modelValue"])]),_:1}),I(Ge,{label:"人数显示"},{default:L(()=>[I(Ee,{modelValue:ce.value.member_count,"onUpdate:modelValue":j[13]||(j[13]=e=>ce.value.member_count=e),placeholder:"如: 10w"},null,8,["modelValue"])]),_:1}),I(Ge,{label:"金币费用"},{default:L(()=>[I(Ke,{modelValue:ce.value.coin_cost,"onUpdate:modelValue":j[14]||(j[14]=e=>ce.value.coin_cost=e),min:0},null,8,["modelValue"])]),_:1}),I(Ge,{label:"限时免费"},{default:L(()=>[I(Fe,{modelValue:ce.value.is_free,"onUpdate:modelValue":j[15]||(j[15]=e=>ce.value.is_free=e)},null,8,["modelValue"])]),_:1}),I(Ge,{label:"分类"},{default:L(()=>[I(Le,{modelValue:ce.value.category,"onUpdate:modelValue":j[16]||(j[16]=e=>ce.value.category=e)},{default:L(()=>[I(Ie,{label:"SOUL群",value:"soul"}),I(Ie,{label:"裸聊",value:"chat"}),I(Ie,{label:"直播",value:"live"})]),_:1},8,["modelValue"])]),_:1}),I(Ge,{label:"排序"},{default:L(()=>[I(Ke,{modelValue:ce.value.sort_order,"onUpdate:modelValue":j[17]||(j[17]=e=>ce.value.sort_order=e),min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),I(Te,{modelValue:be.value,"onUpdate:modelValue":j[34]||(j[34]=e=>be.value=e),title:Ve.value?"编辑主播":"添加主播",width:"500px"},{footer:L(()=>[I(C,{onClick:j[33]||(j[33]=e=>be.value=!1)},{default:L(()=>[...j[47]||(j[47]=[D("取消",-1)])]),_:1}),I(C,{type:"primary",onClick:ze,loading:ye.value},{default:L(()=>[...j[48]||(j[48]=[D("保存",-1)])]),_:1},8,["loading"])]),default:L(()=>[I(Qe,{model:we.value,"label-width":"80px"},{default:L(()=>[I(Ge,{label:"昵称",required:""},{default:L(()=>[I(Ee,{modelValue:we.value.nickname,"onUpdate:modelValue":j[20]||(j[20]=e=>we.value.nickname=e),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),I(Ge,{label:"头像"},{default:L(()=>[q("div",Y,[I(Ae,{"show-file-list":!1,"http-request":e=>qe(e,"host"),accept:"image/*"},{default:L(()=>[q("div",Z,[we.value.avatar?(S(),M($e,{key:0,src:we.value.avatar,size:80},null,8,["src"])):(S(),z("div",ee,[I(x,{size:24},{default:L(()=>[I(F(d))]),_:1}),j[46]||(j[46]=q("span",null,"上传头像",-1))])),we.value.avatar?(S(),z("div",ae,[I(x,null,{default:L(()=>[I(F(V))]),_:1})])):P("",!0)])]),_:1},8,["http-request"]),I(Ee,{modelValue:we.value.avatar,"onUpdate:modelValue":j[21]||(j[21]=e=>we.value.avatar=e),placeholder:"或输入头像URL",style:{"margin-top":"8px"}},null,8,["modelValue"])])]),_:1}),I(Ge,{label:"年龄"},{default:L(()=>[I(Ke,{modelValue:we.value.age,"onUpdate:modelValue":j[22]||(j[22]=e=>we.value.age=e),min:18,max:99},null,8,["modelValue"])]),_:1}),I(Ge,{label:"身高(cm)"},{default:L(()=>[I(Ke,{modelValue:we.value.height,"onUpdate:modelValue":j[23]||(j[23]=e=>we.value.height=e),min:140,max:200},null,8,["modelValue"])]),_:1}),I(Ge,{label:"体重(kg)"},{default:L(()=>[I(Ke,{modelValue:we.value.weight,"onUpdate:modelValue":j[24]||(j[24]=e=>we.value.weight=e),min:30,max:100},null,8,["modelValue"])]),_:1}),I(Ge,{label:"罩杯"},{default:L(()=>[I(Le,{modelValue:we.value.cup,"onUpdate:modelValue":j[25]||(j[25]=e=>we.value.cup=e),placeholder:"选择罩杯"},{default:L(()=>[(S(),z(R,null,E(["A","B","C","D","E","F","G"],e=>I(Ie,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),I(Ge,{label:"聊天人数"},{default:L(()=>[I(Ke,{modelValue:we.value.chat_count,"onUpdate:modelValue":j[26]||(j[26]=e=>we.value.chat_count=e),min:0},null,8,["modelValue"])]),_:1}),I(Ge,{label:"VIP"},{default:L(()=>[I(Fe,{modelValue:we.value.is_vip,"onUpdate:modelValue":j[27]||(j[27]=e=>we.value.is_vip=e)},null,8,["modelValue"])]),_:1}),I(Ge,{label:"王牌主播"},{default:L(()=>[I(Fe,{modelValue:we.value.is_ace,"onUpdate:modelValue":j[28]||(j[28]=e=>we.value.is_ace=e)},null,8,["modelValue"])]),_:1}),I(Ge,{label:"跳转链接"},{default:L(()=>[I(Ee,{modelValue:we.value.profile_url,"onUpdate:modelValue":j[29]||(j[29]=e=>we.value.profile_url=e),placeholder:"主播详情页链接"},null,8,["modelValue"])]),_:1}),I(Ge,{label:"分类"},{default:L(()=>[I(Le,{modelValue:we.value.category,"onUpdate:modelValue":j[30]||(j[30]=e=>we.value.category=e)},{default:L(()=>[I(Ie,{label:"裸聊",value:"chat"}),I(Ie,{label:"直播",value:"live"})]),_:1},8,["modelValue"])]),_:1}),I(Ge,{label:"子分类"},{default:L(()=>[I(Le,{modelValue:we.value.sub_category,"onUpdate:modelValue":j[31]||(j[31]=e=>we.value.sub_category=e),clearable:"",placeholder:"选择子分类"},{default:L(()=>[I(Ie,{label:"学生萝莉",value:"学生萝莉"}),I(Ie,{label:"人妻少妇",value:"人妻少妇"}),I(Ie,{label:"主播御姐",value:"主播御姐"}),I(Ie,{label:"模特兼职",value:"模特兼职"})]),_:1},8,["modelValue"])]),_:1}),I(Ge,{label:"排序"},{default:L(()=>[I(Ke,{modelValue:we.value.sort_order,"onUpdate:modelValue":j[32]||(j[32]=e=>we.value.sort_order=e),min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-335ef7b4"]]);export{le as default};
