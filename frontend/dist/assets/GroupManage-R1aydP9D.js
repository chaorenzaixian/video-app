/* empty css             *//* empty css                   *//* empty css                   *//* empty css                     *//* empty css               *//* empty css                 *//* empty css                        *//* empty css                  *//* empty css                    *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                  */import{aM as e,bl as l,bs as a,bk as i,E as t,bh as o,aQ as s,a6 as u,bm as r,bi as d,bj as c,bo as n,aR as p,aS as v,aT as m,bw as g,bc as _,bd as b,bv as f,a as y}from"./element-plus-DlIn_qXi.js";import{_ as h,a as w}from"./index-C3P4JTuA.js";import{r as V,c as k,j as x,y as j,C,G as z,O as M,F as U,E,z as B,K as G,u as L,V as H,J as I,L as S,I as q,M as $,aa as F,H as P,a5 as J}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const K={class:"group-manage"},N={class:"page-header"},Q={class:"filter-bar"},T=["src"],W={class:"icon-upload-area"},A=["src"],D={key:1,class:"upload-placeholder"},O={key:0,class:"upload-tips"},R={class:"bg-presets"},X=["onClick"],Y={class:"group-preview"},Z=["src"],ee={class:"preview-name"},le=h({__name:"GroupManage",setup(h){const le=V(!1),ae=V([]),ie=V(""),te=V({visible:!1,isEdit:!1,loading:!1}),oe=V({id:null,name:"",group_type:"community",icon_type:"rocket",icon_image:"",icon_bg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",url:"",sort_order:0,is_active:!0}),se={Authorization:`Bearer ${localStorage.getItem("token")}`},ue=e=>{e.url&&(oe.value.icon_image=e.url,t.success("å›¾æ ‡ä¸Šä¼ æˆåŠŸ"))},re=e=>{const l=e.type.startsWith("image/"),a=e.size/1024/1024<2;return l?!!a||(t.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB"),!1):(t.error("åªèƒ½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶"),!1)},de=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #00b4db 0%, #0083b0 100%)","linear-gradient(135deg, #f43f5e 0%, #ec4899 100%)","linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)","linear-gradient(135deg, #10b981 0%, #059669 100%)","linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)"],ce={rocket:()=>J("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:"width: 24px; height: 24px; color: #fff"},[J("path",{d:"M12.75 3.94c.3-.29.71-.44 1.13-.44.87 0 1.62.57 1.88 1.37l1.01 3.04 2.53 2.53c.29.29.45.68.45 1.09v.94c0 .83-.67 1.5-1.5 1.5h-.94c-.41 0-.8-.16-1.09-.45l-2.53-2.53-3.04-1.01c-.8-.26-1.37-1.01-1.37-1.88 0-.42.15-.83.44-1.13l2.97-2.97c.01-.02.04-.04.06-.06zm-2.53 8.53L8.69 14l1.53 1.53c.29.29.45.68.45 1.09v.88c0 .83-.67 1.5-1.5 1.5H8.5c-.41 0-.8-.16-1.09-.45L6 17.14l-2.47 2.47c-.29.29-.68.45-1.09.45h-.94c-.83 0-1.5-.67-1.5-1.5v-.94c0-.41.16-.8.45-1.09L2.86 14l-1.41-1.41c-.29-.29-.45-.68-.45-1.09v-.88c0-.83.67-1.5 1.5-1.5h.88c.41 0 .8.16 1.09.45L6 11.1l1.53-1.53"})]),telegram:()=>J("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:"width: 24px; height: 24px; color: #fff"},[J("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.12.03-1.99 1.27-5.62 3.72-.53.36-1.01.54-1.44.53-.47-.01-1.38-.27-2.06-.49-.83-.27-1.49-.42-1.43-.88.03-.24.37-.49 1.02-.74 3.99-1.74 6.65-2.89 7.99-3.45 3.8-1.6 4.59-1.88 5.1-1.89.11 0 .37.03.54.17.14.12.18.28.2.45-.01.06.01.24 0 .38z"})]),briefcase:()=>J("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:"width: 24px; height: 24px; color: #fff"},[J("path",{d:"M20 7h-4V5c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm10 14H4v-7h4v1c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-1h4v7zm-6-7h-4v-2h4v2z"})]),heart:()=>J("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:"width: 24px; height: 24px; color: #fff"},[J("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])},ne=e=>ce[e]||ce.rocket,pe=k(()=>ie.value?ae.value.filter(e=>e.group_type===ie.value):ae.value),ve=async()=>{le.value=!0;try{const e=await w.get("/ads/groups/admin");ae.value=e.data||e||[]}catch(e){t.error("è·å–ç¾¤ç»„åˆ—è¡¨å¤±è´¥")}finally{le.value=!1}},me=(e=null)=>{e?(te.value.isEdit=!0,oe.value={id:e.id,name:e.name,group_type:e.group_type,icon_type:e.icon_type,icon_image:e.icon_image||"",icon_bg:e.icon_bg,url:e.url||"",sort_order:e.sort_order,is_active:e.is_active}):(te.value.isEdit=!1,oe.value={id:null,name:"",group_type:"community",icon_type:"rocket",icon_image:"",icon_bg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",url:"",sort_order:0,is_active:!0}),te.value.visible=!0},ge=async()=>{var e,l;if(oe.value.name){te.value.loading=!0;try{te.value.isEdit?(await w.put(`/ads/groups/${oe.value.id}`,oe.value),t.success("æ›´æ–°æˆåŠŸ")):(await w.post("/ads/groups",oe.value),t.success("æ·»åŠ æˆåŠŸ")),te.value.visible=!1,ve()}catch(a){t.error((null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.detail)||"ä¿å­˜å¤±è´¥")}finally{te.value.loading=!1}}else t.warning("è¯·è¾“å…¥ç¾¤ç»„åç§°")};return x(()=>{ve()}),(h,V)=>{const k=s,x=e,J=r,ae=l,ce=d,_e=c,be=n,fe=o,ye=m,he=v,we=g,Ve=f,ke=b,xe=_,je=p,Ce=i,ze=a;return B(),j("div",K,[C("div",N,[V[13]||(V[13]=C("h2",null,"å®˜æ–¹ç¾¤ç»„ç®¡ç†",-1)),M(x,{type:"primary",onClick:V[0]||(V[0]=e=>me())},{default:U(()=>[M(k,null,{default:U(()=>[M(L(u))]),_:1}),V[12]||(V[12]=G(" æ·»åŠ ç¾¤ç»„ ",-1))]),_:1})]),C("div",Q,[M(ae,{modelValue:ie.value,"onUpdate:modelValue":V[1]||(V[1]=e=>ie.value=e),placeholder:"ç¾¤ç»„ç±»å‹",clearable:"",style:{width:"150px"}},{default:U(()=>[M(J,{label:"å®˜æ–¹ç¤¾ç¾¤",value:"community"}),M(J,{label:"å•†åŠ¡åˆä½œ",value:"business"})]),_:1},8,["modelValue"]),M(x,{onClick:ve},{default:U(()=>[...V[14]||(V[14]=[G("åˆ·æ–°",-1)])]),_:1})]),z((B(),E(fe,{data:pe.value,stripe:""},{default:U(()=>[M(ce,{prop:"id",label:"ID",width:"60"}),M(ce,{label:"å›¾æ ‡",width:"80"},{default:U(({row:e})=>[C("div",{class:"icon-preview",style:H({background:e.icon_bg})},["custom"===e.icon_type&&e.icon_image?(B(),j("img",{key:0,src:e.icon_image,class:"custom-icon-img"},null,8,T)):(B(),E(I(ne(e.icon_type)),{key:1}))],4)]),_:1}),M(ce,{prop:"name",label:"ç¾¤ç»„åç§°","min-width":"150"}),M(ce,{label:"ç±»å‹",width:"120"},{default:U(({row:e})=>[M(_e,{type:"community"===e.group_type?"primary":"warning"},{default:U(()=>[G(S("community"===e.group_type?"å®˜æ–¹ç¤¾ç¾¤":"å•†åŠ¡åˆä½œ"),1)]),_:2},1032,["type"])]),_:1}),M(ce,{prop:"url",label:"é“¾æ¥","min-width":"200","show-overflow-tooltip":""}),M(ce,{prop:"click_count",label:"ç‚¹å‡»é‡",width:"80"}),M(ce,{prop:"sort_order",label:"æ’åº",width:"80"}),M(ce,{label:"çŠ¶æ€",width:"80"},{default:U(({row:e})=>[M(be,{modelValue:e.is_active,"onUpdate:modelValue":l=>e.is_active=l,onChange:l=>(async e=>{try{await w.put(`/ads/groups/${e.id}`,{is_active:e.is_active}),t.success("çŠ¶æ€æ›´æ–°æˆåŠŸ")}catch(l){e.is_active=!e.is_active,t.error("çŠ¶æ€æ›´æ–°å¤±è´¥")}})(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),M(ce,{label:"æ“ä½œ",width:"150",fixed:"right"},{default:U(({row:e})=>[M(x,{size:"small",onClick:l=>me(e)},{default:U(()=>[...V[15]||(V[15]=[G("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),M(x,{size:"small",type:"danger",onClick:l=>(async e=>{try{await y.confirm("ç¡®å®šè¦åˆ é™¤è¯¥ç¾¤ç»„å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{type:"warning"}),await w.delete(`/ads/groups/${e.id}`),t.success("åˆ é™¤æˆåŠŸ"),ve()}catch(l){"cancel"!==l&&t.error("åˆ é™¤å¤±è´¥")}})(e)},{default:U(()=>[...V[16]||(V[16]=[G("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ze,le.value]]),M(Ce,{modelValue:te.value.visible,"onUpdate:modelValue":V[11]||(V[11]=e=>te.value.visible=e),title:te.value.isEdit?"ç¼–è¾‘ç¾¤ç»„":"æ·»åŠ ç¾¤ç»„",width:"600px"},{footer:U(()=>[M(x,{onClick:V[10]||(V[10]=e=>te.value.visible=!1)},{default:U(()=>[...V[21]||(V[21]=[G("å–æ¶ˆ",-1)])]),_:1}),M(x,{type:"primary",loading:te.value.loading,onClick:ge},{default:U(()=>[G(S(te.value.isEdit?"ä¿å­˜":"æ·»åŠ "),1)]),_:1},8,["loading"])]),default:U(()=>[M(je,{model:oe.value,"label-width":"100px"},{default:U(()=>[M(he,{label:"ç¾¤ç»„åç§°",required:""},{default:U(()=>[M(ye,{modelValue:oe.value.name,"onUpdate:modelValue":V[2]||(V[2]=e=>oe.value.name=e),placeholder:"å¦‚ï¼šå®˜æ–¹åœŸè±†ç¾¤"},null,8,["modelValue"])]),_:1}),M(he,{label:"ç¾¤ç»„ç±»å‹",required:""},{default:U(()=>[M(ae,{modelValue:oe.value.group_type,"onUpdate:modelValue":V[3]||(V[3]=e=>oe.value.group_type=e),style:{width:"100%"}},{default:U(()=>[M(J,{label:"å®˜æ–¹ç¤¾ç¾¤",value:"community"}),M(J,{label:"å•†åŠ¡åˆä½œ",value:"business"})]),_:1},8,["modelValue"])]),_:1}),M(he,{label:"å›¾æ ‡ç±»å‹",required:""},{default:U(()=>[M(ae,{modelValue:oe.value.icon_type,"onUpdate:modelValue":V[4]||(V[4]=e=>oe.value.icon_type=e),style:{width:"100%"}},{default:U(()=>[M(J,{label:"ğŸš€ ç«ç®­",value:"rocket"}),M(J,{label:"âœˆï¸ é£æœº(Telegram)",value:"telegram"}),M(J,{label:"ğŸ’¼ å…¬æ–‡åŒ…",value:"briefcase"}),M(J,{label:"â¤ï¸ å¿ƒå½¢",value:"heart"}),M(J,{label:"ğŸ“· è‡ªå®šä¹‰å›¾ç‰‡",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),"custom"===oe.value.icon_type?(B(),E(he,{key:0,label:"å›¾æ ‡å›¾ç‰‡"},{default:U(()=>[C("div",W,[M(we,{class:"icon-uploader",action:"/api/v1/ads/upload/image",headers:se,"show-file-list":!1,"on-success":ue,"before-upload":re,accept:"image/*"},{default:U(()=>[oe.value.icon_image?(B(),j("img",{key:0,src:oe.value.icon_image,class:"uploaded-icon"},null,8,A)):(B(),j("div",D,[M(k,null,{default:U(()=>[M(L(u))]),_:1}),V[17]||(V[17]=C("span",null,"ä¸Šä¼ å›¾æ ‡",-1))]))]),_:1}),oe.value.icon_image?(B(),j("div",O,[C("span",null,S(oe.value.icon_image),1),M(x,{type:"danger",size:"small",text:"",onClick:V[5]||(V[5]=e=>oe.value.icon_image="")},{default:U(()=>[...V[18]||(V[18]=[G("åˆ é™¤",-1)])]),_:1})])):q("",!0),V[19]||(V[19]=C("div",{class:"upload-hint"},"æ¨èå°ºå¯¸: 96x96pxï¼Œæ”¯æŒ PNG/JPG/GIF/WEBPï¼Œæœ€å¤§ 2MB",-1))])]),_:1})):q("",!0),M(he,{label:"å›¾æ ‡èƒŒæ™¯"},{default:U(()=>[C("div",R,[(B(),j($,null,F(de,(e,l)=>C("div",{key:l,class:P(["bg-preset-item",{active:oe.value.icon_bg===e}]),style:H({background:e}),onClick:l=>oe.value.icon_bg=e},null,14,X)),64))]),M(ye,{modelValue:oe.value.icon_bg,"onUpdate:modelValue":V[6]||(V[6]=e=>oe.value.icon_bg=e),placeholder:"CSSæ¸å˜è‰²",style:{"margin-top":"8px"}},null,8,["modelValue"])]),_:1}),M(he,{label:"è·³è½¬é“¾æ¥"},{default:U(()=>[M(ye,{modelValue:oe.value.url,"onUpdate:modelValue":V[7]||(V[7]=e=>oe.value.url=e),placeholder:"https://t.me/xxx"},null,8,["modelValue"])]),_:1}),M(xe,{gutter:20},{default:U(()=>[M(ke,{span:12},{default:U(()=>[M(he,{label:"æ’åº"},{default:U(()=>[M(Ve,{modelValue:oe.value.sort_order,"onUpdate:modelValue":V[8]||(V[8]=e=>oe.value.sort_order=e),min:0},null,8,["modelValue"])]),_:1})]),_:1}),M(ke,{span:12},{default:U(()=>[M(he,{label:"çŠ¶æ€"},{default:U(()=>[M(be,{modelValue:oe.value.is_active,"onUpdate:modelValue":V[9]||(V[9]=e=>oe.value.is_active=e),"active-text":"å¯ç”¨","inactive-text":"ç¦ç”¨"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),M(he,{label:"é¢„è§ˆ"},{default:U(()=>[C("div",Y,[C("div",{class:"preview-icon",style:H({background:oe.value.icon_bg})},["custom"===oe.value.icon_type&&oe.value.icon_image?(B(),j("img",{key:0,src:oe.value.icon_image,class:"preview-custom-icon"},null,8,Z)):(B(),E(I(ne(oe.value.icon_type)),{key:1}))],4),C("span",ee,S(oe.value.name||"ç¾¤ç»„åç§°"),1),M(x,{type:"primary",size:"small",round:""},{default:U(()=>[...V[20]||(V[20]=[G("ç«‹å³åŠ å…¥",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-9604194f"]]);export{le as default};
