import{r as l,j as e,y as a,C as s,I as t,M as o,aa as c,U as i,G as n,af as u,H as p,ab as r,L as d,aC as v,z as y}from"./vue-vendor-Ba_vealp.js";import{_ as m}from"./ic_back-BPdSG6fy.js";import{_ as b,a as _}from"./index-C3P4JTuA.js";import{E as f}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const k={class:"collections-page"},g={class:"nav-header"},h={class:"collections-list"},C={class:"collection-cover"},w=["src"],U={class:"video-count"},j={class:"collection-info"},V={class:"collection-stats"},x={key:0},I={class:"collection-status"},z={key:0,class:"completed"},E=["onClick"],G={key:0,class:"empty-state"},H={class:"modal-content"},L={class:"modal-header"},M={class:"modal-body"},$={class:"form-group"},q={class:"form-group"},A={class:"form-group"},B={class:"pay-options"},D={key:0,class:"form-group"},F={key:1,class:"form-group"},J={class:"modal-footer"},K=["disabled"],N=b({__name:"Collections",setup(b){v();const N=l([]),O=l(!1),P=l(!1),Q=l({title:"",description:"",pay_type:"free",collection_price:0,single_video_price:0}),R=async()=>{try{const l=await _.get("/creator/collections");N.value=l.data}catch(l){}},S=async()=>{var l,e;if(Q.value.title){P.value=!0;try{await _.post("/creator/collections",Q.value),f.success("åˆé›†åˆ›å»ºæˆåŠŸ"),O.value=!1,await R(),Q.value={title:"",description:"",pay_type:"free",collection_price:0,single_video_price:0}}catch(a){f.error((null==(e=null==(l=a.response)?void 0:l.data)?void 0:e.detail)||"åˆ›å»ºå¤±è´¥")}finally{P.value=!1}}else f.warning("è¯·è¾“å…¥åˆé›†æ ‡é¢˜")};return e(R),(l,e)=>(y(),a("div",k,[s("div",g,[s("button",{class:"back-btn",onClick:e[0]||(e[0]=e=>l.$router.push("/creator"))},[...e[12]||(e[12]=[s("img",{src:m,alt:"è¿”å›",class:"back-icon"},null,-1)])]),e[13]||(e[13]=s("h1",null,"è§†é¢‘åˆé›†",-1)),s("button",{class:"add-btn",onClick:e[1]||(e[1]=l=>O.value=!0)},"+åˆ›å»º")]),s("div",h,[(y(!0),a(o,null,c(N.value,l=>{return y(),a("div",{key:l.id,class:"collection-item"},[s("div",C,[s("img",{src:l.cover_image||"/images/default-collection.webp",alt:""},null,8,w),s("span",U,d(l.total_videos)+"é›†",1)]),s("div",j,[s("h3",null,d(l.title),1),s("div",V,[s("span",null,"ğŸ‘ "+d(l.view_count),1),s("span",null,"ğŸ“¥ "+d(l.subscribe_count),1),"free"!==l.pay_type?(y(),a("span",x,"ğŸ’° "+d(l.collection_price)+"å¸",1)):t("",!0)]),s("div",I,[s("span",{class:p(l.status)},d((e=l.status,{draft:"è‰ç¨¿",published:"å·²å‘å¸ƒ",hidden:"å·²éšè—"}[e]||e)),3),l.is_completed?(y(),a("span",z,"å·²å®Œç»“")):t("",!0)])]),s("button",{class:"manage-btn",onClick:l=>{f.info("åˆé›†ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­")}},"ç®¡ç†",8,E)]);var e}),128)),0===N.value.length?(y(),a("div",G,[e[14]||(e[14]=s("span",null,"ğŸ“š",-1)),e[15]||(e[15]=s("p",null,"æš‚æ— è§†é¢‘åˆé›†",-1)),s("button",{onClick:e[2]||(e[2]=l=>O.value=!0)},"åˆ›å»ºåˆé›†")])):t("",!0)]),O.value?(y(),a("div",{key:0,class:"create-modal",onClick:e[11]||(e[11]=i(l=>O.value=!1,["self"]))},[s("div",H,[s("div",L,[e[16]||(e[16]=s("span",null,"åˆ›å»ºåˆé›†",-1)),s("button",{onClick:e[3]||(e[3]=l=>O.value=!1)},"Ã—")]),s("div",M,[s("div",$,[e[17]||(e[17]=s("label",null,"åˆé›†æ ‡é¢˜ *",-1)),n(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>Q.value.title=l),placeholder:"è¯·è¾“å…¥åˆé›†æ ‡é¢˜"},null,512),[[u,Q.value.title]])]),s("div",q,[e[18]||(e[18]=s("label",null,"åˆé›†ç®€ä»‹",-1)),n(s("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>Q.value.description=l),placeholder:"ä»‹ç»ä¸€ä¸‹è¿™ä¸ªåˆé›†",rows:"3"},null,512),[[u,Q.value.description]])]),s("div",A,[e[21]||(e[21]=s("label",null,"ä»˜è´¹è®¾ç½®",-1)),s("div",B,[s("label",{class:p({active:"free"===Q.value.pay_type})},[n(s("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=l=>Q.value.pay_type=l),value:"free"},null,512),[[r,Q.value.pay_type]]),e[19]||(e[19]=s("span",null,"å…è´¹",-1))],2),s("label",{class:p({active:"coins"===Q.value.pay_type})},[n(s("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=l=>Q.value.pay_type=l),value:"coins"},null,512),[[r,Q.value.pay_type]]),e[20]||(e[20]=s("span",null,"ä»˜è´¹",-1))],2)])]),"coins"===Q.value.pay_type?(y(),a("div",D,[e[22]||(e[22]=s("label",null,"åˆé›†ä»·æ ¼(é‡‘å¸)",-1)),n(s("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=l=>Q.value.collection_price=l),placeholder:"è´­ä¹°æ•´ä¸ªåˆé›†çš„ä»·æ ¼"},null,512),[[u,Q.value.collection_price,void 0,{number:!0}]])])):t("",!0),"coins"===Q.value.pay_type?(y(),a("div",F,[e[23]||(e[23]=s("label",null,"å•é›†ä»·æ ¼(é‡‘å¸)",-1)),n(s("input",{type:"number","onUpdate:modelValue":e[9]||(e[9]=l=>Q.value.single_video_price=l),placeholder:"è´­ä¹°å•é›†çš„ä»·æ ¼"},null,512),[[u,Q.value.single_video_price,void 0,{number:!0}]])])):t("",!0)]),s("div",J,[s("button",{class:"cancel-btn",onClick:e[10]||(e[10]=l=>O.value=!1)},"å–æ¶ˆ"),s("button",{class:"submit-btn",onClick:S,disabled:P.value},d(P.value?"åˆ›å»ºä¸­...":"åˆ›å»º"),9,K)])])])):t("",!0)]))}},[["__scopeId","data-v-879ba674"]]);export{N as default};
