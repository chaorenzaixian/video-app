import{r as l,c as e,w as a,j as s,y as i,C as t,I as c,L as u,M as o,aa as v,H as n,aC as r,z as d,U as k,u as p}from"./vue-vendor-Ba_vealp.js";import{_ as g}from"./ic_back-BPdSG6fy.js";import{_ as m}from"./no_data-CMy5glMK.js";import{_ as y,u as h,a as b}from"./index-C3P4JTuA.js";import{g as _}from"./avatar-DXHBWedi.js";import{E as C}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const w={class:"likes-page"},f={class:"page-header"},x={class:"tabs-wrapper"},L={class:"tabs"},z=["onClick"],$={class:"content"},j={key:0,class:"loading-state"},M=["onClick"],B=["onClick"],I={key:0,viewBox:"0 0 24 24",fill:"currentColor"},E={class:"post-header"},H=["src"],O={class:"post-nickname"},P={class:"post-content"},U={key:1,class:"post-images"},q=["src"],A={class:"post-stats"},D=["onClick"],F=["onClick"],G={key:0,viewBox:"0 0 24 24",fill:"currentColor"},J={class:"gallery-cover"},K=["src"],N={class:"image-count"},Q={class:"gallery-title"},R={class:"gallery-stats"},S=["onClick"],T=["onClick"],V={key:0,viewBox:"0 0 24 24",fill:"currentColor"},W={class:"novel-cover"},X=["src"],Y={class:"novel-info"},Z={class:"novel-title"},ll={class:"novel-author"},el={class:"novel-meta"},al={class:"novel-stats"},sl=["onClick"],il=["onClick"],tl={key:0,viewBox:"0 0 24 24",fill:"currentColor"},cl={class:"thumbnail"},ul=["src"],ol={class:"duration"},vl={key:0,class:"short-tag"},nl={class:"title"},rl={key:2,class:"empty-state"},dl={key:0,class:"bottom-bar"},kl={key:0,viewBox:"0 0 24 24",fill:"currentColor"},pl=y({__name:"Likes",setup(y){const pl=r(),gl=h(),ml=[{key:"video",label:"ÂΩ±ËßÜ"},{key:"short",label:"Áü≠ËßÜÈ¢ë"},{key:"gallery",label:"ÂõæÈõÜ"},{key:"novel",label:"Â∞èËØ¥"},{key:"post",label:"Â∏ñÂ≠ê"}],yl=l("video"),hl=l(!1),bl=l([]),_l=l([]),Cl=l(!1),wl=l(1),fl=l(!0),xl=e(()=>_l.value.length>0&&bl.value.length===_l.value.length),Ll=e(()=>"post"===yl.value?"post-list":"novel"===yl.value?"novel-list":""),zl=async(l=!1)=>{if(!Cl.value&&(l||fl.value)){Cl.value=!0;try{let e;l&&(wl.value=1,_l.value=[]),e="post"===yl.value?await b.get("/community/user/liked/posts",{params:{page:wl.value,page_size:20}}):"gallery"===yl.value?await b.get("/gallery-novel/user/liked/galleries",{params:{page:wl.value,page_size:20}}):"novel"===yl.value?await b.get("/gallery-novel/user/liked/novels",{params:{page:wl.value,page_size:20}}):await b.get("/videos/user/liked",{params:{page:wl.value,page_size:20,video_type:yl.value}});const a=e.data||e;a.items&&a.items.length>0?(_l.value=l?a.items:[..._l.value,...a.items],fl.value=a.has_more,wl.value++):fl.value=!1}catch(e){}finally{Cl.value=!1}}},$l=()=>{hl.value=!hl.value,hl.value||(bl.value=[])},jl=l=>{const e=bl.value.indexOf(l.id);e>-1?bl.value.splice(e,1):bl.value.push(l.id)},Ml=()=>{xl.value?bl.value=[]:bl.value=_l.value.map(l=>l.id)},Bl=async()=>{if(0!==bl.value.length)try{for(const l of bl.value)"post"===yl.value?await b.post(`/community/posts/${l}/like`):"gallery"===yl.value?await b.post(`/gallery-novel/gallery/${l}/like`):"novel"===yl.value?await b.post(`/gallery-novel/novel/${l}/like`):await b.post(`/videos/${l}/like`);_l.value=_l.value.filter(l=>!bl.value.includes(l.id)),bl.value=[],C.success("Â∑≤ÂèñÊ∂àÂñúÊ¨¢")}catch(l){C.error("Êìç‰ΩúÂ§±Ë¥•")}else C.warning("ËØ∑ÈÄâÊã©Ë¶ÅÂèñÊ∂àÁöÑÈ°πÁõÆ")},Il=l=>{hl.value?jl(l):"post"===yl.value?pl.push(`/user/community/post/${l.id}`):"gallery"===yl.value?pl.push(`/user/gallery/${l.id}`):"novel"===yl.value?pl.push(`/user/novel/${l.id}`):l.is_short?pl.push(`/shorts/${l.id}`):pl.push(`/user/video/${l.id}`)};return a(yl,()=>{bl.value=[],hl.value=!1,zl(!0)}),a(()=>gl.token,l=>{l&&zl(!0)}),s(()=>{gl.token&&zl(!0)}),(l,e)=>(d(),i("div",w,[t("header",f,[t("div",{class:"back-btn",onClick:e[0]||(e[0]=e=>l.$router.back())},[...e[1]||(e[1]=[t("img",{src:g,alt:"ËøîÂõû",class:"back-icon"},null,-1)])]),e[2]||(e[2]=t("h1",{class:"page-title"},"ÊàëÁöÑÂñúÊ¨¢",-1)),t("div",{class:"header-right",onClick:$l},u(hl.value?"ÂÆåÊàê":"ÁºñËæë"),1)]),t("div",x,[t("div",L,[(d(),i(o,null,v(ml,l=>t("div",{key:l.key,class:n(["tab-item",{active:yl.value===l.key}]),onClick:e=>yl.value=l.key},u(l.label),11,z)),64))])]),t("div",$,[Cl.value&&0===_l.value.length?(d(),i("div",j,[...e[3]||(e[3]=[t("p",null,"Âä†ËΩΩ‰∏≠...",-1)])])):_l.value.length>0?(d(),i("div",{key:1,class:n(["likes-grid",Ll.value])},["post"===yl.value?(d(!0),i(o,{key:0},v(_l.value,l=>(d(),i("div",{key:l.id,class:"post-item",onClick:e=>Il(l)},[hl.value?(d(),i("div",{key:0,class:"checkbox",onClick:k(e=>jl(l),["stop"])},[t("div",{class:n(["check-box",{checked:bl.value.includes(l.id)}])},[bl.value.includes(l.id)?(d(),i("svg",I,[...e[4]||(e[4]=[t("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):c("",!0)],2)],8,B)):c("",!0),t("div",E,[t("img",{src:p(_)(l.user_avatar,l.user_id),class:"post-avatar"},null,8,H),t("span",O,u(l.user_nickname),1)]),t("p",P,u(l.content),1),l.images&&l.images.length>0?(d(),i("div",U,[(d(!0),i(o,null,v(l.images.slice(0,3),(l,e)=>(d(),i("img",{key:e,src:l,class:"post-img"},null,8,q))),128))])):c("",!0),t("div",A,[t("span",null,"‚ù§Ô∏è "+u(l.like_count||0),1),t("span",null,"üí¨ "+u(l.comment_count||0),1)])],8,M))),128)):"gallery"===yl.value?(d(!0),i(o,{key:1},v(_l.value,l=>(d(),i("div",{key:l.id,class:"gallery-item",onClick:e=>Il(l)},[hl.value?(d(),i("div",{key:0,class:"checkbox",onClick:k(e=>jl(l),["stop"])},[t("div",{class:n(["check-box",{checked:bl.value.includes(l.id)}])},[bl.value.includes(l.id)?(d(),i("svg",G,[...e[5]||(e[5]=[t("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):c("",!0)],2)],8,F)):c("",!0),t("div",J,[t("img",{src:l.cover||l.thumbnail||"/images/backgrounds/no_data.webp",alt:""},null,8,K),t("span",N,u(l.image_count||0)+"P",1)]),t("h3",Q,u(l.title),1),t("div",R,[t("span",null,"‚ù§Ô∏è "+u(l.like_count||0),1),t("span",null,"üëÅ "+u(l.view_count||0),1)])],8,D))),128)):"novel"===yl.value?(d(!0),i(o,{key:2},v(_l.value,l=>(d(),i("div",{key:l.id,class:"novel-item",onClick:e=>Il(l)},[hl.value?(d(),i("div",{key:0,class:"checkbox",onClick:k(e=>jl(l),["stop"])},[t("div",{class:n(["check-box",{checked:bl.value.includes(l.id)}])},[bl.value.includes(l.id)?(d(),i("svg",V,[...e[6]||(e[6]=[t("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):c("",!0)],2)],8,T)):c("",!0),t("div",W,[t("img",{src:l.cover||l.thumbnail||"/images/backgrounds/no_data.webp",alt:""},null,8,X)]),t("div",Y,[t("h3",Z,u(l.title),1),t("p",ll,u(l.author||"‰ΩöÂêç"),1),t("div",el,[t("span",null,u(l.chapter_count||0)+"Á´†",1),t("span",null,u(l.status),1)]),t("div",al,[t("span",null,"‚ù§Ô∏è "+u(l.like_count||0),1),t("span",null,"üëÅ "+u(l.view_count||0),1)])])],8,S))),128)):(d(!0),i(o,{key:3},v(_l.value,l=>(d(),i("div",{key:l.id,class:"like-item",onClick:e=>Il(l)},[hl.value?(d(),i("div",{key:0,class:"checkbox",onClick:k(e=>jl(l),["stop"])},[t("div",{class:n(["check-box",{checked:bl.value.includes(l.id)}])},[bl.value.includes(l.id)?(d(),i("svg",tl,[...e[7]||(e[7]=[t("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):c("",!0)],2)],8,il)):c("",!0),t("div",cl,[t("img",{src:l.thumbnail||l.cover||"/images/backgrounds/no_data.webp",alt:""},null,8,ul),t("span",ol,u(l.duration),1),l.is_short?(d(),i("span",vl,"Áü≠ËßÜÈ¢ë")):c("",!0)]),t("h3",nl,u(l.title),1)],8,sl))),128))],2)):(d(),i("div",rl,[...e[8]||(e[8]=[t("img",{src:m,alt:""},null,-1),t("p",null,"ÂΩìÂâçÈ°µÈù¢ÊöÇÊó†ÂÜÖÂÆπÔΩû",-1)])]))]),hl.value&&_l.value.length>0?(d(),i("div",dl,[t("div",{class:"select-all",onClick:Ml},[t("div",{class:n(["check-box",{checked:xl.value}])},[xl.value?(d(),i("svg",kl,[...e[9]||(e[9]=[t("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):c("",!0)],2),e[10]||(e[10]=t("span",null,"ÂÖ®ÈÄâ",-1))]),t("button",{class:"delete-btn",onClick:Bl},"ÂèñÊ∂àÂñúÊ¨¢")])):c("",!0)]))}},[["__scopeId","data-v-73a116b1"]]);export{pl as default};
