import{_ as a,u as e,b as s}from"./index-C3P4JTuA.js";import{_ as t}from"./ic_back-BPdSG6fy.js";import{b as c}from"./utils-DflAyOWx.js";import{E as n}from"./element-plus-DlIn_qXi.js";import{r as l,j as r,n as i,y as o,C as d,L as u,z as v}from"./vue-vendor-Ba_vealp.js";const m={class:"invite-share-page"},p={class:"page-header"},f={class:"share-card-container"},b={class:"qr-section"},h={class:"qr-frame"},g={class:"invite-info"},_={class:"invite-code"},C={class:"site-url"},k=a({__name:"InviteShare",setup(a){const k=e(),y=l(""),w=l("https://soul9.fm"),j=l(null),$=l(null),E=()=>{const a=`${w.value}?code=${y.value}`;if(navigator.clipboard)navigator.clipboard.writeText(a),n.success("链接已复制");else{const e=document.createElement("textarea");e.value=a,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),n.success("链接已复制")}},L=async()=>{try{const a=(await s(async()=>{const{default:a}=await import("./html2canvas.esm-BPY6V10C.js");return{default:a}},[])).default;if(!j.value)return;const e=await a(j.value,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:null}),t=document.createElement("a");t.download=`invite_${y.value}.png`,t.href=e.toDataURL("image/png"),t.click(),n.success("图片已保存")}catch(a){n.error("保存图片失败，请重试")}};return r(async()=>{var a;y.value=(null==(a=k.user)?void 0:a.invite_code)||"T5884L",await i(),(async()=>{if(!$.value)return;const a=`${w.value}?code=${y.value}`;try{$.value.innerHTML="";const e=document.createElement("canvas");await c.toCanvas(e,a,{width:140,margin:1,color:{dark:"#000000",light:"#ffffff"}}),$.value.appendChild(e)}catch(e){}})()}),(a,e)=>(v(),o("div",m,[d("header",p,[d("div",{class:"back-btn",onClick:e[0]||(e[0]=e=>a.$router.back())},[...e[2]||(e[2]=[d("img",{src:t,alt:"返回",class:"back-icon"},null,-1)])]),e[4]||(e[4]=d("h1",{class:"page-title"},"邀请分享",-1)),d("div",{class:"header-right",onClick:e[1]||(e[1]=e=>a.$router.push("/user/invite-records"))},[...e[3]||(e[3]=[d("span",null,"记录",-1)])])]),d("div",f,[d("div",{class:"share-card",ref_key:"shareCardRef",ref:j},[e[7]||(e[7]=d("div",{class:"card-bg"},[d("img",{src:"/images/backgrounds/girl2.webp",alt:"背景"})],-1)),d("div",b,[d("div",h,[d("div",{class:"qr-code",ref_key:"qrCodeRef",ref:$},null,512)])]),d("div",g,[e[5]||(e[5]=d("span",{class:"invite-label"},"邀请码",-1)),d("span",_,u(y.value),1),d("span",C,"SOUL 官网地址 "+u(w.value),1),e[6]||(e[6]=d("span",{class:"scan-tip"},"提示*苹果手机请用相机扫码/安卓手机推荐UC浏览器扫码",-1))])],512)]),d("div",{class:"bottom-actions"},[d("button",{class:"action-btn copy-btn",onClick:E},[...e[8]||(e[8]=[d("span",null,"复制链接",-1)])]),d("button",{class:"action-btn save-btn",onClick:L},[...e[9]||(e[9]=[d("span",null,"保存图片",-1)])])])]))}},[["__scopeId","data-v-98dc6aff"]]);export{k as default};
