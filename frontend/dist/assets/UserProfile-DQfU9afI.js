import{_ as a}from"./no_data-CMy5glMK.js";import{c as s,az as e,r as t,j as l,y as i,C as r,I as c,H as o,L as n,M as v,aa as u,aC as d,z as p,K as m}from"./vue-vendor-Ba_vealp.js";import{_ as g,u as y,a as k}from"./index-C3P4JTuA.js";import{E as _}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const h={class:"user-profile-page"},b={class:"profile-header"},f={class:"user-section"},w={class:"avatar-wrapper"},C=["src"],$={key:0,class:"user-actions"},x={key:0},S={key:1},j={class:"user-name-row"},M={class:"user-name gradient-gold"},z=["src","alt"],I={class:"user-stats"},P={class:"stat-item"},E={class:"stat-item"},H={class:"content-tabs"},L=["onClick"],B={key:0,class:"tab-indicator"},D={class:"content-area"},F={key:0,class:"video-list"},G={key:0,class:"video-grid-horizontal"},J=["onClick"],W={class:"video-cover-wrapper"},q=["src"],K={class:"video-duration"},U={class:"video-info"},V={class:"video-title"},A={class:"video-meta"},N={key:1,class:"empty-state"},O={key:1,class:"short-list"},Q={key:0,class:"short-grid-vertical"},R=["onClick"],T=["src"],X={class:"short-info"},Y={class:"play-count"},Z={key:1,class:"empty-state"},aa={key:2,class:"post-list"},sa={key:0,class:"posts-grid"},ea=["onClick"],ta={class:"post-content"},la={key:0,class:"post-images"},ia=["src"],ra={key:0,class:"image-count"},ca={class:"post-stats"},oa={key:1,class:"empty-state"},na={key:3,class:"album-list"},va=g({__name:"UserProfile",setup(g){const va=e(),ua=d(),da=y(),pa=s(()=>{var a;const s=parseInt(va.params.id),e=null==(a=da.user)?void 0:a.id;return e&&s===e}),ma={1:"/images/backgrounds/vip_gold.webp",2:"/images/backgrounds/vip_1.webp",3:"/images/backgrounds/vip_2.webp",4:"/images/backgrounds/vip_3.webp",5:"/images/backgrounds/super_vip_red.webp",6:"/images/backgrounds/super_vip_blue.webp"},ga=t({}),ya=t(!1);t(!1);const ka=[{key:"video",label:"è§†é¢‘"},{key:"short",label:"æŠ–éŸ³"},{key:"post",label:"å¸–å­"},{key:"album",label:"å›¾é›†"}],_a=t("video"),ha=t([]),ba=t([]),fa=t([]),wa=a=>{if(a)return a.startsWith("/")||a.startsWith("http")?a:"/"+a;return(a=>{const s=a%52;if(s<17)return`/images/avatars/icon_avatar_${s+1}.webp`;if(s<32)return`/images/avatars/DM_20251217202131_${String(s-17+1).padStart(3,"0")}.JPEG`;return`/images/avatars/DM_20251217202341_${String(s-32+1).padStart(3,"0")}.JPEG`})(parseInt(va.params.id)||1)},Ca=a=>a?a>=1e4?(a/1e4).toFixed(1)+"w":a>=1e3?(a/1e3).toFixed(1)+"k":a.toString():"0",$a=a=>{if(!a)return"00:00";const s=Math.floor(a/60),e=Math.floor(a%60);return`${s.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`},xa=async()=>{var a;const s=va.params.id;if(s)try{const e=await k.get("/videos",{params:{uploader_id:s,limit:20}});ha.value=(null==(a=e.data)?void 0:a.items)||e.data||[]}catch(e){}},Sa=async()=>{var a;const s=va.params.id;if(s)try{const e=await k.get("/shorts",{params:{uploader_id:s,limit:20}});ba.value=(null==(a=e.data)?void 0:a.items)||e.data||[]}catch(e){}},ja=async()=>{const a=va.params.id;if(a)try{const s=await k.get("/community/posts",{params:{user_id:a,page_size:20}});fa.value=s.data||[]}catch(s){}},Ma=async()=>{var a;const s=va.params.id;if(s)try{ya.value?(await k.delete(`/users/${s}/follow`),ya.value=!1,_.success("å·²å–æ¶ˆå…³æ³¨")):(await k.post(`/users/${s}/follow`),ya.value=!0,_.success("å…³æ³¨æˆåŠŸ"))}catch(e){401===(null==(a=e.response)?void 0:a.status)?_.warning("è¯·å…ˆç™»å½•"):_.error("æ“ä½œå¤±è´¥")}},za=()=>{const a=va.params.id;ua.push({path:`/user/chat/${a}`,query:{nickname:ga.value.nickname||ga.value.username,avatar:ga.value.avatar}})};return l(()=>{(async()=>{const a=va.params.id;if(a)try{const s=await k.get(`/users/${a}/profile`);ga.value=s.data||s,ya.value=ga.value.is_followed||!1}catch(s){ga.value={id:a,nickname:`ç”¨æˆ·${a}`,video_count:0,fans_count:0}}})(),xa(),Sa(),ja()}),(s,e)=>{return p(),i("div",h,[r("div",b,[r("div",{class:"back-btn",onClick:e[0]||(e[0]=a=>s.$router.back())},[...e[1]||(e[1]=[r("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[r("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)])]),r("div",f,[r("div",w,[r("img",{src:wa(ga.value.avatar),class:"avatar"},null,8,C)]),pa.value?c("",!0):(p(),i("div",$,[r("div",{class:"msg-btn",onClick:za},[...e[2]||(e[2]=[r("img",{src:"/images/backgrounds/msg_button.webp",alt:"ç§ä¿¡"},null,-1)])]),r("button",{class:o(["follow-btn",{followed:ya.value}]),onClick:Ma},[ya.value?(p(),i("span",S,"å·²å…³æ³¨")):(p(),i("span",x,"+ å…³æ³¨"))],2)]))]),r("div",j,[r("span",M,n(ga.value.nickname||ga.value.username),1),ga.value.vip_level&&ga.value.vip_level>0?(p(),i("img",{key:0,src:(t=ga.value.vip_level,ma[t]||ma[1]),class:"vip-badge",alt:`VIP${ga.value.vip_level}`},null,8,z)):c("",!0)]),r("div",I,[r("span",P,n(ga.value.video_count||0)+" ä½œå“",1),e[3]||(e[3]=r("span",{class:"stat-divider"},null,-1)),r("span",E,n(ga.value.fans_count||0)+"ç²‰ä¸",1)]),r("div",H,[(p(),i(v,null,u(ka,a=>r("div",{key:a.key,class:o(["tab-item",{active:_a.value===a.key}]),onClick:s=>_a.value=a.key},[m(n(a.label)+" ",1),_a.value===a.key?(p(),i("div",B)):c("",!0)],10,L)),64))])]),r("div",D,["video"===_a.value?(p(),i("div",F,[ha.value.length>0?(p(),i("div",G,[(p(!0),i(v,null,u(ha.value,a=>(p(),i("div",{key:a.id,class:"video-card",onClick:s=>(a=>{ua.push(`/user/video/${a.id}`)})(a)},[r("div",W,[r("img",{src:a.cover_url,class:"video-cover"},null,8,q),r("div",K,n($a(a.duration)),1),e[4]||(e[4]=r("div",{class:"play-overlay"},[r("svg",{viewBox:"0 0 24 24",fill:"white"},[r("path",{d:"M8 5v14l11-7z"})])],-1))]),r("div",U,[r("h3",V,n(a.title),1),r("div",A,[r("span",null,n(Ca(a.view_count))+"æ’­æ”¾",1)])])],8,J))),128))])):(p(),i("div",N,[e[5]||(e[5]=r("img",{src:a,class:"empty-icon"},null,-1)),e[6]||(e[6]=r("p",{class:"empty-text"},"å½“å‰é¡µé¢æš‚æ— å†…å®¹ ~",-1)),r("p",{class:"retry-text",onClick:xa},"ç‚¹å‡»é‡è¯•")]))])):"short"===_a.value?(p(),i("div",O,[ba.value.length>0?(p(),i("div",Q,[(p(!0),i(v,null,u(ba.value,a=>(p(),i("div",{key:a.id,class:"short-item",onClick:s=>(a=>{ua.push(`/shorts?id=${a.id}`)})(a)},[r("img",{src:a.cover_url,class:"short-cover"},null,8,T),r("div",X,[r("span",Y,"â–¶ "+n(Ca(a.view_count)),1)])],8,R))),128))])):(p(),i("div",Z,[e[7]||(e[7]=r("img",{src:a,class:"empty-icon"},null,-1)),e[8]||(e[8]=r("p",{class:"empty-text"},"å½“å‰é¡µé¢æš‚æ— å†…å®¹ ~",-1)),r("p",{class:"retry-text",onClick:Sa},"ç‚¹å‡»é‡è¯•")]))])):"post"===_a.value?(p(),i("div",aa,[fa.value.length>0?(p(),i("div",sa,[(p(!0),i(v,null,u(fa.value,a=>(p(),i("div",{key:a.id,class:"post-item",onClick:s=>{return e=a.id,void ua.push(`/user/community/post/${e}`);var e}},[r("p",ta,n(a.content),1),a.images&&a.images.length?(p(),i("div",la,[r("img",{src:a.images[0],class:"post-thumb"},null,8,ia),a.images.length>1?(p(),i("span",ra,"+"+n(a.images.length-1),1)):c("",!0)])):c("",!0),r("div",ca,[r("span",null,"ğŸ‘ "+n(Ca(a.view_count)),1),r("span",null,"ğŸ’¬ "+n(a.comment_count||0),1),r("span",null,"â¤ï¸ "+n(Ca(a.like_count)),1)])],8,ea))),128))])):(p(),i("div",oa,[e[9]||(e[9]=r("img",{src:a,class:"empty-icon"},null,-1)),e[10]||(e[10]=r("p",{class:"empty-text"},"å½“å‰é¡µé¢æš‚æ— å†…å®¹ ~",-1)),r("p",{class:"retry-text",onClick:ja},"ç‚¹å‡»é‡è¯•")]))])):"album"===_a.value?(p(),i("div",na,[...e[11]||(e[11]=[r("div",{class:"empty-state"},[r("img",{src:a,class:"empty-icon"}),r("p",{class:"empty-text"},"å½“å‰é¡µé¢æš‚æ— å†…å®¹ ~"),r("p",{class:"retry-text"},"ç‚¹å‡»é‡è¯•")],-1)])])):c("",!0)])]);var t}}},[["__scopeId","data-v-48ab757f"]]);export{va as default};
