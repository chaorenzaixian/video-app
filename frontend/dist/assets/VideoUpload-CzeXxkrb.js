import{r as e,j as l,y as a,C as o,I as i,G as u,af as s,L as p,aF as n,M as t,aa as r,H as c,ab as v,aC as d,z as y}from"./vue-vendor-Ba_vealp.js";import{_ as m}from"./ic_back-BPdSG6fy.js";import{_,a as f}from"./index-C3P4JTuA.js";import{E as b}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const g={class:"video-upload-page"},h={class:"nav-header"},V={class:"upload-form"},k={class:"upload-section"},I={key:0,class:"upload-area"},U={key:1,class:"upload-preview"},P=["src"],C={class:"form-group"},w={class:"cover-upload"},j=["src"],x={class:"form-group"},L={class:"char-count"},R={class:"form-group"},$={class:"form-group"},G=["value"],M={class:"form-group"},O={class:"pay-options"},z={key:0,class:"form-group"},B={key:1,class:"form-group"},E={key:2,class:"form-group"},F={key:3,class:"form-group"},H={class:"submit-section"},q=["disabled"],A=_({__name:"VideoUpload",setup(_){const A=d(),D=e(null),J=e(""),K=e(null),N=e(""),Q=e([]),S=e(!1),T=e({title:"",description:"",category_id:"",pay_type:"free",coin_price:0,vip_coin_price:0,vip_free_level:1,free_preview_seconds:15}),W=e=>{const l=e.target.files[0];if(l){if(l.size>2147483648)return void b.error("è§†é¢‘å¤§å°ä¸èƒ½è¶…è¿‡2GB");D.value=l,J.value=URL.createObjectURL(l)}},X=()=>{D.value=null,J.value=""},Y=e=>{const l=e.target.files[0];l&&(K.value=l,N.value=URL.createObjectURL(l))},Z=async()=>{var e,l;if(T.value.title){S.value=!0;try{await f.post("/creator/videos/upload",T.value),b.success("è§†é¢‘å·²æäº¤å®¡æ ¸"),A.push("/creator/videos")}catch(a){b.error((null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.detail)||"æäº¤å¤±è´¥")}finally{S.value=!1}}else b.warning("è¯·è¾“å…¥è§†é¢‘æ ‡é¢˜")};return l(async()=>{try{const e=await f.get("/videos/categories");Q.value=e.data}catch(e){}}),(e,l)=>(y(),a("div",g,[o("div",h,[o("button",{class:"back-btn",onClick:l[0]||(l[0]=l=>e.$router.push("/creator/videos"))},[...l[14]||(l[14]=[o("img",{src:m,alt:"è¿”å›",class:"back-icon"},null,-1)])]),l[15]||(l[15]=o("h1",null,"ä¸Šä¼ è§†é¢‘",-1)),l[16]||(l[16]=o("div",null,null,-1))]),o("div",V,[o("div",k,[D.value?(y(),a("div",U,[o("video",{src:J.value,controls:""},null,8,P),o("button",{class:"remove-btn",onClick:X},"Ã—")])):(y(),a("div",I,[o("input",{type:"file",accept:"video/*",onChange:W,ref:"videoInput",hidden:""},null,544),o("div",{class:"upload-placeholder",onClick:l[1]||(l[1]=l=>e.$refs.videoInput.click())},[...l[17]||(l[17]=[o("span",{class:"upload-icon"},"ğŸ“¹",-1),o("p",null,"ç‚¹å‡»ä¸Šä¼ è§†é¢‘",-1),o("p",{class:"tip"},"æ”¯æŒ MP4ã€MOV ç­‰æ ¼å¼ï¼Œæœ€å¤§ 2GB",-1)])])]))]),o("div",C,[l[19]||(l[19]=o("label",null,"è§†é¢‘å°é¢",-1)),o("div",w,[o("input",{type:"file",accept:"image/*",onChange:Y,ref:"coverInput",hidden:""},null,544),N.value?(y(),a("div",{key:0,class:"cover-preview",onClick:l[2]||(l[2]=l=>e.$refs.coverInput.click())},[o("img",{src:N.value,alt:""},null,8,j)])):(y(),a("div",{key:1,class:"cover-placeholder",onClick:l[3]||(l[3]=l=>e.$refs.coverInput.click())},[...l[18]||(l[18]=[o("span",null,"ğŸ“·",-1),o("p",null,"ä¸Šä¼ å°é¢",-1)])]))])]),o("div",x,[l[20]||(l[20]=o("label",null,"è§†é¢‘æ ‡é¢˜ *",-1)),u(o("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>T.value.title=e),placeholder:"è¯·è¾“å…¥è§†é¢‘æ ‡é¢˜",maxlength:"50"},null,512),[[s,T.value.title]]),o("span",L,p(T.value.title.length)+"/50",1)]),o("div",R,[l[21]||(l[21]=o("label",null,"è§†é¢‘ç®€ä»‹",-1)),u(o("textarea",{"onUpdate:modelValue":l[5]||(l[5]=e=>T.value.description=e),placeholder:"ä»‹ç»ä¸€ä¸‹è§†é¢‘å†…å®¹",rows:"4"},null,512),[[s,T.value.description]])]),o("div",$,[l[23]||(l[23]=o("label",null,"è§†é¢‘åˆ†ç±»",-1)),u(o("select",{"onUpdate:modelValue":l[6]||(l[6]=e=>T.value.category_id=e)},[l[22]||(l[22]=o("option",{value:""},"è¯·é€‰æ‹©åˆ†ç±»",-1)),(y(!0),a(t,null,r(Q.value,e=>(y(),a("option",{key:e.id,value:e.id},p(e.name),9,G))),128))],512),[[n,T.value.category_id]])]),o("div",M,[l[27]||(l[27]=o("label",null,"ä»˜è´¹è®¾ç½®",-1)),o("div",O,[o("label",{class:c(["radio-option",{active:"free"===T.value.pay_type}])},[u(o("input",{type:"radio","onUpdate:modelValue":l[7]||(l[7]=e=>T.value.pay_type=e),value:"free"},null,512),[[v,T.value.pay_type]]),l[24]||(l[24]=o("span",null,"å…è´¹",-1))],2),o("label",{class:c(["radio-option",{active:"coins"===T.value.pay_type}])},[u(o("input",{type:"radio","onUpdate:modelValue":l[8]||(l[8]=e=>T.value.pay_type=e),value:"coins"},null,512),[[v,T.value.pay_type]]),l[25]||(l[25]=o("span",null,"ä»˜è´¹",-1))],2),o("label",{class:c(["radio-option",{active:"vip_free"===T.value.pay_type}])},[u(o("input",{type:"radio","onUpdate:modelValue":l[9]||(l[9]=e=>T.value.pay_type=e),value:"vip_free"},null,512),[[v,T.value.pay_type]]),l[26]||(l[26]=o("span",null,"VIPå…è´¹",-1))],2)])]),"free"!==T.value.pay_type?(y(),a("div",z,[l[28]||(l[28]=o("label",null,"éä¼šå‘˜ä»·æ ¼ï¼ˆé‡‘å¸ï¼‰",-1)),u(o("input",{type:"number","onUpdate:modelValue":l[10]||(l[10]=e=>T.value.coin_price=e),placeholder:"éä¼šå‘˜è´­ä¹°ä»·æ ¼",min:"1"},null,512),[[s,T.value.coin_price,void 0,{number:!0}]]),l[29]||(l[29]=o("p",{class:"input-hint"},"éVIPç”¨æˆ·éœ€è¦æ”¯ä»˜çš„é‡‘å¸æ•°é‡",-1))])):i("",!0),"coins"===T.value.pay_type?(y(),a("div",B,[l[30]||(l[30]=o("label",null,"VIPä¼šå‘˜ä»·æ ¼ï¼ˆé‡‘å¸ï¼‰",-1)),u(o("input",{type:"number","onUpdate:modelValue":l[11]||(l[11]=e=>T.value.vip_coin_price=e),placeholder:"VIPä¼šå‘˜ä¼˜æƒ ä»·æ ¼ï¼Œ0ä¸ºå…è´¹",min:"0"},null,512),[[s,T.value.vip_coin_price,void 0,{number:!0}]]),l[31]||(l[31]=o("p",{class:"input-hint"},"VIPä¼šå‘˜è´­ä¹°æ—¶çš„ä¼˜æƒ ä»·æ ¼ï¼Œè®¾ä¸º0åˆ™VIPå…è´¹è§‚çœ‹",-1))])):i("",!0),"vip_free"===T.value.pay_type?(y(),a("div",E,[l[33]||(l[33]=o("label",null,"VIPç­‰çº§è¦æ±‚",-1)),u(o("select",{"onUpdate:modelValue":l[12]||(l[12]=e=>T.value.vip_free_level=e)},[...l[32]||(l[32]=[o("option",{value:1},"æ™®é€šVIP",-1),o("option",{value:2},"VIP1",-1),o("option",{value:3},"VIP2",-1),o("option",{value:4},"VIP3",-1),o("option",{value:5},"é»„é‡‘è‡³å°Š",-1)])],512),[[n,T.value.vip_free_level,void 0,{number:!0}]])])):i("",!0),"free"!==T.value.pay_type?(y(),a("div",F,[l[34]||(l[34]=o("label",null,"è¯•çœ‹æ—¶é•¿ï¼ˆç§’ï¼‰",-1)),u(o("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=e=>T.value.free_preview_seconds=e),placeholder:"å…è´¹è¯•çœ‹æ—¶é•¿",min:"0",max:"300"},null,512),[[s,T.value.free_preview_seconds,void 0,{number:!0}]]),l[35]||(l[35]=o("p",{class:"input-hint"},"ç”¨æˆ·å¯å…è´¹è¯•çœ‹çš„æ—¶é•¿ï¼Œè®¾ä¸º0åˆ™ä¸å…è®¸è¯•çœ‹",-1))])):i("",!0),o("div",H,[o("button",{class:"submit-btn",onClick:Z,disabled:S.value},p(S.value?"æäº¤ä¸­...":"æäº¤å®¡æ ¸"),9,q),l[36]||(l[36]=o("p",{class:"submit-tip"},"è§†é¢‘å°†åœ¨å®¡æ ¸é€šè¿‡åå‘å¸ƒ",-1))])])]))}},[["__scopeId","data-v-1d7e40c0"]]);export{A as default};
