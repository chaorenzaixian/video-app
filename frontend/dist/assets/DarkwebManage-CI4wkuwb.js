/* empty css             *//* empty css                   *//* empty css                   *//* empty css                 *//* empty css                        *//* empty css                    *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                 *//* empty css                        *//* empty css                    *//* empty css                     *//* empty css                  *//* empty css                          *//* empty css                 *//* empty css                       *//* empty css                        *//* empty css                  *//* empty css                  */import{r as e,l,c as a,j as t,y as d,C as i,O as u,F as o,L as s,z as r,K as n,u as c,I as v,U as p,M as m,aa as _,H as f,E as y,G as b,ae as g}from"./vue-vendor-Ba_vealp.js";import{aM as w,bz as h,bk as V,aQ as k,aH as U,bA as x,aR as C,aS as j,bw as z,E as I,bx as P,aG as S,a4 as D,bf as F,bg as $,Z as L,a1 as A,aw as G,a0 as M,aF as O,a3 as B,$ as E,aT as R,bu as H,bl as N,bm as q,bo as K,bp as T,bh as W,bi as J,bn as Q,bj as Z,bs as X,bt as Y,a6 as ee,bv as le,a as ae}from"./element-plus-DlIn_qXi.js";import{_ as te,a as de}from"./index-C3P4JTuA.js";import"./utils-DflAyOWx.js";const ie={class:"darkweb-manage"},ue={class:"page-header"},oe={class:"header-actions"},se={class:"stats-row"},re={class:"stat-card"},ne={class:"stat-value"},ce={class:"stat-card"},ve={class:"stat-value"},pe={class:"stat-card"},me={class:"stat-value"},_e={class:"stat-card"},fe={class:"stat-value"},ye={key:0,class:"upload-area"},be={key:1,class:"file-info"},ge={class:"file-details"},we={class:"file-name"},he={class:"file-size"},Ve={class:"cover-section"},ke={class:"cover-mode-switch"},Ue={key:0,class:"cover-candidates"},xe={key:0,class:"cover-hint"},Ce={key:1,class:"cover-loading"},je={key:2,class:"cover-actions"},ze={key:3,class:"cover-grid"},Ie=["onClick"],Pe=["src","alt"],Se={class:"cover-info"},De={class:"time"},Fe={key:0,class:"selected-badge"},$e={key:1,class:"best-badge"},Le={key:1,class:"cover-upload"},Ae={key:0,class:"cover-upload-area"},Ge={key:1,class:"cover-preview"},Me=["src"],Oe={class:"cover-overlay"},Be={key:2,class:"cover-auto-hint"},Ee={key:0,class:"upload-progress"},Re={class:"progress-text"},He={class:"tab-toolbar"},Ne={class:"tab-toolbar"},qe={class:"tab-toolbar"},Ke={class:"tags-grid"},Te={class:"tag-name"},We={class:"tag-count"},Je=te({__name:"DarkwebManage",setup(te){const Je=e("upload"),Qe=e({video_count:0,category_count:0,tag_count:0,total_views:0}),Ze=e(null),Xe=e(null),Ye=e(!1),el=e(0),ll=e(""),al=e("auto"),tl=e([]),dl=e(""),il=e(!1),ul=e(null),ol=l({file:null,title:"",description:"",category_id:null,tags:[],is_featured:!1}),sl=e([]),rl=e(1),nl=e(20),cl=e(0),vl=e(""),pl=e(""),ml=e(""),_l=e(!1),fl=e(!1),yl=e(null),bl=e(!1),gl=l({title:"",description:"",cover_url:"",hls_url:"",preview_url:"",duration:0,category_id:"",tags:[],is_featured:!1}),wl=e([]),hl=a(()=>wl.value),Vl=a(()=>wl.value),kl=e(!1),Ul=e(!1),xl=e(null),Cl=e(null),jl=e(!1),zl=l({name:"",description:"",icon:"",sort_order:0,is_active:!0}),Il=e([]),Pl=e(""),Sl=e(!1),Dl=e(!1),Fl=l({min_vip_level:5}),$l=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":e<1073741824?(e/1024/1024).toFixed(2)+" MB":(e/1024/1024/1024).toFixed(2)+" GB",Ll=e=>e?e.startsWith("http")?e:`${e}`:"",Al=e=>({PUBLISHED:"å·²å‘å¸ƒ",PROCESSING:"å¤„ç†ä¸­",UPLOADING:"ä¸Šä¼ ä¸­",FAILED:"å¤±è´¥"}[e]||e),Gl=e=>{ol.file=e.raw,ol.title||(ol.title=e.name.replace(/\.[^/.]+$/,"")),tl.value=[],dl.value=""},Ml=()=>I.warning("åªèƒ½ä¸Šä¼ ä¸€ä¸ªè§†é¢‘æ–‡ä»¶"),Ol=()=>{var e;ol.file=null,null==(e=Xe.value)||e.clearFiles(),tl.value=[],dl.value=""},Bl=e=>{ol.category_id=e},El=async()=>{var e,l,a;if(ol.file){il.value=!0;try{const l=new FormData;l.append("file",ol.file),l.append("num_candidates",6);const a=await de.post("/videos/extract-covers",l,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5});tl.value=(null==(e=a.data)?void 0:e.candidates)||a.candidates||[],tl.value.length>0&&(I.success(`æˆåŠŸæå– ${tl.value.length} ä¸ªå€™é€‰å°é¢`),dl.value=tl.value[0].url)}catch(t){I.error("æå–å°é¢å¤±è´¥: "+((null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.detail)||t.message))}finally{il.value=!1}}else I.warning("è¯·å…ˆé€‰æ‹©è§†é¢‘æ–‡ä»¶")},Rl=e=>{const l=e.type.startsWith("image/"),a=e.size/1024/1024<10;return l?!!a||(I.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡10MB"),!1):(I.error("åªèƒ½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶"),!1)},Hl=async({file:e})=>{var l;try{const a=new FormData;a.append("file",e);const t=await de.post("/videos/upload-custom-cover",a,{headers:{"Content-Type":"multipart/form-data"}});dl.value=(null==(l=t.data)?void 0:l.url)||t.url,I.success("å°é¢ä¸Šä¼ æˆåŠŸ")}catch(a){I.error("ä¸Šä¼ å°é¢å¤±è´¥")}},Nl=async()=>{var e,l,a,t;if(!ol.file)return void I.warning("è¯·å…ˆé€‰æ‹©è§†é¢‘æ–‡ä»¶");if(!ol.title)return void I.warning("è¯·è¾“å…¥è§†é¢‘æ ‡é¢˜");Ye.value=!0,el.value=0,ll.value="å‡†å¤‡ä¸Šä¼ ...";const d=new FormData;d.append("file",ol.file),d.append("title",ol.title),d.append("description",ol.description||""),ol.category_id&&d.append("category_id",ol.category_id),(null==(e=ol.tags)?void 0:e.length)>0&&d.append("tags",ol.tags.join(",")),d.append("is_featured",ol.is_featured),"auto"!==al.value&&dl.value&&d.append("custom_cover_url",dl.value);try{await de.post("/admin/darkweb/videos/upload",d,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{e.lengthComputable&&(el.value=Math.round(e.loaded/e.total*100),ll.value=`ä¸Šä¼ ä¸­ ${$l(e.loaded)} / ${$l(e.total)}`)}}),ll.value="ä¸Šä¼ å®Œæˆï¼Œæ­£åœ¨å¤„ç†è§†é¢‘...",I.success("ä¸Šä¼ æˆåŠŸï¼Œè§†é¢‘æ­£åœ¨åå°å¤„ç†ä¸­"),ol.file=null,ol.title="",ol.description="",ol.category_id=null,ol.tags=[],ol.is_featured=!1,ul.value=null,tl.value=[],dl.value="",null==(l=Xe.value)||l.clearFiles(),ql(),Kl()}catch(i){ll.value="ä¸Šä¼ å¤±è´¥",I.error("ä¸Šä¼ å¤±è´¥: "+((null==(t=null==(a=i.response)?void 0:a.data)?void 0:t.detail)||i.message))}finally{Ye.value=!1}},ql=async()=>{try{const e=await de.get("/admin/darkweb/stats"),l=e.data||e;Qe.value=l||{video_count:0,category_count:0,tag_count:0,total_views:0}}catch(e){Qe.value={video_count:0,category_count:0,tag_count:0,total_views:0}}},Kl=async()=>{_l.value=!0;try{const e={page:rl.value,page_size:nl.value};vl.value&&(e.keyword=vl.value),pl.value&&(e.category_id=pl.value),ml.value&&(e.status=ml.value);const l=await de.get("/admin/darkweb/videos",{params:e}),a=l.data||l;sl.value=a.items||[],cl.value=a.total||0}catch(e){sl.value=[],cl.value=0}finally{_l.value=!1}},Tl=async()=>{kl.value=!0;try{const e=await de.get("/admin/darkweb/categories"),l=e.data||e;wl.value=Array.isArray(l)?l:[]}catch(e){wl.value=[]}finally{kl.value=!1}},Wl=async()=>{try{const e=await de.get("/admin/darkweb/tags"),l=e.data||e;Il.value=Array.isArray(l)?l:[]}catch(e){Il.value=[]}},Jl=async()=>{if(gl.title){bl.value=!0;try{yl.value?(await de.put(`/admin/darkweb/videos/${yl.value.id}`,gl),I.success("æ›´æ–°æˆåŠŸ")):(await de.post("/admin/darkweb/videos",gl),I.success("æ·»åŠ æˆåŠŸ")),fl.value=!1,Kl(),ql()}catch(e){I.error("ä¿å­˜å¤±è´¥")}finally{bl.value=!1}}else I.warning("è¯·è¾“å…¥è§†é¢‘æ ‡é¢˜")},Ql=(e=null,l=null)=>{xl.value=e,Cl.value=l,e?Object.assign(zl,{name:e.name,description:e.description||"",icon:e.icon||"",sort_order:e.sort_order||0,is_active:e.is_active}):Object.assign(zl,{name:"",description:"",icon:"",sort_order:0,is_active:!0}),Ul.value=!0},Zl=async()=>{if(zl.name){jl.value=!0;try{const e={...zl};Cl.value&&(e.parent_id=Cl.value),xl.value?(await de.put(`/admin/darkweb/categories/${xl.value.id}`,e),I.success("æ›´æ–°æˆåŠŸ")):(await de.post("/admin/darkweb/categories",e),I.success("æ·»åŠ æˆåŠŸ")),Ul.value=!1,Tl(),ql()}catch(e){I.error("ä¿å­˜å¤±è´¥")}finally{jl.value=!1}}else I.warning("è¯·è¾“å…¥åˆ†ç±»åç§°")},Xl=async()=>{var e,l;if(Pl.value.trim())try{await de.post("/admin/darkweb/tags",{name:Pl.value.trim()}),I.success("æ·»åŠ æˆåŠŸ"),Pl.value="",Wl(),ql()}catch(a){I.error((null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.detail)||"æ·»åŠ å¤±è´¥")}else I.warning("è¯·è¾“å…¥æ ‡ç­¾åç§°")},Yl=async()=>{Dl.value=!0;try{await de.put("/admin/darkweb/config",Fl),I.success("é…ç½®ä¿å­˜æˆåŠŸ"),Sl.value=!1}catch(e){I.error("ä¿å­˜å¤±è´¥")}finally{Dl.value=!1}};return t(()=>{ql(),Kl(),Tl(),Wl(),(async()=>{try{const e=await de.get("/admin/darkweb/config"),l=e.data||e;Fl.min_vip_level=l.min_vip_level||5}catch(e){Fl.min_vip_level=5}})()}),(e,l)=>{const a=k,t=w,te=z,ea=j,la=$,aa=F,ta=R,da=H,ia=q,ua=N,oa=K,sa=C,ra=T,na=x,ca=J,va=Q,pa=Z,ma=W,_a=Y,fa=h,ya=le,ba=V,ga=X;return r(),d("div",ie,[i("div",ue,[l[37]||(l[37]=i("h2",null,"æš—ç½‘è§†é¢‘ç®¡ç†",-1)),i("div",oe,[u(t,{type:"primary",onClick:l[0]||(l[0]=e=>Sl.value=!0)},{default:o(()=>[u(a,null,{default:o(()=>[u(c(U))]),_:1}),l[36]||(l[36]=n(" VIPç­‰çº§é…ç½® ",-1))]),_:1})])]),i("div",se,[i("div",re,[i("div",ne,s(Qe.value.video_count),1),l[38]||(l[38]=i("div",{class:"stat-label"},"è§†é¢‘æ€»æ•°",-1))]),i("div",ce,[i("div",ve,s(Qe.value.category_count),1),l[39]||(l[39]=i("div",{class:"stat-label"},"åˆ†ç±»æ•°é‡",-1))]),i("div",pe,[i("div",me,s(Qe.value.tag_count),1),l[40]||(l[40]=i("div",{class:"stat-label"},"æ ‡ç­¾æ•°é‡",-1))]),i("div",_e,[i("div",fe,s((wa=Qe.value.total_views,wa?wa>=1e4?(wa/1e4).toFixed(1)+"w":wa.toString():"0")),1),l[41]||(l[41]=i("div",{class:"stat-label"},"æ€»è§‚çœ‹é‡",-1))])]),u(fa,{modelValue:Je.value,"onUpdate:modelValue":l[14]||(l[14]=e=>Je.value=e),class:"manage-tabs"},{default:o(()=>[u(na,{label:"ä¸Šä¼ è§†é¢‘",name:"upload"},{default:o(()=>[u(sa,{ref_key:"uploadFormRef",ref:Ze,model:ol,"label-width":"100px",style:{"max-width":"800px"}},{default:o(()=>[u(ea,{label:"è§†é¢‘æ–‡ä»¶",required:""},{default:o(()=>[u(te,{ref_key:"videoUploadRef",ref:Xe,"auto-upload":!1,limit:1,"on-change":Gl,"on-exceed":Ml,accept:"video/*",drag:""},{default:o(()=>[ol.file?(r(),d("div",be,[u(a,{size:"32",color:"#ff4444"},{default:o(()=>[u(c(S))]),_:1}),i("div",ge,[i("div",we,s(ol.file.name),1),i("div",he,s($l(ol.file.size)),1)]),u(t,{text:"",type:"danger",onClick:p(Ol,["stop"])},{default:o(()=>[u(a,null,{default:o(()=>[u(c(D))]),_:1})]),_:1})])):(r(),d("div",ye,[u(a,{class:"upload-icon"},{default:o(()=>[u(c(P))]),_:1}),l[42]||(l[42]=i("div",{class:"upload-text"},[n("æ‹–æ‹½è§†é¢‘åˆ°æ­¤å¤„ï¼Œæˆ– "),i("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1)),l[43]||(l[43]=i("div",{class:"upload-tip"},"æ”¯æŒ MP4ã€WebMã€AVIã€MOVã€MKV æ ¼å¼ï¼Œæœ€å¤§ 5GB",-1))]))]),_:1},512)]),_:1}),u(ea,{label:"è§†é¢‘å°é¢"},{default:o(()=>[i("div",Ve,[i("div",ke,[u(aa,{modelValue:al.value,"onUpdate:modelValue":l[1]||(l[1]=e=>al.value=e),size:"small"},{default:o(()=>[u(la,{label:"auto"},{default:o(()=>[...l[44]||(l[44]=[n("ğŸ¤– ç³»ç»Ÿæ™ºèƒ½é€‰æ‹©",-1)])]),_:1}),u(la,{label:"select"},{default:o(()=>[...l[45]||(l[45]=[n("ğŸ¯ æ‰‹åŠ¨é€‰æ‹©å°é¢",-1)])]),_:1}),u(la,{label:"upload"},{default:o(()=>[...l[46]||(l[46]=[n("ğŸ“¤ ä¸Šä¼ è‡ªå®šä¹‰",-1)])]),_:1})]),_:1},8,["modelValue"])]),"select"===al.value?(r(),d("div",Ue,[ol.file?il.value?(r(),d("div",Ce,[u(a,{class:"is-loading"},{default:o(()=>[u(c(A))]),_:1}),l[48]||(l[48]=i("span",null,"æ­£åœ¨æå–è§†é¢‘å¸§...",-1))])):0===tl.value.length?(r(),d("div",je,[u(t,{type:"primary",onClick:El,loading:il.value},{default:o(()=>[u(a,null,{default:o(()=>[u(c(G))]),_:1}),l[49]||(l[49]=n(" æå–å€™é€‰å°é¢ ",-1))]),_:1},8,["loading"]),l[50]||(l[50]=i("span",{class:"hint-text"},"ä»è§†é¢‘ä¸­æˆªå–6ä¸ªæ—¶é—´ç‚¹çš„ç”»é¢ä¾›æ‚¨é€‰æ‹©",-1))])):(r(),d("div",ze,[(r(!0),d(m,null,_(tl.value,(e,l)=>{return r(),d("div",{key:l,class:f(["cover-item",{selected:dl.value===e.url}]),onClick:l=>{return a=e.url,void(dl.value=a);var a}},[i("img",{src:Ll(e.url),alt:`å°é¢å€™é€‰ ${l+1}`},null,8,Pe),i("div",Se,[i("span",De,s((t=e.time_point,`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`)),1)]),dl.value===e.url?(r(),d("div",Fe,[u(a,null,{default:o(()=>[u(c(M))]),_:1})])):v("",!0),0===l?(r(),d("div",$e,"AIæ¨è")):v("",!0)],10,Ie);var t}),128))])):(r(),d("div",xe,[u(a,null,{default:o(()=>[u(c(L))]),_:1}),l[47]||(l[47]=n(" è¯·å…ˆé€‰æ‹©è§†é¢‘æ–‡ä»¶ ",-1))]))])):v("",!0),"upload"===al.value?(r(),d("div",Le,[u(te,{"auto-upload":!0,"show-file-list":!1,"before-upload":Rl,"http-request":Hl,accept:"image/*"},{default:o(()=>[dl.value?(r(),d("div",Ge,[i("img",{src:Ll(dl.value),alt:"è‡ªå®šä¹‰å°é¢"},null,8,Me),i("div",Oe,[u(a,{size:"20"},{default:o(()=>[u(c(B))]),_:1}),l[53]||(l[53]=i("span",null,"æ›´æ¢å°é¢",-1))])])):(r(),d("div",Ae,[u(a,{size:"32"},{default:o(()=>[u(c(O))]),_:1}),l[51]||(l[51]=i("div",null,"ç‚¹å‡»ä¸Šä¼ å°é¢å›¾ç‰‡",-1)),l[52]||(l[52]=i("div",{class:"tip"},"æ”¯æŒ JPGã€PNGã€WebP æ ¼å¼",-1))]))]),_:1})])):v("",!0),"auto"===al.value?(r(),d("div",Be,[u(a,{size:"20",color:"#67c23a"},{default:o(()=>[u(c(E))]),_:1}),l[54]||(l[54]=i("span",null,"ç³»ç»Ÿå°†ä½¿ç”¨ AI æ™ºèƒ½åˆ†æï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³å°é¢å¸§",-1))])):v("",!0)])]),_:1}),u(ea,{label:"è§†é¢‘æ ‡é¢˜",required:""},{default:o(()=>[u(ta,{modelValue:ol.title,"onUpdate:modelValue":l[2]||(l[2]=e=>ol.title=e),placeholder:"è¯·è¾“å…¥è§†é¢‘æ ‡é¢˜",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),u(ea,{label:"è§†é¢‘æè¿°"},{default:o(()=>[u(ta,{modelValue:ol.description,"onUpdate:modelValue":l[3]||(l[3]=e=>ol.description=e),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥è§†é¢‘æè¿°",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),u(ea,{label:"è§†é¢‘åˆ†ç±»"},{default:o(()=>[u(da,{modelValue:ul.value,"onUpdate:modelValue":l[4]||(l[4]=e=>ul.value=e),options:Vl.value,props:{value:"id",label:"name",children:"children",emitPath:!1,checkStrictly:!0},placeholder:"è¯·é€‰æ‹©åˆ†ç±»",style:{width:"100%"},clearable:"",onChange:Bl},null,8,["modelValue","options"])]),_:1}),u(ea,{label:"è§†é¢‘æ ‡ç­¾"},{default:o(()=>[u(ua,{modelValue:ol.tags,"onUpdate:modelValue":l[5]||(l[5]=e=>ol.tags=e),multiple:"",filterable:"","allow-create":"",placeholder:"è¾“å…¥æˆ–é€‰æ‹©æ ‡ç­¾",style:{width:"100%"}},{default:o(()=>[(r(!0),d(m,null,_(Il.value,e=>(r(),d(m,{key:e.id},[e.name?(r(),y(ia,{key:0,label:e.name,value:e.name},null,8,["label","value"])):v("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1}),u(ea,{label:"ç²¾é€‰æ¨è"},{default:o(()=>[u(oa,{modelValue:ol.is_featured,"onUpdate:modelValue":l[6]||(l[6]=e=>ol.is_featured=e)},null,8,["modelValue"])]),_:1}),u(ea,null,{default:o(()=>[u(t,{type:"primary",onClick:Nl,loading:Ye.value,size:"large"},{default:o(()=>[u(a,null,{default:o(()=>[u(c(O))]),_:1}),n(" "+s(Ye.value?"ä¸Šä¼ ä¸­...":"å¼€å§‹ä¸Šä¼ "),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),Ye.value?(r(),d("div",Ee,[u(ra,{percentage:el.value,"stroke-width":20,"text-inside":!0},null,8,["percentage"]),i("p",Re,s(ll.value),1)])):v("",!0)]),_:1}),u(na,{label:"è§†é¢‘ç®¡ç†",name:"videos"},{default:o(()=>[i("div",He,[u(ta,{modelValue:vl.value,"onUpdate:modelValue":l[7]||(l[7]=e=>vl.value=e),placeholder:"æœç´¢è§†é¢‘æ ‡é¢˜",style:{width:"200px"},clearable:"",onKeyup:g(Kl,["enter"])},null,8,["modelValue"]),u(ua,{modelValue:pl.value,"onUpdate:modelValue":l[8]||(l[8]=e=>pl.value=e),placeholder:"é€‰æ‹©åˆ†ç±»",clearable:"",style:{width:"150px"},onChange:Kl},{default:o(()=>[u(ia,{label:"å…¨éƒ¨åˆ†ç±»",value:""}),(r(!0),d(m,null,_(hl.value,e=>(r(),d(m,{key:"cat-"+e.id},[u(ia,{label:e.name,value:e.id},null,8,["label","value"]),(r(!0),d(m,null,_(e.children||[],e=>(r(),y(ia,{key:"child-"+e.id,label:"  â”” "+e.name,value:e.id},null,8,["label","value"]))),128))],64))),128))]),_:1},8,["modelValue"]),u(ua,{modelValue:ml.value,"onUpdate:modelValue":l[9]||(l[9]=e=>ml.value=e),placeholder:"çŠ¶æ€",clearable:"",style:{width:"120px"},onChange:Kl},{default:o(()=>[u(ia,{label:"å…¨éƒ¨çŠ¶æ€",value:""}),u(ia,{label:"å·²å‘å¸ƒ",value:"PUBLISHED"}),u(ia,{label:"å¤„ç†ä¸­",value:"PROCESSING"}),u(ia,{label:"ä¸Šä¼ ä¸­",value:"UPLOADING"})]),_:1},8,["modelValue"])]),b((r(),y(ma,{data:sl.value,stripe:""},{default:o(()=>[u(ca,{prop:"id",label:"ID",width:"70"}),u(ca,{label:"å°é¢",width:"120"},{default:o(({row:e})=>[u(va,{src:e.cover_url,style:{width:"80px",height:"45px","border-radius":"4px"},fit:"cover"},null,8,["src"])]),_:1}),u(ca,{prop:"title",label:"æ ‡é¢˜","min-width":"200","show-overflow-tooltip":""}),u(ca,{prop:"category_name",label:"åˆ†ç±»",width:"100"}),u(ca,{label:"çŠ¶æ€",width:"90"},{default:o(({row:e})=>{return[u(pa,{type:(l=e.status,{PUBLISHED:"success",PROCESSING:"warning",UPLOADING:"info",FAILED:"danger"}[l]||"info"),size:"small"},{default:o(()=>[n(s(Al(e.status)),1)]),_:2},1032,["type"])];var l}),_:1}),u(ca,{prop:"view_count",label:"æ’­æ”¾",width:"80"}),u(ca,{prop:"like_count",label:"ç‚¹èµ",width:"80"}),u(ca,{label:"ç²¾é€‰",width:"70"},{default:o(({row:e})=>[u(oa,{modelValue:e.is_featured,"onUpdate:modelValue":l=>e.is_featured=l,onChange:l=>(async e=>{try{await de.put(`/admin/darkweb/videos/${e.id}`,{is_featured:e.is_featured}),I.success("æ›´æ–°æˆåŠŸ")}catch(l){e.is_featured=!e.is_featured,I.error("æ›´æ–°å¤±è´¥")}})(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),u(ca,{label:"æ“ä½œ",width:"150",fixed:"right"},{default:o(({row:e})=>[u(t,{type:"primary",link:"",size:"small",onClick:l=>((e=null)=>{yl.value=e,e?Object.assign(gl,{title:e.title,description:e.description||"",cover_url:e.cover_url||"",hls_url:e.hls_url||"",preview_url:e.preview_url||"",duration:e.duration||0,category_id:e.category_id||"",tags:e.tags||[],is_featured:e.is_featured}):Object.assign(gl,{title:"",description:"",cover_url:"",hls_url:"",preview_url:"",duration:0,category_id:"",tags:[],is_featured:!1}),fl.value=!0})(e)},{default:o(()=>[...l[55]||(l[55]=[n("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),u(t,{type:"danger",link:"",size:"small",onClick:l=>(async e=>{try{await ae.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè§†é¢‘å—ï¼Ÿ","æç¤º",{type:"warning"}),await de.delete(`/admin/darkweb/videos/${e.id}`),I.success("åˆ é™¤æˆåŠŸ"),Kl(),ql()}catch(l){"cancel"!==l&&I.error("åˆ é™¤å¤±è´¥")}})(e)},{default:o(()=>[...l[56]||(l[56]=[n("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ga,_l.value]]),u(_a,{"current-page":rl.value,"onUpdate:currentPage":l[10]||(l[10]=e=>rl.value=e),"page-size":nl.value,"onUpdate:pageSize":l[11]||(l[11]=e=>nl.value=e),total:cl.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:Kl,onCurrentChange:Kl,style:{"margin-top":"16px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),u(na,{label:"åˆ†ç±»ç®¡ç†",name:"categories"},{default:o(()=>[i("div",Ne,[u(t,{type:"primary",onClick:l[12]||(l[12]=e=>Ql())},{default:o(()=>[u(a,null,{default:o(()=>[u(c(ee))]),_:1}),l[57]||(l[57]=n(" æ·»åŠ ä¸€çº§åˆ†ç±» ",-1))]),_:1})]),b((r(),y(ma,{data:wl.value,"row-key":"id","default-expand-all":""},{default:o(()=>[u(ca,{prop:"id",label:"ID",width:"70"}),u(ca,{prop:"name",label:"åˆ†ç±»åç§°","min-width":"150"}),u(ca,{prop:"description",label:"æè¿°","min-width":"200","show-overflow-tooltip":""}),u(ca,{prop:"sort_order",label:"æ’åº",width:"80"}),u(ca,{prop:"video_count",label:"è§†é¢‘æ•°",width:"90"}),u(ca,{label:"çŠ¶æ€",width:"80"},{default:o(({row:e})=>[u(pa,{type:e.is_active?"success":"info",size:"small"},{default:o(()=>[n(s(e.is_active?"å¯ç”¨":"ç¦ç”¨"),1)]),_:2},1032,["type"])]),_:1}),u(ca,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:o(({row:e})=>[1===e.level?(r(),y(t,{key:0,type:"success",link:"",size:"small",onClick:l=>Ql(null,e.id)},{default:o(()=>[...l[58]||(l[58]=[n("æ·»åŠ å­åˆ†ç±»",-1)])]),_:1},8,["onClick"])):v("",!0),u(t,{type:"primary",link:"",size:"small",onClick:l=>Ql(e)},{default:o(()=>[...l[59]||(l[59]=[n("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),u(t,{type:"danger",link:"",size:"small",onClick:l=>(async e=>{var l,a;try{await ae.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†ç±»å—ï¼Ÿ","æç¤º",{type:"warning"}),await de.delete(`/admin/darkweb/categories/${e.id}`),I.success("åˆ é™¤æˆåŠŸ"),Tl(),ql()}catch(t){"cancel"!==t&&I.error((null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.detail)||"åˆ é™¤å¤±è´¥")}})(e)},{default:o(()=>[...l[60]||(l[60]=[n("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ga,kl.value]])]),_:1}),u(na,{label:"æ ‡ç­¾ç®¡ç†",name:"tags"},{default:o(()=>[i("div",qe,[u(ta,{modelValue:Pl.value,"onUpdate:modelValue":l[13]||(l[13]=e=>Pl.value=e),placeholder:"è¾“å…¥æ ‡ç­¾åç§°",style:{width:"200px"},onKeyup:g(Xl,["enter"])},null,8,["modelValue"]),u(t,{type:"primary",onClick:Xl},{default:o(()=>[...l[61]||(l[61]=[n("æ·»åŠ æ ‡ç­¾",-1)])]),_:1})]),i("div",Ke,[(r(!0),d(m,null,_(Il.value,e=>(r(),d("div",{key:e.id,class:"tag-item"},[i("span",Te,s(e.name),1),i("span",We,s(e.use_count)+"æ¬¡",1),u(t,{type:"danger",link:"",size:"small",onClick:l=>(async e=>{try{await ae.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ ‡ç­¾å—ï¼Ÿ","æç¤º",{type:"warning"}),await de.delete(`/admin/darkweb/tags/${e.id}`),I.success("åˆ é™¤æˆåŠŸ"),Wl(),ql()}catch(l){"cancel"!==l&&I.error("åˆ é™¤å¤±è´¥")}})(e)},{default:o(()=>[u(a,null,{default:o(()=>[u(c(D))]),_:1})]),_:1},8,["onClick"])]))),128))])]),_:1})]),_:1},8,["modelValue"]),u(ba,{modelValue:fl.value,"onUpdate:modelValue":l[25]||(l[25]=e=>fl.value=e),title:yl.value?"ç¼–è¾‘è§†é¢‘":"æ·»åŠ è§†é¢‘",width:"600px"},{footer:o(()=>[u(t,{onClick:l[24]||(l[24]=e=>fl.value=!1)},{default:o(()=>[...l[62]||(l[62]=[n("å–æ¶ˆ",-1)])]),_:1}),u(t,{type:"primary",onClick:Jl,loading:bl.value},{default:o(()=>[...l[63]||(l[63]=[n("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:o(()=>[u(sa,{model:gl,"label-width":"80px"},{default:o(()=>[u(ea,{label:"æ ‡é¢˜",required:""},{default:o(()=>[u(ta,{modelValue:gl.title,"onUpdate:modelValue":l[15]||(l[15]=e=>gl.title=e),placeholder:"è§†é¢‘æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),u(ea,{label:"æè¿°"},{default:o(()=>[u(ta,{modelValue:gl.description,"onUpdate:modelValue":l[16]||(l[16]=e=>gl.description=e),type:"textarea",rows:3,placeholder:"è§†é¢‘æè¿°"},null,8,["modelValue"])]),_:1}),u(ea,{label:"å°é¢"},{default:o(()=>[u(ta,{modelValue:gl.cover_url,"onUpdate:modelValue":l[17]||(l[17]=e=>gl.cover_url=e),placeholder:"å°é¢å›¾ç‰‡URL"},null,8,["modelValue"])]),_:1}),u(ea,{label:"HLSåœ°å€"},{default:o(()=>[u(ta,{modelValue:gl.hls_url,"onUpdate:modelValue":l[18]||(l[18]=e=>gl.hls_url=e),placeholder:"HLSè§†é¢‘æµåœ°å€"},null,8,["modelValue"])]),_:1}),u(ea,{label:"é¢„è§ˆåœ°å€"},{default:o(()=>[u(ta,{modelValue:gl.preview_url,"onUpdate:modelValue":l[19]||(l[19]=e=>gl.preview_url=e),placeholder:"é¢„è§ˆè§†é¢‘URL"},null,8,["modelValue"])]),_:1}),u(ea,{label:"æ—¶é•¿(ç§’)"},{default:o(()=>[u(ya,{modelValue:gl.duration,"onUpdate:modelValue":l[20]||(l[20]=e=>gl.duration=e),min:0},null,8,["modelValue"])]),_:1}),u(ea,{label:"åˆ†ç±»"},{default:o(()=>[u(ua,{modelValue:gl.category_id,"onUpdate:modelValue":l[21]||(l[21]=e=>gl.category_id=e),placeholder:"é€‰æ‹©åˆ†ç±»",clearable:"",style:{width:"100%"}},{default:o(()=>[(r(!0),d(m,null,_(hl.value,e=>(r(),d(m,{key:"vcat-"+e.id},[u(ia,{label:e.name,value:e.id},null,8,["label","value"]),(r(!0),d(m,null,_(e.children||[],e=>(r(),y(ia,{key:"vchild-"+e.id,label:"  â”” "+e.name,value:e.id},null,8,["label","value"]))),128))],64))),128))]),_:1},8,["modelValue"])]),_:1}),u(ea,{label:"æ ‡ç­¾"},{default:o(()=>[u(ua,{modelValue:gl.tags,"onUpdate:modelValue":l[22]||(l[22]=e=>gl.tags=e),multiple:"",filterable:"","allow-create":"",placeholder:"é€‰æ‹©æˆ–è¾“å…¥æ ‡ç­¾",style:{width:"100%"}},{default:o(()=>[(r(!0),d(m,null,_(Il.value,e=>(r(),d(m,{key:e.id},[e.name?(r(),y(ia,{key:0,label:e.name,value:e.name},null,8,["label","value"])):v("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1}),u(ea,{label:"ç²¾é€‰"},{default:o(()=>[u(oa,{modelValue:gl.is_featured,"onUpdate:modelValue":l[23]||(l[23]=e=>gl.is_featured=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),u(ba,{modelValue:Ul.value,"onUpdate:modelValue":l[32]||(l[32]=e=>Ul.value=e),title:xl.value?"ç¼–è¾‘åˆ†ç±»":Cl.value?"æ·»åŠ äºŒçº§åˆ†ç±»":"æ·»åŠ ä¸€çº§åˆ†ç±»",width:"500px"},{footer:o(()=>[u(t,{onClick:l[31]||(l[31]=e=>Ul.value=!1)},{default:o(()=>[...l[64]||(l[64]=[n("å–æ¶ˆ",-1)])]),_:1}),u(t,{type:"primary",onClick:Zl,loading:jl.value},{default:o(()=>[...l[65]||(l[65]=[n("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:o(()=>[u(sa,{model:zl,"label-width":"80px"},{default:o(()=>[u(ea,{label:"åç§°",required:""},{default:o(()=>[u(ta,{modelValue:zl.name,"onUpdate:modelValue":l[26]||(l[26]=e=>zl.name=e),placeholder:"åˆ†ç±»åç§°"},null,8,["modelValue"])]),_:1}),u(ea,{label:"æè¿°"},{default:o(()=>[u(ta,{modelValue:zl.description,"onUpdate:modelValue":l[27]||(l[27]=e=>zl.description=e),type:"textarea",rows:2,placeholder:"åˆ†ç±»æè¿°"},null,8,["modelValue"])]),_:1}),u(ea,{label:"å›¾æ ‡"},{default:o(()=>[u(ta,{modelValue:zl.icon,"onUpdate:modelValue":l[28]||(l[28]=e=>zl.icon=e),placeholder:"å›¾æ ‡URL"},null,8,["modelValue"])]),_:1}),u(ea,{label:"æ’åº"},{default:o(()=>[u(ya,{modelValue:zl.sort_order,"onUpdate:modelValue":l[29]||(l[29]=e=>zl.sort_order=e),min:0},null,8,["modelValue"])]),_:1}),xl.value?(r(),y(ea,{key:0,label:"çŠ¶æ€"},{default:o(()=>[u(oa,{modelValue:zl.is_active,"onUpdate:modelValue":l[30]||(l[30]=e=>zl.is_active=e)},null,8,["modelValue"])]),_:1})):v("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),u(ba,{modelValue:Sl.value,"onUpdate:modelValue":l[35]||(l[35]=e=>Sl.value=e),title:"VIPç­‰çº§é…ç½®",width:"400px"},{footer:o(()=>[u(t,{onClick:l[34]||(l[34]=e=>Sl.value=!1)},{default:o(()=>[...l[67]||(l[67]=[n("å–æ¶ˆ",-1)])]),_:1}),u(t,{type:"primary",onClick:Yl,loading:Dl.value},{default:o(()=>[...l[68]||(l[68]=[n("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:o(()=>[u(sa,{"label-width":"120px"},{default:o(()=>[u(ea,{label:"æœ€ä½VIPç­‰çº§"},{default:o(()=>[u(ua,{modelValue:Fl.min_vip_level,"onUpdate:modelValue":l[33]||(l[33]=e=>Fl.min_vip_level=e),style:{width:"100%"}},{default:o(()=>[u(ia,{label:"æ™®é€šVIP (1)",value:1}),u(ia,{label:"VIP1 (2)",value:2}),u(ia,{label:"VIP2 (3)",value:3}),u(ia,{label:"VIP3 (4)",value:4}),u(ia,{label:"é»„é‡‘è‡³å°Š (5)",value:5}),u(ia,{label:"ç´«è‰²é™å®šè‡³å°Š (6)",value:6})]),_:1},8,["modelValue"])]),_:1}),u(ea,null,{default:o(()=>[...l[66]||(l[66]=[i("span",{class:"config-tip"},"åªæœ‰è¾¾åˆ°æ­¤VIPç­‰çº§çš„ç”¨æˆ·æ‰èƒ½è®¿é—®æš—ç½‘ä¸“åŒº",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]);var wa}}},[["__scopeId","data-v-79471c2b"]]);export{Je as default};
