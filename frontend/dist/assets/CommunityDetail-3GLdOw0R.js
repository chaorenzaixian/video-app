import{r as e,y as a,z as l,C as s,u as t,I as n,L as i,K as o,M as c,aa as r,H as u,U as m,E as v,c as d,w as p,G as g,af as y,n as k,az as _,j as b,W as f,O as h,a0 as w,aC as C}from"./vue-vendor-Ba_vealp.js";import{_ as $}from"./ic_back-BPdSG6fy.js";import{_ as I}from"./ic_launcher-GoPvjxRC.js";import{_ as j,a as x,u as S}from"./index-C3P4JTuA.js";import{g as P}from"./avatar-DXHBWedi.js";import{_ as M}from"./super_vip_blue-CukdgMfT.js";import{_ as T}from"./god_comment-Dp4lzx7s.js";import{r as R,p as D,s as L,c as U,l as q,a as z}from"./comment-DVVGXtEs.js";import{s as O,c as F,a as N}from"./share_grey-BZsozF2Q.js";import{E as V}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const B={class:"comment-item"},A=["src"],G={class:"comment-body"},H={class:"comment-user"},E=["src"],K={key:1,src:T,class:"god-badge",title:"ç¥è¯„"},W={key:0,class:"reply-to"},Y={class:"reply-to-name"},J={class:"comment-text"},Q={key:1,class:"comment-images"},X=["src","onClick"],Z={key:2,class:"comment-images"},ee=["src"],ae={class:"comment-footer"},le={class:"comment-time"},se={class:"comment-actions"},te=["src"],ne={key:4,class:"replies-list"},ie=["src","onClick"],oe={class:"reply-body"},ce={class:"reply-user"},re={class:"username"},ue={key:0,class:"reply-to-text"},me={class:"reply-to-name"},ve={class:"reply-text"},de={key:0,class:"reply-images"},pe=["src","onClick"],ge={class:"reply-footer"},ye={class:"reply-time"},ke=["onClick"],_e=["onClick"],be={key:0,class:"loading-replies"},fe=j({__name:"CommentItem",props:{comment:{type:Object,required:!0},postId:{type:[Number,String],required:!0}},emits:["like","reply","goProfile","previewImage"],setup(v){const d={1:"/images/backgrounds/vip_gold.webp",2:"/images/backgrounds/vip_1.webp",3:"/images/backgrounds/vip_2.webp",4:"/images/backgrounds/vip_3.webp",5:"/images/backgrounds/super_vip_red.webp",6:"/images/backgrounds/super_vip_blue.webp"},p=v,g=e(!1),y=e([]),k=e(!1),_=e(!0),b=e(1),f=async()=>{if(!k.value){k.value=!0,g.value=!0,b.value=1;try{const e=await x.get(`/community/posts/${p.postId}/comments`,{params:{parent_id:Number(p.comment.id),page:1,page_size:10}});y.value=e.data||[],_.value=y.value.length>=10}catch(e){}finally{k.value=!1}}},h=async()=>{if(!k.value&&_.value){k.value=!0,b.value++;try{const e=(await x.get(`/community/posts/${p.postId}/comments`,{params:{parent_id:Number(p.comment.id),page:b.value,page_size:10}})).data||[];y.value=[...y.value,...e],_.value=e.length>=10}catch(e){}finally{k.value=!1}}},w=e=>{if(!e)return"";const a=new Date,l=new Date(e),s=a-l;return s<6e4?"åˆšåˆš":s<36e5?`${Math.floor(s/6e4)}åˆ†é’Ÿå‰`:s<864e5?`${Math.floor(s/36e5)}å°æ—¶å‰`:s<6048e5?`${Math.floor(s/864e5)}å¤©å‰`:`${l.getMonth()+1}-${l.getDate()}`};return(e,p)=>{var b,C,$,I,j,x;return l(),a("div",B,[s("img",{src:t(P)(null==(b=v.comment.user)?void 0:b.avatar,null==(C=v.comment.user)?void 0:C.id),class:"comment-avatar clickable",onClick:p[0]||(p[0]=a=>{var l;return e.$emit("goProfile",null==(l=v.comment.user)?void 0:l.id)})},null,8,A),s("div",G,[s("div",H,[s("span",{class:"username clickable",onClick:p[1]||(p[1]=a=>{var l;return e.$emit("goProfile",null==(l=v.comment.user)?void 0:l.id)})},i((null==($=v.comment.user)?void 0:$.nickname)||(null==(I=v.comment.user)?void 0:I.username)||"ç”¨æˆ·"),1),(null==(j=v.comment.user)?void 0:j.vip_level)>0?(l(),a("img",{key:0,src:(x=v.comment.user.vip_level,d[x]||d[1]),class:"vip-badge-sm"},null,8,E)):n("",!0),v.comment.is_god?(l(),a("img",K)):n("",!0)]),v.comment.reply_to_user?(l(),a("div",W,[p[5]||(p[5]=o(" å›å¤ ",-1)),s("span",Y,"@"+i(v.comment.reply_to_user.nickname||v.comment.reply_to_user.username),1)])):n("",!0),s("div",J,i(v.comment.content),1),v.comment.images&&v.comment.images.length?(l(),a("div",Q,[(l(!0),a(c,null,r(v.comment.images,(s,t)=>(l(),a("img",{key:t,src:s,class:"comment-img",onClick:a=>e.$emit("previewImage",s)},null,8,X))),128))])):v.comment.image_url?(l(),a("div",Z,[s("img",{src:v.comment.image_url,class:"comment-img",onClick:p[2]||(p[2]=a=>e.$emit("previewImage",v.comment.image_url))},null,8,ee)])):n("",!0),s("div",ae,[s("span",le,i(w(v.comment.created_at)),1),s("div",se,[s("span",{class:u(["comment-like",{liked:v.comment.is_liked}]),onClick:p[3]||(p[3]=a=>e.$emit("like",v.comment))},i(v.comment.is_liked?"â¤ï¸":"ğŸ¤")+" "+i(v.comment.like_count||0),3),s("span",{class:"comment-reply",onClick:p[4]||(p[4]=m(a=>e.$emit("reply",v.comment),["stop"]))},[s("img",{src:t(R),class:"reply-icon"},null,8,te)])])]),v.comment.reply_count>0&&!g.value?(l(),a("div",{key:3,class:"view-replies",onClick:f},[o(" æŸ¥çœ‹"+i(v.comment.reply_count)+"æ¡å›å¤ ",1),p[6]||(p[6]=s("span",{class:"arrow"},"â–¼",-1))])):n("",!0),g.value&&y.value.length?(l(),a("div",ne,[(l(!0),a(c,null,r(y.value,v=>{var d,g,y,k;return l(),a("div",{key:v.id,class:"reply-item"},[s("img",{src:t(P)(null==(d=v.user)?void 0:d.avatar,null==(g=v.user)?void 0:g.id),class:"reply-avatar",onClick:a=>{var l;return e.$emit("goProfile",null==(l=v.user)?void 0:l.id)}},null,8,ie),s("div",oe,[s("div",ce,[s("span",re,i((null==(y=v.user)?void 0:y.nickname)||(null==(k=v.user)?void 0:k.username)),1),v.reply_to_user?(l(),a("span",ue,[p[7]||(p[7]=o(" å›å¤ ",-1)),s("span",me,"@"+i(v.reply_to_user.nickname||v.reply_to_user.username),1)])):n("",!0)]),s("div",ve,i(v.content),1),v.images&&v.images.length?(l(),a("div",de,[(l(!0),a(c,null,r(v.images,(s,t)=>(l(),a("img",{key:t,src:s,class:"reply-img",onClick:a=>e.$emit("previewImage",s)},null,8,pe))),128))])):n("",!0),s("div",ge,[s("span",ye,i(w(v.created_at)),1),s("span",{class:u(["reply-like",{liked:v.is_liked}]),onClick:a=>e.$emit("like",v)},i(v.is_liked?"â¤ï¸":"ğŸ¤")+" "+i(v.like_count||0),11,ke),s("span",{class:"reply-btn",onClick:m(a=>e.$emit("reply",v),["stop"])},"å›å¤",8,_e)])])])}),128)),k.value?(l(),a("div",be,"åŠ è½½ä¸­...")):n("",!0),_.value?(l(),a("div",{key:1,class:"load-more-replies",onClick:h},"åŠ è½½æ›´å¤šå›å¤")):n("",!0)])):n("",!0)])])}}},[["__scopeId","data-v-058097a5"]]),he={class:"comments-section"},we={class:"comments-header"},Ce={class:"comments-count"},$e={class:"sort-tabs"},Ie={class:"comments-list"},je={key:0,class:"comment-item official-announcement"},xe=["src"],Se={class:"comment-body"},Pe={class:"comment-user"},Me={class:"official-name"},Te={class:"comment-text official-text"},Re={class:"comment-footer"},De={class:"comment-time"},Le={key:0,class:"loading"},Ue={key:1,class:"no-more"},qe={key:2,class:"empty-comments"},ze=j({__name:"CommentsList",props:{comments:{type:Array,default:()=>[]},commentCount:{type:Number,default:0},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},announcement:{type:Object,default:null},postId:{type:[Number,String],required:!0}},emits:["like-comment","reply-comment","go-profile","sort-change","preview-image"],setup(t,{emit:o}){const m=o,d=e("hot"),p=e=>{d.value=e,m("sort-change",e)},g=e=>{if(!e)return"";const a=new Date(e);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`};return(e,o)=>(l(),a("div",he,[s("div",we,[s("span",Ce,i(t.commentCount)+"æ¡è¯„è®º",1),s("div",$e,[s("span",{class:u(["sort-tab",{active:"hot"===d.value}]),onClick:o[0]||(o[0]=e=>p("hot"))},"æ¨è",2),o[6]||(o[6]=s("span",{class:"sort-divider"},"|",-1)),s("span",{class:u(["sort-tab",{active:"new"===d.value}]),onClick:o[1]||(o[1]=e=>p("new"))},"æœ€æ–°",2)])]),s("div",Ie,[t.announcement&&t.announcement.enabled?(l(),a("div",je,[s("img",{src:t.announcement.avatar||"/images/avatars/icon_avatar_1.webp",class:"comment-avatar"},null,8,xe),s("div",Se,[s("div",Pe,[s("span",Me,i(t.announcement.name),1),o[7]||(o[7]=s("img",{src:M,class:"supreme-vip-icon"},null,-1))]),s("div",Te,i(t.announcement.content),1),s("div",Re,[s("span",De,i(g(t.announcement.updated_at)),1)])])])):n("",!0),(l(!0),a(c,null,r(t.comments,a=>(l(),v(fe,{key:a.id,comment:a,"post-id":t.postId,onLike:o[2]||(o[2]=a=>e.$emit("like-comment",a)),onReply:o[3]||(o[3]=a=>e.$emit("reply-comment",a)),onGoProfile:o[4]||(o[4]=a=>e.$emit("go-profile",a)),onPreviewImage:o[5]||(o[5]=a=>e.$emit("preview-image",a))},null,8,["comment","post-id"]))),128))]),t.loading?(l(),a("div",Le,"åŠ è½½ä¸­...")):n("",!0),t.loading||t.hasMore||!t.comments.length?n("",!0):(l(),a("div",Ue,"â€” æ²¡æœ‰æ›´å¤šè¯„è®ºäº† â€”")),t.loading||0!==t.comments.length||t.announcement&&t.announcement.enabled?n("",!0):(l(),a("div",qe,"æš‚æ— è¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘~"))]))}},[["__scopeId","data-v-777f6052"]]),Oe={class:"comments-panel"},Fe={class:"comments-header"},Ne={class:"comment-title"},Ve={class:"input-area"},Be=["placeholder"],Ae={class:"char-count"},Ge={key:0,class:"image-preview-area"},He={class:"preview-item"},Ee=["src"],Ke={key:1,class:"emoji-panel"},We=["onClick"],Ye={class:"comment-toolbar"},Je={class:"toolbar-left"},Qe=["src"],Xe=["disabled"],Ze=["src"],ea=j({__name:"CommentInput",props:{visible:{type:Boolean,default:!1},replyTarget:{type:Object,default:null}},emits:["close","submit"],setup(o,{emit:v}){const _=o,b=v,f=e(""),h=e(null),w=e(""),C=e(!1),$=e(null),I=e(null),j=["ğŸ˜€","ğŸ˜‚","ğŸ¤£","ğŸ˜","ğŸ¥°","ğŸ˜˜","ğŸ˜‹","ğŸ¤¤","ğŸ˜","ğŸ¤©","ğŸ˜","ğŸ˜’","ğŸ˜”","ğŸ˜¢","ğŸ˜­","ğŸ˜¤","ğŸ˜¡","ğŸ¤¬","ğŸ˜±","ğŸ˜¨","ğŸ¥º","ğŸ˜‡","ğŸ¤—","ğŸ¤”","ğŸ¤«","ğŸ¤­","ğŸ‘","ğŸ‘","ğŸ‘","ğŸ™","ğŸ’ª","â¤ï¸","ğŸ’”","ğŸ’¯","ğŸ”¥","âœ¨","ğŸ‰","ğŸŠ","ğŸ˜´","ğŸ¤®","ğŸ¥µ","ğŸ¥¶","ğŸ˜ˆ","ğŸ‘»","ğŸ’€","ğŸ¤¡","ğŸ‘€","ğŸ’©","ğŸ¶","ğŸ±"],x=d(()=>f.value.trim()||h.value);p(()=>_.visible,e=>{e&&(f.value="",h.value=null,w.value="",C.value=!1,k(()=>{var e;return null==(e=$.value)?void 0:e.focus()}))});const S=()=>{C.value=!C.value},P=()=>{var e;null==(e=I.value)||e.click()},M=e=>{var a;const l=null==(a=e.target.files)?void 0:a[0];if(l){if(l.size>5242880)return void alert("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB");h.value=l,w.value=URL.createObjectURL(l)}e.target.value=""},T=()=>{w.value&&URL.revokeObjectURL(w.value),h.value=null,w.value=""},R=()=>{x.value&&(b("submit",{content:f.value,image:h.value,replyTarget:_.replyTarget}),f.value="",T(),C.value=!1)};return(e,v)=>{var d,p,k;return l(),a(c,null,[o.visible?(l(),a("div",{key:0,class:"comments-modal",onClick:v[2]||(v[2]=m(a=>e.$emit("close"),["self"]))},[s("div",Oe,[v[4]||(v[4]=s("div",{class:"drag-handle"},null,-1)),s("div",Fe,[s("span",Ne,i(o.replyTarget?`å›å¤ @${(null==(d=o.replyTarget.user)?void 0:d.nickname)||(null==(p=o.replyTarget.user)?void 0:p.username)}`:"å‘è¡¨è¯„è®º"),1),s("span",{class:"close-btn",onClick:v[0]||(v[0]=a=>e.$emit("close"))},"Ã—")]),s("div",Ve,[g(s("textarea",{"onUpdate:modelValue":v[1]||(v[1]=e=>f.value=e),class:"comment-textarea",placeholder:o.replyTarget?`å›å¤ @${null==(k=o.replyTarget.user)?void 0:k.nickname}...`:"åœ¨è¿™é‡Œå†™ä¸‹ä½ æƒ³è¯´çš„...",maxlength:"500",ref_key:"textareaRef",ref:$,rows:"4"},null,8,Be),[[y,f.value]]),s("div",Ae,i(f.value.length)+"/500",1)]),h.value?(l(),a("div",Ge,[s("div",He,[s("img",{src:w.value,alt:"é¢„è§ˆ"},null,8,Ee),s("button",{class:"remove-image",onClick:T},"Ã—")])])):n("",!0),C.value?(l(),a("div",Ke,[(l(),a(c,null,r(j,e=>s("span",{key:e,class:"emoji-item",onClick:a=>(e=>{var a;f.value+=e,null==(a=$.value)||a.focus()})(e)},i(e),9,We)),64))])):n("",!0),s("div",Ye,[s("div",Je,[s("button",{class:"toolbar-btn",onClick:P},[s("img",{src:t(D),class:"toolbar-icon"},null,8,Qe)]),s("button",{class:u(["toolbar-btn",{active:C.value}]),onClick:S},[...v[3]||(v[3]=[s("span",{class:"emoji-icon"},"ğŸ˜Š",-1)])],2)]),s("button",{class:"toolbar-send",disabled:!x.value,onClick:R},[s("img",{src:t(L),class:"send-icon"},null,8,Ze)],8,Xe)])])])):n("",!0),s("input",{type:"file",ref_key:"imageInput",ref:I,accept:"image/*",style:{display:"none"},onChange:M},null,544)],64)}}},[["__scopeId","data-v-a0b81665"]]),aa={class:"detail-page"},la={key:0,class:"post-content-wrapper"},sa={class:"user-row"},ta=["src"],na={class:"user-meta"},ia={class:"date"},oa={key:0,class:"post-title"},ca={class:"view-count"},ra={key:1,class:"topic-tags"},ua={class:"post-body"},ma={class:"content-text"},va={key:2,class:"images-list"},da=["src","onClick"],pa={key:3,class:"video-wrapper"},ga=["src"],ya={key:1,class:"video-locked"},ka={class:"video-cover"},_a=["src"],ba={class:"bottom-bar"},fa=["src"],ha={class:"action-btns"},wa=["src"],Ca=["src"],$a={class:"action-text"},Ia=["src"],ja={class:"action-text"},xa=["src"],Sa={class:"share-modal-content"},Pa={class:"share-promo-image"},Ma=["src"],Ta={class:"share-qr-section"},Ra={class:"share-qrcode"},Da=["src"],La={class:"share-invite-info"},Ua={class:"invite-code"},qa={class:"official-url"},za=j({__name:"CommunityDetail",setup(p){const g=_(),y=C(),k=S(),j=new AbortController,M=d(()=>g.params.id),T=d(()=>{var e;return null==(e=k.user)?void 0:e.id}),R=e(null),D=e(null),L=d(()=>{var e,a;return(null==(e=k.user)?void 0:e.is_vip)||(null==(a=k.user)?void 0:a.vip_level)>0}),B=d(()=>{var e;return(null==(e=R.value)?void 0:e.has_purchased)||!1}),A=d(()=>{var e;return!!(null==(e=R.value)?void 0:e.video_url)&&(!!L.value||!!B.value)}),G=e([]),H=e(null),E=e(!1),K=e(!0),W=e(1),Y=e(!1),J=e(!1),Q=e("3AUUHR"),X=d(()=>window.location.origin.replace(/^https?:\/\//,"")),Z=d(()=>`${window.location.origin}/user/community/${M.value}?ref=${Q.value}`),ee=d(()=>`https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(Z.value)}`),ae=e(!1),le=e(""),se=e=>{le.value=e,ae.value=!0},te=async(e=!1)=>{if(!E.value&&(e&&(W.value=1,K.value=!0,G.value=[]),K.value)){E.value=!0;try{const a=(await x.get(`/community/posts/${M.value}/comments`,{params:{page:W.value,page_size:20},signal:j.signal})).data||[];a.length<20&&(K.value=!1),G.value=e?a:[...G.value,...a],W.value++}catch(a){a.name}finally{E.value=!1}}},ne=async()=>{try{const e=await x.post(`/community/posts/${M.value}/like`);R.value.is_liked=e.data.liked,R.value.like_count=e.data.like_count}catch(e){V.error("æ“ä½œå¤±è´¥")}},ie=async()=>{try{const e=await x.post(`/community/posts/${M.value}/collect`);R.value.is_collected=e.data.collected,R.value.collect_count=e.data.collect_count,V.success(e.data.collected?"æ”¶è—æˆåŠŸ":"å·²å–æ¶ˆæ”¶è—")}catch(e){V.error("æ“ä½œå¤±è´¥")}},oe=()=>{J.value=!0},ce=()=>{navigator.clipboard.writeText(Z.value).then(()=>{V.success("åˆ†äº«é“¾æ¥å·²å¤åˆ¶ï¼Œåˆ†äº«ç»™å¥½å‹æ³¨å†Œåå¯è·å¾—3æ—¥VIP")}).catch(()=>{V.info("è¯·å¤åˆ¶é“¾æ¥åˆ†äº«ï¼š"+Z.value)})},re=()=>{V.info("é•¿æŒ‰å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œ")},ue=()=>{window.history.length>1?y.back():y.push("/user/community")},me=()=>{J.value=!0},ve=()=>{y.push("/user/vip")},de=async()=>{try{await x.post(`/users/${R.value.user.id}/follow`),R.value.is_followed=!0,V.success("å…³æ³¨æˆåŠŸ")}catch(e){V.error("å…³æ³¨å¤±è´¥")}},pe=async e=>{if(!e._liking){e._liking=!0;try{const a=await x.post(`/community/comments/${e.id}/like`);e.is_liked=a.data.liked,e.like_count=a.data.like_count}catch(a){}finally{e._liking=!1}}},ge=()=>{H.value=null,Y.value=!0},ye=e=>{H.value=e,Y.value=!0},ke=async({content:e,image:a,replyTarget:l})=>{var s,t,n,i;try{let n=null;if(a){const e=new FormData;e.append("file",a);const l=await x.post("/community/upload/image",e,{headers:{"Content-Type":"multipart/form-data"}});n=(null==(s=l.data)?void 0:s.url)||l.url}const i={content:e,images:n?[n]:[]};l&&(i.parent_id=l.parent_id||l.id,i.reply_to_user_id=null==(t=l.user)?void 0:t.id),await x.post(`/community/posts/${M.value}/comments`,i),H.value=null,Y.value=!1,R.value.comment_count++,V.success("è¯„è®ºæˆåŠŸ"),te(!0)}catch(o){V.error((null==(i=null==(n=o.response)?void 0:n.data)?void 0:i.detail)||"è¯„è®ºå¤±è´¥")}},_e=e=>{if(!e)return"";const a=new Date(e);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")} ${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}:${String(a.getSeconds()).padStart(2,"0")}`},be=e=>e?e>=1e4?(e/1e4).toFixed(1)+"W":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString():"0",fe=e=>{e&&y.push(`/user/member/${e}`)};return b(()=>{(async()=>{try{const e=await x.get(`/community/posts/${M.value}`,{signal:j.signal});R.value=e.data}catch(e){e.name}})(),te(!0)}),f(()=>{j.abort()}),(e,d)=>{var p,g,y,k,_,b,f,C,j,x,S,L,V,B,W;return l(),a("div",aa,[s("div",{class:"top-bar"},[s("div",{class:"back-btn",onClick:ue},[...d[6]||(d[6]=[s("img",{src:$,alt:"è¿”å›",class:"back-icon"},null,-1)])]),d[7]||(d[7]=s("span",{class:"title"},"å¸–å­è¯¦æƒ…",-1)),d[8]||(d[8]=s("span",{class:"placeholder"},null,-1))]),R.value?(l(),a("div",la,[s("div",sa,[s("img",{src:t(P)(null==(p=R.value.user)?void 0:p.avatar,null==(g=R.value.user)?void 0:g.id),class:"avatar",onClick:d[0]||(d[0]=e=>{var a;return fe(null==(a=R.value.user)?void 0:a.id)})},null,8,ta),s("div",na,[s("span",{class:"username",onClick:d[1]||(d[1]=e=>{var a;return fe(null==(a=R.value.user)?void 0:a.id)})},i((null==(y=R.value.user)?void 0:y.nickname)||(null==(k=R.value.user)?void 0:k.username)),1),s("span",ia,i(_e(R.value.created_at)),1)]),R.value.is_followed||(null==(_=R.value.user)?void 0:_.id)===T.value?n("",!0):(l(),a("button",{key:0,class:"follow-btn",onClick:de},[...d[9]||(d[9]=[s("span",null,"+",-1),o(" å…³æ³¨ ",-1)])]))]),R.value.title?(l(),a("h1",oa,i(R.value.title),1)):n("",!0),s("div",ca,i(be(R.value.view_count))+"é˜…è¯»",1),R.value.topics&&R.value.topics.length?(l(),a("div",ra,[(l(!0),a(c,null,r(R.value.topics,e=>(l(),a("span",{class:"topic-tag",key:e.id},"#"+i(e.name),1))),128))])):n("",!0),d[11]||(d[11]=s("div",{class:"divider-line"},null,-1)),s("div",ua,[s("p",ma,i(R.value.content),1)]),R.value.images&&R.value.images.length?(l(),a("div",va,[(l(!0),a(c,null,r(R.value.images,(e,s)=>(l(),a("img",{key:s,src:e,class:"post-image",onClick:e=>(e=>{var a,l;(null==(l=null==(a=R.value)?void 0:a.images)?void 0:l[e])&&(le.value=R.value.images[e],ae.value=!0)})(s)},null,8,da))),128))])):n("",!0),R.value.video_url?(l(),a("div",pa,[A.value?(l(),a("video",{key:0,ref_key:"videoRef",ref:D,src:R.value.video_url,controls:"",playsinline:""},null,8,ga)):(l(),a("div",ya,[s("div",ka,[s("img",{src:(null==(b=R.value.images)?void 0:b[0])||"/images/default-cover.webp",alt:"å°é¢"},null,8,_a),s("div",{class:"video-overlay"},[d[10]||(d[10]=s("div",{class:"vip-lock-text"},"æœ¬è§†é¢‘éœ€è¦å¼€é€š VIP é¢„è§ˆ",-1)),s("div",{class:"vip-buttons"},[s("button",{class:"buy-vip-btn",onClick:ve},"å‰å¾€å¼€é€šVIP"),s("button",{class:"share-vip-btn",onClick:me},"é‚€è¯·å¥½å‹å¾—VIP")])])])]))])):n("",!0)])):n("",!0),h(ze,{comments:G.value,"comment-count":(null==(f=R.value)?void 0:f.comment_count)||0,loading:E.value,"has-more":K.value,"post-id":M.value,onLikeComment:pe,onReplyComment:ye,onGoProfile:fe,onPreviewImage:se},null,8,["comments","comment-count","loading","has-more","post-id"]),s("div",ba,[s("div",{class:"input-wrapper",onClick:ge},[s("img",{src:t(U),class:"input-icon"},null,8,fa),d[12]||(d[12]=s("span",{class:"input-placeholder"},"è¯·è¾“å…¥è¯„è®º",-1))]),s("div",ha,[s("span",{class:"action-item",onClick:oe},[s("img",{src:t(O),class:"action-icon"},null,8,wa),d[13]||(d[13]=s("span",{class:"action-text"},"åˆ†äº«",-1))]),s("span",{class:u(["action-item",{active:null==(C=R.value)?void 0:C.is_collected}]),onClick:ie},[s("img",{src:(null==(j=R.value)?void 0:j.is_collected)?t(F):t(N),class:"action-icon"},null,8,Ca),s("span",$a,i(be((null==(x=R.value)?void 0:x.collect_count)||0)),1)],2),s("span",{class:u(["action-item",{active:null==(S=R.value)?void 0:S.is_liked}]),onClick:ne},[s("img",{src:(null==(L=R.value)?void 0:L.is_liked)?t(q):t(z),class:"action-icon"},null,8,Ia),s("span",ja,i(be((null==(V=R.value)?void 0:V.like_count)||0)),1)],2)])]),h(ea,{visible:Y.value,"reply-target":H.value,onClose:d[2]||(d[2]=e=>Y.value=!1),onSubmit:ke},null,8,["visible","reply-target"]),ae.value?(l(),a("div",{key:1,class:"image-preview",onClick:d[3]||(d[3]=e=>ae.value=!1)},[s("img",{src:le.value},null,8,xa)])):n("",!0),(l(),v(w,{to:"body"},[J.value?(l(),a("div",{key:0,class:"share-modal-overlay",onClick:d[5]||(d[5]=m(e=>J.value=!1,["self"]))},[s("div",Sa,[s("button",{class:"share-modal-close",onClick:d[4]||(d[4]=e=>J.value=!1)},"Ã—"),d[15]||(d[15]=s("div",{class:"share-header"},[s("img",{src:I,alt:"Logo",class:"share-logo"}),s("div",{class:"share-title-info"},[s("h3",{class:"share-site-name"},"Soulæˆäººç‰ˆ"),s("p",{class:"share-site-desc"},"å…¨ç½‘æœ€å…¨æˆäººè§†é¢‘å¹³å°")])],-1)),s("div",Pa,[s("img",{src:(null==(W=null==(B=R.value)?void 0:B.images)?void 0:W[0])||"/images/default-cover.webp",alt:"æ¨å¹¿å›¾"},null,8,Ma)]),s("div",Ta,[s("div",Ra,[s("img",{src:ee.value,alt:"äºŒç»´ç "},null,8,Da)]),s("div",La,[s("div",Ua,[d[14]||(d[14]=o("é‚€è¯·ç  ",-1)),s("span",null,i(Q.value),1)]),s("div",qa,"å®˜æ–¹ç½‘å€:"+i(X.value),1)])]),s("div",{class:"share-actions"},[s("button",{class:"copy-link-btn",onClick:ce},"å¤åˆ¶é“¾æ¥"),s("button",{class:"save-image-btn",onClick:re},"ä¿å­˜å›¾ç‰‡")])])])):n("",!0)]))])}}},[["__scopeId","data-v-726f9ab4"]]);export{za as default};
