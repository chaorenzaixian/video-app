/* empty css             *//* empty css                   *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                   *//* empty css                  *//* empty css               */import{_ as a,a as e}from"./index-C3P4JTuA.js";import{be as l,bk as t,bh as s,bi as i,bj as o,aM as r,br as u,bs as n,bI as m,aQ as d,aR as p,aS as c,aT as v,E as f}from"./element-plus-DlIn_qXi.js";import{r as g,l as y,j as _,y as b,O as j,F as h,ai as w,z as k,G as x,E as C,I as V,K as I,L as q,C as z}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const E={class:"tags-page"},F={class:"card-header"},G=a({__name:"Tags",setup(a){const G=g(!1),L=g(!1),R=g(!1),T=g(!1),U=g(null),$=g(null),A=g([]),D=y({name:""}),K={name:[{required:!0,message:"请输入标签名称",trigger:"blur"},{min:1,max:30,message:"标签名称长度在1-30个字符",trigger:"blur"}]},M=async()=>{G.value=!0;try{const a=await e.get("/admin/tags");A.value=a.data||[]}catch(a){}finally{G.value=!1}},O=()=>{T.value=!1,U.value=null,D.name="",R.value=!0},P=async()=>{$.value&&await $.value.validate(async a=>{if(a){L.value=!0;try{T.value&&U.value?(await e.put(`/admin/tags/${U.value}`,{name:D.name}),f.success("更新成功")):(await e.post("/admin/tags",{name:D.name}),f.success("创建成功")),R.value=!1,M()}catch(l){}finally{L.value=!1}}})};return _(()=>{M()}),(a,g)=>{const y=w("Plus"),_=d,Q=r,S=i,Y=o,B=u,H=s,J=m,N=l,W=v,X=c,Z=p,aa=t,ea=n;return k(),b("div",E,[j(N,null,{header:h(()=>[z("div",F,[g[4]||(g[4]=z("span",null,"标签管理",-1)),j(Q,{type:"primary",onClick:O},{default:h(()=>[j(_,null,{default:h(()=>[j(y)]),_:1}),g[3]||(g[3]=I("新增标签 ",-1))]),_:1})])]),default:h(()=>[x((k(),C(H,{data:A.value,stripe:""},{default:h(()=>[j(S,{prop:"id",label:"ID",width:"80"}),j(S,{prop:"name",label:"标签名称","min-width":"200"},{default:h(({row:a})=>[j(Y,null,{default:h(()=>[I(q(a.name),1)]),_:2},1024)]),_:1}),j(S,{prop:"use_count",label:"使用次数",width:"120"}),j(S,{label:"操作",width:"150",fixed:"right"},{default:h(({row:a})=>[j(Q,{link:"",type:"primary",onClick:e=>(a=>{T.value=!0,U.value=a.id,D.name=a.name,R.value=!0})(a)},{default:h(()=>[...g[5]||(g[5]=[I("编辑",-1)])]),_:1},8,["onClick"]),j(B,{title:"确定删除这个标签吗？",onConfirm:l=>(async a=>{try{await e.delete(`/admin/tags/${a}`),f.success("删除成功"),M()}catch(l){}})(a.id)},{reference:h(()=>[j(Q,{link:"",type:"danger"},{default:h(()=>[...g[6]||(g[6]=[I("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[ea,G.value]]),G.value||0!==A.value.length?V("",!0):(k(),C(J,{key:0,description:"暂无标签"}))]),_:1}),j(aa,{modelValue:R.value,"onUpdate:modelValue":g[2]||(g[2]=a=>R.value=a),title:T.value?"编辑标签":"新增标签",width:"400px","destroy-on-close":""},{footer:h(()=>[j(Q,{onClick:g[1]||(g[1]=a=>R.value=!1)},{default:h(()=>[...g[7]||(g[7]=[I("取消",-1)])]),_:1}),j(Q,{type:"primary",onClick:P,loading:L.value},{default:h(()=>[...g[8]||(g[8]=[I("确定",-1)])]),_:1},8,["loading"])]),default:h(()=>[j(Z,{model:D,rules:K,ref_key:"formRef",ref:$,"label-width":"80px"},{default:h(()=>[j(X,{label:"标签名称",prop:"name"},{default:h(()=>[j(W,{modelValue:D.name,"onUpdate:modelValue":g[0]||(g[0]=a=>D.name=a),placeholder:"请输入标签名称",maxlength:"30","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-5cca6a3e"]]);export{G as default};
