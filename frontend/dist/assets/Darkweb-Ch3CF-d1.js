import{r as a,c as l,j as e,y as s,C as i,I as v,E as c,O as n,M as t,aa as o,H as u,L as d,U as r,K as k,a0 as m,aC as p,z as g,aD as y}from"./vue-vendor-Ba_vealp.js";import{_ as h}from"./ic_back-BPdSG6fy.js";import{_ as b,a as f}from"./index-C3P4JTuA.js";import{B as w}from"./BottomNav-CoGs_HZ2.js";import"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const _={class:"darkweb-page"},C={class:"fixed-header"},I={class:"header-top"},P={class:"category-nav"},V=["onClick"],j={key:0,class:"promo-grid-fixed"},x=["onClick"],$={class:"promo-icon-wrap"},S=["src","alt"],M={key:1,class:"fallback-icon"},z={class:"promo-name"},A={key:1,class:"promo-scroll-container"},B={class:"promo-grid-scroll"},D=["onClick"],F={class:"promo-icon-wrap"},E=["src","alt"],H={key:1,class:"fallback-icon"},K={class:"promo-name"},L={key:2,class:"hot-section"},N={class:"tag-cloud"},O=["onClick"],U={class:"filter-bar"},q={class:"filter-tabs"},G=["onClick"],J={key:0,class:"toggle-icon"},Q={key:1,class:"toggle-icon grid"},R={key:4,class:"empty-videos"},T=["onClick"],W={class:"video-cover"},X=["src","alt"],Y={class:"cover-views"},Z={class:"video-duration"},aa={key:0,class:"vip-lock"},la={class:"video-info"},ea={class:"video-title"},sa={class:"video-meta"},ia={key:0,class:"video-tag"},va={key:1,class:"video-tag"},ca={class:"video-comments"},na={class:"vip-modal"},ta={class:"vip-level"},oa={class:"current-level"},ua=b({__name:"Darkweb",setup(b){const ua=p(),da=a(!0),ra=a(!1),ka=a(!1),ma=a(5),pa=a(0),ga=a([]),ya=a([]),ha=a(0),ba=a(0),fa=a(0),wa=a(2),_a=a(1),Ca=a(20),Ia=a(0),Pa=l(()=>ya.value.length<Ia.value),Va=a(!1),ja=a([]),xa=a([]),$a={0:"ÈùûVIP",1:"ÊôÆÈÄöVIP",2:"VIP1",3:"VIP2",4:"VIP3",5:"ÈªÑÈáëËá≥Â∞ä",6:"Á¥´Ëâ≤ÈôêÂÆöËá≥Â∞ä"},Sa=l(()=>$a[ma.value]||`VIP${ma.value}`),Ma=l(()=>$a[pa.value]||"ÈùûVIP"),za=[{key:"popular",label:"ÁÉ≠Èó®Êé®Ëçê"},{key:"latest",label:"ÊúÄÊñ∞‰∏äÊû∂"},{key:"views",label:"ÊúÄÂ§öËßÇÁúã"},{key:"comments",label:"ÊúÄÊñ∞ÁÉ≠ËØÑ"}],Aa=l(()=>ga.value.filter(a=>1===a.level||!a.parent_id)),Ba=l(()=>{if(0===ha.value)return[];const a=ga.value.find(a=>a.id===ha.value);return(null==a?void 0:a.children)||[]}),Da=a=>{a.link&&window.open(a.link,"_blank")},Fa=async(a=!0)=>{a?(da.value=!0,_a.value=1,ya.value=[]):ra.value=!0;try{const l={page:_a.value,page_size:Ca.value,sort:za[fa.value].key};ba.value>0?l.category_id=ba.value:ha.value>0&&(l.category_id=ha.value);const e=await f.get("/darkweb/videos",{params:l}),s=e.data||e;a?ya.value=s.items||[]:ya.value.push(...s.items||[]),Ia.value=s.total||0}catch(l){}finally{da.value=!1,ra.value=!1}},Ea=()=>{!ra.value&&Pa.value&&(_a.value++,Fa(!1))},Ha=a=>{if(!a)return"00:00";const l=Math.floor(a/60),e=Math.floor(a%60);return`${l.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`};return e(async()=>{await(async()=>{try{const a=await f.get("/darkweb/access-check"),l=a.data||a;ka.value=l.has_access,ma.value=l.min_vip_level||5,pa.value=l.user_vip_level||0}catch(a){ka.value=!1}})(),await(async()=>{try{const a=await f.get("/darkweb/categories"),l=a.data||a;if(ga.value=Array.isArray(l)?l:[],ga.value.length>0){const a=ga.value.find(a=>1===a.level||!a.parent_id);a&&(ha.value=a.id,a.children&&a.children.length>0&&(ba.value=a.children[0].id))}}catch(a){ga.value=[]}})(),await(async()=>{try{const a=await f.get("/ads/icons"),l=a.data||a;l&&l.length>0&&(ja.value=l.slice(0,5),xa.value=l.slice(5,10))}catch(a){}})(),await Fa()}),(a,l)=>(g(),s("div",_,[i("header",C,[i("div",I,[i("div",{class:"back-btn",onClick:l[0]||(l[0]=l=>a.$router.back())},[...l[5]||(l[5]=[i("img",{src:h,alt:"ËøîÂõû",class:"back-icon"},null,-1)])]),l[6]||(l[6]=i("div",{class:"header-title"},"ÊöóÁΩë‰∏ìÂå∫",-1)),l[7]||(l[7]=i("div",{class:"header-right"},null,-1))]),i("nav",P,[(g(!0),s(t,null,o(Aa.value,a=>(g(),s("span",{key:a.id,class:u(["cat-item",{active:ha.value===a.id}]),onClick:l=>{return e=a.id,ha.value=e,ba.value=0,void Fa(!0);var e}},d(a.name),11,V))),128))])]),l[18]||(l[18]=i("div",{class:"header-placeholder"},null,-1)),ja.value.length>0?(g(),s("div",j,[(g(!0),s(t,null,o(ja.value,a=>(g(),s("div",{key:a.id,class:"promo-item",onClick:l=>Da(a)},[i("div",$,[a.image?(g(),s("img",{key:0,src:a.image,alt:a.name,class:"promo-img"},null,8,S)):(g(),s("span",M,d(a.icon||"üì¶"),1))]),i("span",z,d(a.name),1)],8,x))),128))])):v("",!0),xa.value.length>0?(g(),s("div",A,[i("div",B,[(g(!0),s(t,null,o([...xa.value,...xa.value],(a,l)=>(g(),s("div",{key:"scroll-"+l,class:"promo-item",onClick:l=>Da(a)},[i("div",F,[a.image?(g(),s("img",{key:0,src:a.image,alt:a.name,class:"promo-img"},null,8,E)):(g(),s("span",H,d(a.icon||"üì¶"),1))]),i("span",K,d(a.name),1)],8,D))),128))])])):v("",!0),Ba.value.length>0?(g(),s("div",L,[i("div",N,[(g(!0),s(t,null,o(Ba.value,a=>(g(),s("span",{key:a.id,class:u(["tag-item",{active:ba.value===a.id}]),onClick:l=>{return e=a.id,ba.value=ba.value===e?0:e,void Fa(!0);var e}},d(a.name),11,O))),128))])])):v("",!0),i("div",U,[i("div",q,[(g(),s(t,null,o(za,(a,l)=>i("span",{key:a.key,class:u(["filter-item",{active:fa.value===l}]),onClick:a=>(a=>{fa.value=a,Fa(!0)})(l)},d(a.label),11,G)),64))]),i("div",{class:"view-toggle",onClick:l[1]||(l[1]=a=>wa.value=1===wa.value?2:1)},[l[10]||(l[10]=i("span",{class:"toggle-label"},"ÂàáÊç¢",-1)),1===wa.value?(g(),s("span",J,[...l[8]||(l[8]=[i("i",null,null,-1),i("i",null,null,-1),i("i",null,null,-1)])])):(g(),s("span",Q,[...l[9]||(l[9]=[i("i",null,null,-1),i("i",null,null,-1),i("i",null,null,-1),i("i",null,null,-1)])]))])]),da.value&&0===ya.value.length?(g(),s("div",{key:3,class:u(["video-list",1===wa.value?"single-column":"double-column"])},[(g(),s(t,null,o(6,a=>i("div",{key:"skeleton-"+a,class:"video-card skeleton"},[...l[11]||(l[11]=[y('<div class="video-cover skeleton-cover" data-v-9442ed6d><div class="skeleton-shimmer" data-v-9442ed6d></div></div><div class="video-info" data-v-9442ed6d><div class="skeleton-title" data-v-9442ed6d></div><div class="skeleton-meta" data-v-9442ed6d></div></div>',2)])])),64))],2)):da.value||0!==ya.value.length?(g(),s("div",{key:5,class:u(["video-list",1===wa.value?"single-column":"double-column"])},[(g(!0),s(t,null,o(ya.value,a=>{return g(),s("div",{key:a.id,class:"video-card",onClick:l=>{return e=a.id,void(ka.value?ua.push(`/user/darkweb/video/${e}`):Va.value=!0);var e}},[i("div",W,[i("img",{src:a.cover_url||"/images/default-cover.webp",alt:a.title},null,8,X),i("div",Y,[l[13]||(l[13]=i("span",{class:"play-icon"},"‚ñ∂",-1)),i("span",null,d((e=a.view_count,e?e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString():"0")),1)]),i("div",Z,d(Ha(a.duration)),1),ka.value?v("",!0):(g(),s("div",aa,"üîí"))]),i("div",la,[i("p",ea,d(a.title),1),i("div",sa,[a.tags&&a.tags.length>0?(g(),s("span",ia,d(a.tags[0]),1)):(g(),s("span",va,d(a.category_name||"ÊöóÁΩë"),1)),i("span",ca,"ËØÑËÆ∫ "+d(a.comment_count||0),1)])])],8,T);var e}),128))],2)):(g(),s("div",R,[...l[12]||(l[12]=[i("span",null,"ÊöÇÊó†ËßÜÈ¢ë",-1)])])),Pa.value&&!da.value&&ya.value.length>0?(g(),s("div",{key:6,class:"load-more",onClick:Ea},[i("span",null,d(ra.value?"Âä†ËΩΩ‰∏≠...":"Âä†ËΩΩÊõ¥Â§ö"),1)])):v("",!0),(g(),c(m,{to:"body"},[Va.value?(g(),s("div",{key:0,class:"vip-modal-overlay",onClick:l[4]||(l[4]=r(a=>Va.value=!1,["self"]))},[i("div",na,[l[16]||(l[16]=i("div",{class:"modal-icon"},"üîí",-1)),l[17]||(l[17]=i("h3",null,"VIP‰∏ìÂ±ûÂÜÖÂÆπ",-1)),i("p",null,[l[14]||(l[14]=k("ÈúÄË¶Å ",-1)),i("span",ta,d(Sa.value),1),l[15]||(l[15]=k(" ‰ª•‰∏äÊâçËÉΩËßÇÁúã",-1))]),i("p",oa,"ÊÇ®ÂΩìÂâçÁ≠âÁ∫ßÔºö"+d(Ma.value),1),i("button",{class:"upgrade-btn",onClick:l[2]||(l[2]=l=>a.$router.push("/user/vip"))},"Á´ãÂç≥ÂçáÁ∫ßVIP"),i("button",{class:"close-btn",onClick:l[3]||(l[3]=a=>Va.value=!1)},"ÂèñÊ∂à")])])):v("",!0)])),n(w)]))}},[["__scopeId","data-v-9442ed6d"]]);export{ua as default};
