/* empty css             *//* empty css                *//* empty css                     *//* empty css                 *//* empty css                  *//* empty css                    *//* empty css                  *//* empty css                   */import{_ as e,u as l,a}from"./index-C3P4JTuA.js";import{be as t,aR as o,bC as s,aQ as d,aS as n,aM as r,bw as u,aT as c,E as i}from"./element-plus-DlIn_qXi.js";import{r as m,l as p,c as _,j as f,y as g,O as V,F as b,ai as h,z as y,K as v,C as j,E as w}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const k={class:"site-settings-page"},q={class:"logo-upload"},x={key:0,class:"logo-preview"},U=["src"],L={class:"logo-actions"},S={class:"upload-placeholder"},C=e({__name:"SiteSettings",setup(e){const C=l(),P=m(!1),Q=p({site_name:"Soul",logo:"",description:"",keywords:"",contact_email:"",contact_qq:"",contact_telegram:"",footer_text:"",icp_number:""}),z=_(()=>"/api/v1/settings/site/logo"),M=_(()=>({Authorization:`Bearer ${C.token}`})),E=async()=>{P.value=!0;try{await a.put("/settings/site",{site_name:Q.site_name,description:Q.description,keywords:Q.keywords,contact_email:Q.contact_email,contact_qq:Q.contact_qq,contact_telegram:Q.contact_telegram,footer_text:Q.footer_text,icp_number:Q.icp_number}),i.success("保存成功")}catch(e){i.error("保存失败")}finally{P.value=!1}},G=e=>{const l=e.type.startsWith("image/"),a=e.size/1024/1024<2;return l?!!a||(i.error("图片大小不能超过 2MB"),!1):(i.error("只能上传图片文件"),!1)},I=e=>{Q.logo=e.logo,i.success("Logo上传成功")},O=()=>{i.error("Logo上传失败")},B=async()=>{try{await a.delete("/settings/site/logo"),Q.logo="",i.success("Logo已删除")}catch(e){i.error("删除失败")}};return f(()=>{(async()=>{try{const e=await a.get("/settings/site"),l=e.data||e;Object.assign(Q,l)}catch(e){}})()}),(e,l)=>{const a=h("Picture"),i=d,m=s,p=r,_=h("Plus"),f=u,C=n,F=h("InfoFilled"),T=c,A=h("Message"),W=h("Document"),D=h("Check"),J=o,K=t;return y(),g("div",k,[V(K,null,{header:b(()=>[...l[8]||(l[8]=[j("div",{class:"card-header"},[j("span",null,"网站设置")],-1)])]),default:b(()=>[V(J,{model:Q,"label-width":"120px",class:"settings-form"},{default:b(()=>[V(m,{"content-position":"left"},{default:b(()=>[V(i,null,{default:b(()=>[V(a)]),_:1}),l[9]||(l[9]=v(" Logo设置 ",-1))]),_:1}),V(C,{label:"网站Logo"},{default:b(()=>[j("div",q,[Q.logo?(y(),g("div",x,[j("img",{src:Q.logo,alt:"Logo"},null,8,U),j("div",L,[V(p,{type:"danger",size:"small",onClick:B},{default:b(()=>[...l[10]||(l[10]=[v("删除",-1)])]),_:1})])])):(y(),w(f,{key:1,class:"logo-uploader",action:z.value,headers:M.value,"show-file-list":!1,"on-success":I,"on-error":O,"before-upload":G,accept:"image/*"},{default:b(()=>[j("div",S,[V(i,{class:"upload-icon"},{default:b(()=>[V(_)]),_:1}),l[11]||(l[11]=j("span",null,"上传Logo",-1))])]),_:1},8,["action","headers"]))]),l[12]||(l[12]=j("div",{class:"form-tip"},"建议尺寸：200x50px，支持 PNG/JPG/GIF/WebP/SVG，最大2MB",-1))]),_:1}),V(m,{"content-position":"left"},{default:b(()=>[V(i,null,{default:b(()=>[V(F)]),_:1}),l[13]||(l[13]=v(" 基本信息 ",-1))]),_:1}),V(C,{label:"网站名称"},{default:b(()=>[V(T,{modelValue:Q.site_name,"onUpdate:modelValue":l[0]||(l[0]=e=>Q.site_name=e),placeholder:"网站名称"},null,8,["modelValue"])]),_:1}),V(C,{label:"网站描述"},{default:b(()=>[V(T,{modelValue:Q.description,"onUpdate:modelValue":l[1]||(l[1]=e=>Q.description=e),type:"textarea",rows:3,placeholder:"网站描述，用于SEO"},null,8,["modelValue"])]),_:1}),V(C,{label:"关键词"},{default:b(()=>[V(T,{modelValue:Q.keywords,"onUpdate:modelValue":l[2]||(l[2]=e=>Q.keywords=e),placeholder:"SEO关键词，用逗号分隔"},null,8,["modelValue"])]),_:1}),V(m,{"content-position":"left"},{default:b(()=>[V(i,null,{default:b(()=>[V(A)]),_:1}),l[14]||(l[14]=v(" 联系方式 ",-1))]),_:1}),V(C,{label:"联系邮箱"},{default:b(()=>[V(T,{modelValue:Q.contact_email,"onUpdate:modelValue":l[3]||(l[3]=e=>Q.contact_email=e),placeholder:"客服邮箱"},null,8,["modelValue"])]),_:1}),V(C,{label:"联系QQ"},{default:b(()=>[V(T,{modelValue:Q.contact_qq,"onUpdate:modelValue":l[4]||(l[4]=e=>Q.contact_qq=e),placeholder:"客服QQ"},null,8,["modelValue"])]),_:1}),V(C,{label:"Telegram"},{default:b(()=>[V(T,{modelValue:Q.contact_telegram,"onUpdate:modelValue":l[5]||(l[5]=e=>Q.contact_telegram=e),placeholder:"Telegram用户名"},null,8,["modelValue"])]),_:1}),V(m,{"content-position":"left"},{default:b(()=>[V(i,null,{default:b(()=>[V(W)]),_:1}),l[15]||(l[15]=v(" 底部信息 ",-1))]),_:1}),V(C,{label:"底部文字"},{default:b(()=>[V(T,{modelValue:Q.footer_text,"onUpdate:modelValue":l[6]||(l[6]=e=>Q.footer_text=e),placeholder:"底部版权信息"},null,8,["modelValue"])]),_:1}),V(C,{label:"备案号"},{default:b(()=>[V(T,{modelValue:Q.icp_number,"onUpdate:modelValue":l[7]||(l[7]=e=>Q.icp_number=e),placeholder:"ICP备案号"},null,8,["modelValue"])]),_:1}),V(C,null,{default:b(()=>[V(p,{type:"primary",onClick:E,loading:P.value,size:"large"},{default:b(()=>[V(i,null,{default:b(()=>[V(D)]),_:1}),l[16]||(l[16]=v(" 保存设置 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},[["__scopeId","data-v-a76722f6"]]);export{C as default};
