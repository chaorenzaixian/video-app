import{_ as a}from"./ic_back-BPdSG6fy.js";import{r as s,c as t,j as e,y as i,C as c,I as l,H as d,u as n,L as v,K as r,aD as o,M as u,aa as p,aC as k,z as g,V as f}from"./vue-vendor-Ba_vealp.js";import{_ as b,u as m,a as _}from"./index-C3P4JTuA.js";import{E as h}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const y={class:"tasks-page"},w={class:"page-header"},$={class:"header-tabs"},C={class:"user-vip-section"},S={class:"section-content"},V={class:"user-info"},I={class:"avatar-wrapper"},P={class:"avatar-frame"},x=["src"],D={key:0,class:"vip-crown"},M={class:"info-text"},j={class:"nickname-row"},z={class:"nickname"},H=["src"],L={class:"user-id-row"},E={key:0,class:"user-id"},A={class:"tab-section"},F={class:"tabs"},G={class:"stats-bar"},J={class:"stats-left"},Y={key:0,class:"task-list"},B={class:"task-item"},K=["disabled"],R={class:"task-item"},T={class:"task-item"},U={class:"task-item"},W=["disabled"],q={key:1,class:"exchange-grid"},N={key:0,class:"ticket-content"},O={class:"ticket-title"},Q={class:"ticket-desc"},X={class:"card-footer"},Z={class:"card-cost"},aa=["disabled","onClick"],sa={key:0,class:"empty-state"},ta={key:2,class:"history-page"},ea={class:"history-header"},ia={class:"points-card"},ca={class:"points-value"},la={class:"records-section"},da={class:"records-list"},na={class:"col-name"},va={class:"col-type"},ra={class:"col-time"},oa={key:0,class:"empty-records"},ua=b({__name:"Tasks",setup(b){k();const ua=m(),pa=s("tasks"),ka=s({total_points:0,available_points:0,frozen_points:0,invite_count:0}),ga=s([]),fa=s([]),ba=s(!1),ma=s(!1),_a=s(!1),ha={1:"/images/backgrounds/vip_gold.webp",2:"/images/backgrounds/vip_1.webp",3:"/images/backgrounds/vip_2.webp",4:"/images/backgrounds/vip_3.webp",5:"/images/backgrounds/super_vip_red.webp",6:"/images/backgrounds/super_vip_blue.webp"},ya={1:"æ™®é€šVIP",2:"VIP1",3:"VIP2",4:"VIP3",5:"é»„é‡‘è‡³å°Š",6:"ç´«è‰²è‡³å°Š"},wa=t(()=>{var a,s;if(null==(a=ua.user)?void 0:a.avatar)return ua.user.avatar;return(a=>{const s=a%52;if(s<17)return`/images/avatars/icon_avatar_${s+1}.webp`;if(s<32)return`/images/avatars/DM_20251217202131_${String(s-17+1).padStart(3,"0")}.JPEG`;return`/images/avatars/DM_20251217202341_${String(s-32+1).padStart(3,"0")}.JPEG`})(parseInt(null==(s=ua.user)?void 0:s.id)||1)}),$a=t(()=>{var a;const s=(null==(a=ua.user)?void 0:a.vip_level)||1;return ha[s]||ha[1]});t(()=>{var a;return ya[null==(a=ua.user)?void 0:a.vip_level]||"æ™®é€šVIP"});const Ca=async()=>{try{const a=await _.get("/points/info");ka.value=a.data}catch(a){}},Sa=async()=>{try{const a=await _.get("/points/exchange/items");ga.value=a.data}catch(a){}},Va=async()=>{var a,s;if(!ma.value)try{const a=await _.post("/points/tasks/checkin");h.success(a.data.message),ma.value=!0,Ca()}catch(t){h.error((null==(s=null==(a=t.response)?void 0:a.data)?void 0:s.detail)||"ç­¾åˆ°å¤±è´¥")}},Ia=async()=>{var a,s,t;if(!_a.value)try{const s=await _.post("/points/tasks/download");h.success((null==(a=s.data)?void 0:a.message)||"é¢†å–æˆåŠŸï¼+20ç§¯åˆ†"),_a.value=!0,Ca()}catch(e){h.error((null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.detail)||"é¢†å–å¤±è´¥")}},Pa=a=>{const s=new Date(a);return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")} ${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}`},xa=a=>{if(!a)return"æœªçŸ¥";const s=new Date(a);return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`},Da=a=>{if(a.image_url){let s=a.image_url;if(!s.startsWith("http")){s=`${""}${s}`}return{backgroundImage:`url(${s})`,backgroundSize:"100% 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}return{}};return e(()=>{Ca(),(async()=>{try{const a=await _.get("/points/tasks"),s=a.data.find(a=>"checkin"===a.task_type);s&&(ma.value="claimed"===s.status);const t=a.data.find(a=>"download"===a.task_type);t&&(_a.value="claimed"===t.status)}catch(a){}})(),Sa()}),(s,t)=>{var e,k,b;return g(),i("div",y,[c("header",w,[c("div",{class:"back-btn",onClick:t[0]||(t[0]=a=>s.$router.push("/user/profile"))},[...t[11]||(t[11]=[c("img",{src:a,alt:"è¿”å›",class:"back-icon"},null,-1)])]),c("nav",$,[c("span",{class:"tab-item",onClick:t[1]||(t[1]=a=>s.$router.push("/user/agent"))},"ä»£ç†èµšé’±"),t[12]||(t[12]=c("span",{class:"tab-item active"},"ç¦åˆ©ä»»åŠ¡",-1)),c("span",{class:"tab-item",onClick:t[2]||(t[2]=a=>s.$router.push("/user/app-recommend"))},"åº”ç”¨æ¨è")])]),c("div",C,[t[14]||(t[14]=c("div",{class:"section-background"},[c("img",{src:"/images/backgrounds/welfare_vip_background.webp",alt:"",class:"bg-image"}),c("div",{class:"bg-overlay"})],-1)),c("div",S,[c("div",V,[c("div",I,[c("div",{class:d(["avatar-container",{"is-vip":n(ua).isVip}])},[c("div",P,[c("img",{src:wa.value,class:"avatar",alt:""},null,8,x)]),n(ua).isVip?(g(),i("div",D,[...t[13]||(t[13]=[c("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[c("path",{d:"M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5zm14 3c0 .6-.4 1-1 1H6c-.6 0-1-.4-1-1v-1h14v1z"})],-1)])])):l("",!0)],2)]),c("div",M,[c("div",j,[c("span",z,v((null==(e=n(ua).user)?void 0:e.nickname)||(null==(k=n(ua).user)?void 0:k.username)),1),n(ua).isVip&&$a.value?(g(),i("img",{key:0,src:$a.value,class:"vip-level-badge",alt:"VIP"},null,8,H)):l("",!0)]),c("div",L,[n(ua).isVip?(g(),i("span",E," åˆ°æœŸ: "+v(xa(null==(b=n(ua).user)?void 0:b.vip_expire_date)),1)):(g(),i("span",{key:1,class:"user-id upgrade-hint",onClick:t[3]||(t[3]=a=>s.$router.push("/user/vip"))}," å‡çº§ä¼šå‘˜ â†’ "))])])])]),c("button",{class:"vip-btn",onClick:t[4]||(t[4]=a=>s.$router.push("/user/vip"))},v(n(ua).isVip?"ç»­è´¹VIPä¼šå‘˜":"å¼€é€šVIPä¸é™æ¬¡æ•°è§‚çœ‹"),1)]),c("div",A,[c("div",F,[c("span",{class:d(["tab-item",{active:"tasks"===pa.value}]),onClick:t[5]||(t[5]=a=>pa.value="tasks")},"ç¦åˆ©ä»»åŠ¡",2),c("span",{class:d(["tab-item",{active:"exchange"===pa.value}]),onClick:t[6]||(t[6]=a=>pa.value="exchange")},"ç§¯åˆ†å…‘æ¢",2)])]),c("div",G,[c("div",J,[c("span",null,[t[15]||(t[15]=r("é‚€è¯·äººæ•°",-1)),c("em",null,v(ka.value.invite_count),1),t[16]||(t[16]=r("äºº",-1))]),c("span",null,[t[17]||(t[17]=r("æˆ‘çš„ç§¯åˆ†",-1)),c("em",null,v(ka.value.available_points),1)])]),c("button",{class:"record-btn",onClick:t[7]||(t[7]=a=>ba.value=!0)},"å…‘æ¢è®°å½•")]),"tasks"===pa.value?(g(),i("div",Y,[c("div",B,[t[18]||(t[18]=o('<div class="task-icon" style="background:linear-gradient(360deg, #9e52cf, #4d45bf);" data-v-13fc3109><span data-v-13fc3109>â—‹</span></div><div class="task-info" data-v-13fc3109><div class="task-name" data-v-13fc3109>ç­¾åˆ°ä»»åŠ¡</div><div class="task-desc" data-v-13fc3109>æ¯æ—¥ç­¾åˆ° <span class="points" data-v-13fc3109>+5ç§¯åˆ†</span></div></div>',2)),c("button",{class:d(["task-btn",ma.value?"claimed":"todo"]),disabled:ma.value,onClick:Va},v(ma.value?"å·²ç­¾åˆ°":"ç­¾åˆ°"),11,K)]),t[22]||(t[22]=o('<div class="task-item" data-v-13fc3109><div class="task-icon" style="background:linear-gradient(360deg, #9e52cf, #4d45bf);" data-v-13fc3109><span data-v-13fc3109>ğŸ“·</span></div><div class="task-info" data-v-13fc3109><div class="task-name" data-v-13fc3109>æ¯æ—¥å‘å¸–</div><div class="task-desc" data-v-13fc3109>å‘å¸ƒå¸–å­ <span class="points" data-v-13fc3109>+5ç§¯åˆ†</span></div></div><button class="task-btn todo" data-v-13fc3109>å»å®Œæˆ</button></div><div class="task-item" data-v-13fc3109><div class="task-icon" style="background:linear-gradient(135deg, #22c55e, #10b981);" data-v-13fc3109><span data-v-13fc3109>âœï¸</span></div><div class="task-info" data-v-13fc3109><div class="task-name" data-v-13fc3109>å¸–å­è¯„è®º</div><div class="task-desc" data-v-13fc3109>å¸–å­è¯„è®ºåä¸ªå­—ä»¥ä¸Š è·å¾—<span class="points" data-v-13fc3109>5ç§¯åˆ†</span></div></div><button class="task-btn todo" data-v-13fc3109>å»å®Œæˆ</button></div><div class="task-item" data-v-13fc3109><div class="task-icon" style="background:linear-gradient(135deg, #22c55e, #10b981);" data-v-13fc3109><span data-v-13fc3109>âœï¸</span></div><div class="task-info" data-v-13fc3109><div class="task-name" data-v-13fc3109>è§†é¢‘è¯„è®º</div><div class="task-desc" data-v-13fc3109>è§†é¢‘è¯„è®ºåä¸ªå­—ä»¥ä¸Š è·å¾—<span class="points" data-v-13fc3109>5ç§¯åˆ†</span></div></div><button class="task-btn todo" data-v-13fc3109>å»å®Œæˆ</button></div>',3)),c("div",R,[t[19]||(t[19]=o('<div class="task-icon" style="background:linear-gradient(360deg, #9e52cf, #4d45bf);" data-v-13fc3109><span data-v-13fc3109>ğŸ‘¥</span></div><div class="task-info" data-v-13fc3109><div class="task-name" data-v-13fc3109>æ¯æ—¥é‚€è¯·</div><div class="task-desc" data-v-13fc3109>æ¯æ—¥é‚€è¯·ç”¨æˆ·<span class="points" data-v-13fc3109>+20ç§¯åˆ†</span></div></div>',2)),c("button",{class:"task-btn todo",onClick:t[8]||(t[8]=a=>s.$router.push("/user/promotion"))},"å»å®Œæˆ")]),c("div",T,[t[20]||(t[20]=o('<div class="task-icon" style="background:linear-gradient(360deg, #9e52cf, #4d45bf);" data-v-13fc3109><span data-v-13fc3109>ğŸ’</span></div><div class="task-info" data-v-13fc3109><div class="task-name" data-v-13fc3109>è´­ä¹°VIP+100ç§¯åˆ†</div><div class="task-desc" data-v-13fc3109>è´­ä¹°ä»»æ„VIP å³å¯è·å¾—<span class="points" data-v-13fc3109>100ç§¯åˆ†</span></div></div>',2)),c("button",{class:"task-btn todo",onClick:t[9]||(t[9]=a=>s.$router.push("/user/vip"))},"å»å®Œæˆ")]),c("div",U,[t[21]||(t[21]=o('<div class="task-icon" style="background:linear-gradient(360deg, #9e52cf, #4d45bf);" data-v-13fc3109><span data-v-13fc3109>â¬‡ï¸</span></div><div class="task-info" data-v-13fc3109><div class="task-name" data-v-13fc3109>ä¸‹è½½APP</div><div class="task-desc" data-v-13fc3109>ä¸‹è½½å¥½è‰²ï¼Œå³å¯è·å¾—<span class="points" data-v-13fc3109>20ç§¯åˆ†</span></div></div>',2)),c("button",{class:d(["task-btn",_a.value?"claimed":"todo"]),disabled:_a.value,onClick:Ia},v(_a.value?"å·²é¢†å–":"é¢†å–"),11,W)])])):(g(),i("div",q,[(g(!0),i(u,null,p(ga.value,(a,s)=>(g(),i("div",{key:a.id,class:d(["exchange-card",["card-theme-"+s%6,{"has-image":a.image_url}]])},[c("div",{class:"ticket-body",style:f(Da(a))},[a.image_url?l("",!0):(g(),i("div",N,[c("div",O,v(a.item_name),1),c("div",Q,v(a.item_desc||"å…‘æ¢ç²¾å½©å¥½ç¤¼"),1)]))],4),c("div",X,[c("div",Z,[t[23]||(t[23]=r("èŠ±è´¹",-1)),c("em",null,v(a.points_cost),1),t[24]||(t[24]=r("ç§¯åˆ†",-1))]),c("button",{class:"exchange-btn",disabled:ka.value.available_points<a.points_cost,onClick:s=>(async a=>{var s,t;try{const s=await _.post(`/points/exchange/${a.id}`);h.success(s.data.message),Ca(),Sa(),"vip_days"===a.item_type&&await ua.fetchUser()}catch(e){h.error((null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.detail)||"å…‘æ¢å¤±è´¥")}})(a)}," ç«‹å³å…‘æ¢ ",8,aa)])],2))),128)),0===ga.value.length?(g(),i("div",sa,[...t[25]||(t[25]=[c("span",null,"ğŸ“¦",-1),c("p",null,"æš‚æ— å¯å…‘æ¢å•†å“",-1)])])):l("",!0)])),ba.value?(g(),i("div",ta,[c("header",ea,[c("div",{class:"back-btn",onClick:t[10]||(t[10]=a=>ba.value=!1)},[...t[26]||(t[26]=[c("img",{src:a,alt:"è¿”å›",class:"back-icon"},null,-1)])]),t[27]||(t[27]=c("h1",{class:"header-title"},"ä¼šå‘˜å…‘æ¢",-1)),t[28]||(t[28]=c("div",{class:"placeholder"},null,-1))]),c("div",ia,[t[29]||(t[29]=c("div",{class:"points-label"},"å½“å‰ç§¯åˆ†",-1)),c("div",ca,v(ka.value.available_points),1)]),c("div",la,[t[31]||(t[31]=o('<h2 class="section-title" data-v-13fc3109>å…‘æ¢è®°å½•</h2><div class="records-header" data-v-13fc3109><span class="col-name" data-v-13fc3109>å…‘æ¢</span><span class="col-type" data-v-13fc3109>å…‘æ¢ç±»å‹</span><span class="col-time" data-v-13fc3109>å…‘æ¢æ—¶é—´</span></div>',2)),c("div",da,[(g(!0),i(u,null,p(fa.value,a=>{return g(),i("div",{key:a.id,class:"record-row"},[c("span",na,v(a.item_name),1),c("span",va,v((s=a.item_type,{vip_days:"VIPä¼šå‘˜",coins:"é‡‘å¸",ai_tech:"AIç§‘æŠ€åˆ¸",blind_box:"æƒ…è¶£ç›²ç›’"}[s]||s)),1),c("span",ra,v(Pa(a.created_at)),1)]);var s}),128)),0===fa.value.length?(g(),i("div",oa,[...t[30]||(t[30]=[c("p",null,"æš‚æ— å…‘æ¢è®°å½•",-1)])])):l("",!0)])])])):l("",!0)])}}},[["__scopeId","data-v-13fc3109"]]);export{ua as default};
