/* empty css             *//* empty css                   *//* empty css                    *//* empty css                 *//* empty css                 *//* empty css                 *//* empty css                       *//* empty css                   *//* empty css                  *//* empty css               *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{r as e,l,c as a,j as t,y as o,C as i,O as n,L as u,F as s,z as d,K as r,u as c,G as p,I as v,E as m,M as _,aa as f,ae as h,H as y}from"./vue-vendor-Ba_vealp.js";import{E as g,be as b,bk as w,bh as V,bi as x,bj as k,aM as C,aQ as U,a6 as z,bn as $,bo as j,bs as N,bt as T,bl as L,bm as O,aT as M,aR as S,aS as A,bv as q,bc as X,bd as D,bw as R,bC as W,aF as I,bf as F,by as B,bM as E,bN as K,bO as P,bI as G,bp as H,$ as Q,_ as J,a1 as Y,a as Z}from"./element-plus-DlIn_qXi.js";import{_ as ee,a as le}from"./index-C3P4JTuA.js";import"./utils-DflAyOWx.js";const ae={class:"novel-manage"},te={class:"stats-row"},oe={class:"stat-card"},ie={class:"stat-value"},ne={class:"stat-card"},ue={class:"stat-value"},se={class:"stat-card"},de={class:"stat-value"},re={class:"stat-card"},ce={class:"stat-value"},pe={class:"card-header"},ve={class:"card-header"},me={class:"filters"},_e={class:"header-actions"},fe={class:"novel-title-cell"},he={class:"title"},ye={class:"author"},ge={class:"data-cell"},be={key:0,class:"batch-actions"},we={class:"cover-upload"},Ve={key:1,class:"cover-placeholder"},xe={class:"cover-url-input"},ke={class:"audio-upload-section"},Ce={key:0,class:"audio-preview"},Ue=["src"],ze={class:"content-stats"},$e={class:"chapters-toolbar"},je={class:"toolbar-left"},Ne={class:"toolbar-right"},Te={key:0},Le={key:1},Oe={class:"chapters-footer"},Me={class:"tip-text"},Se={class:"audio-upload"},Ae={key:0,class:"audio-preview"},qe=["src"],Xe={class:"content-stats"},De={key:0},Re={key:0},We={key:1},Ie={class:"cover-upload-inline"},Fe={key:1,class:"cover-placeholder-small"},Be={key:0,class:"el-upload__tip"},Ee={key:1,class:"el-upload__tip"},Ke={key:1},Pe={class:"parse-results"},Ge={class:"novel-header"},He={class:"chapters-preview"},Qe={class:"chapters-stats"},Je={key:0,class:"empty-parse"},Ye={key:2},Ze={class:"import-progress"},el={class:"progress-text"},ll={key:0,class:"import-logs"},al=ee({__name:"NovelManage",setup(ee){const al=e(!1),tl=e(!1),ol=e(!1),il=e(!1);e(!1);const nl=e([]),ul=e([]),sl=e([]),dl=e(null),rl=e([]),cl=e([]),pl=l({page:1,pageSize:20,total:0}),vl=l({category_id:null,novel_type:null,status:null,keyword:""}),ml=l({total_novels:0,total_chapters:0,total_views:0,reading_users:0}),_l=e(!1),fl=l({id:null,name:"",novel_type:"text",sort_order:0,is_active:!0}),hl=e(!1),yl=l({id:null,category_id:null,title:"",author:"",cover:"",description:"",novel_type:"text",status:"ongoing",is_hot:!1,is_recommended:!1,first_chapter_title:"",first_chapter_content:"",first_chapter_audio:"",content_input_type:"text",txt_file_list:[]}),gl=e(!1),bl=e(!1),wl=l({id:null,chapter_num:1,title:"",content:"",audio_url:"",is_free:!0}),Vl=e(!1),xl=l({start_num:1,separator:"====",is_free:!0,content:""}),kl=e(!1),Cl=l({novel_type:"text",category_id:null,freeChapters:3,audioNovelTitle:"",audioNovelAuthor:"",audioNovelDesc:"",audioNovelCover:""}),Ul=e([]),zl=e(0),$l=e([]),jl=e(0),Nl=e(""),Tl=e(""),Ll=e([]),Ol=e(!1),Ml=e(!1),Sl=a(()=>`${le.defaults.baseURL}/admin/gallery-novel/upload/image`),Al=a(()=>`${le.defaults.baseURL}/admin/gallery-novel/upload/audio`),ql=a(()=>({Authorization:`Bearer ${localStorage.getItem("token")}`})),Xl=a(()=>vl.novel_type?nl.value.filter(e=>e.novel_type===vl.novel_type):nl.value),Dl=a(()=>nl.value.filter(e=>e.novel_type===yl.novel_type)),Rl=a(()=>nl.value.filter(e=>e.novel_type===Cl.novel_type));async function Wl(){var e,l;try{const{data:e}=await le.get("/admin/gallery-novel/novel/statistics");ml.total_novels=e.total_novels||0,ml.total_chapters=e.total_chapters||0,ml.total_views=e.total_views||0,ml.reading_users=e.reading_users||0}catch(a){try{const{data:a}=await le.get("/admin/gallery-novel/novels",{params:{page:1,page_size:100}});ml.total_novels=a.total||0,ml.total_chapters=(null==(e=a.items)?void 0:e.reduce((e,l)=>e+(l.chapter_count||0),0))||0,ml.total_views=(null==(l=a.items)?void 0:l.reduce((e,l)=>e+(l.view_count||0),0))||0,ml.reading_users=Math.floor(ml.total_views/10)}catch(t){}}}async function Il(){try{const{data:e}=await le.get("/admin/gallery-novel/novel/categories");nl.value=e}catch(e){g.error("åŠ è½½åˆ†ç±»å¤±è´¥")}}async function Fl(){al.value=!0;try{const e={page:pl.page,page_size:pl.pageSize,...vl};Object.keys(e).forEach(l=>{e[l]||delete e[l]});const{data:l}=await le.get("/admin/gallery-novel/novels",{params:e});ul.value=l.items,pl.total=l.total}catch(e){g.error("åŠ è½½å°è¯´å¤±è´¥")}finally{al.value=!1}}function Bl(e){rl.value=e}function El(e){cl.value=e}function Kl(e=null){e?Object.assign(fl,e):Object.assign(fl,{id:null,name:"",novel_type:"text",sort_order:0,is_active:!0}),_l.value=!0}async function Pl(){if(!fl.name)return g.warning("è¯·è¾“å…¥åˆ†ç±»åç§°");try{fl.id?await le.put(`/admin/gallery-novel/novel/categories/${fl.id}`,fl):await le.post("/admin/gallery-novel/novel/categories",fl),g.success("ä¿å­˜æˆåŠŸ"),_l.value=!1,Il()}catch(e){g.error("ä¿å­˜å¤±è´¥")}}function Gl(e=null){e?(Object.assign(yl,e),yl.first_chapter_title="",yl.first_chapter_content="",yl.first_chapter_audio="",yl.content_input_type="text",yl.txt_file_list=[]):Object.assign(yl,{id:null,category_id:null,title:"",author:"",cover:"",description:"",novel_type:"text",status:"ongoing",is_hot:!1,is_recommended:!1,first_chapter_title:"",first_chapter_content:"",first_chapter_audio:"",content_input_type:"text",txt_file_list:[]}),hl.value=!0}function Hl(e){const l=e.type.startsWith("image/"),a=e.size/1024/1024<10;return l?!!a||(g.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 10MB"),!1):(g.error("åªèƒ½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶"),!1)}function Ql(e){e.url?(yl.cover=e.url,g.success("å°é¢ä¸Šä¼ æˆåŠŸ")):g.error("ä¸Šä¼ å¤±è´¥")}function Jl(e){Ml.value=!1,e.url?(yl.first_chapter_audio=e.url,g.success("éŸ³é¢‘ä¸Šä¼ æˆåŠŸ")):g.error("ä¸Šä¼ å¤±è´¥")}function Yl(e,l){yl.txt_file_list=l.slice(-1)}async function Zl(){if(!yl.title||!yl.cover)return g.warning("è¯·å¡«å†™æ ‡é¢˜å’Œå°é¢");tl.value=!0;try{let l=yl.id;if(yl.id)await le.put(`/admin/gallery-novel/novels/${yl.id}`,yl);else{const{data:e}=await le.post("/admin/gallery-novel/novels",yl);l=e.id}if(!yl.id&&l){let a=!1,t={chapter_num:1,title:yl.first_chapter_title||"ç¬¬1ç« ",is_free:!0};if("audio"===yl.novel_type&&yl.first_chapter_audio)t.audio_url=yl.first_chapter_audio,t.content="",a=!0;else if("text"===yl.novel_type)if("text"===yl.content_input_type&&yl.first_chapter_content)t.content=yl.first_chapter_content,a=!0;else if("file"===yl.content_input_type&&yl.txt_file_list.length>0){try{const e=yl.txt_file_list[0].raw,a=fa(await e.text(),e.name);for(let t=0;t<a.chapters.length;t++){const e=a.chapters[t];await le.post(`/admin/gallery-novel/novels/${l}/chapters`,{chapter_num:e.chapter_num,title:e.title,content:e.content,is_free:t<3})}g.success(`æˆåŠŸå¯¼å…¥ ${a.chapters.length} ç« `)}catch(e){g.warning("TXTæ–‡ä»¶è§£æå¤±è´¥")}a=!1}if(a)try{await le.post(`/admin/gallery-novel/novels/${l}/chapters`,t)}catch(e){}}g.success("ä¿å­˜æˆåŠŸ"),hl.value=!1,Fl(),Wl()}catch(e){g.error("ä¿å­˜å¤±è´¥")}finally{tl.value=!1}}async function ea(e,l){try{await le.put(`/admin/gallery-novel/novels/${e.id}`,{[l]:e[l]})}catch(a){g.error("æ›´æ–°å¤±è´¥"),e[l]=!e[l]}}async function la(e){try{for(const l of rl.value)await le.put(`/admin/gallery-novel/novels/${l.id}`,{is_hot:e});g.success("æ‰¹é‡æ›´æ–°æˆåŠŸ"),Fl()}catch(l){g.error("æ‰¹é‡æ›´æ–°å¤±è´¥")}}async function aa(){await Z.confirm(`ç¡®å®šåˆ é™¤é€‰ä¸­çš„ ${rl.value.length} æœ¬å°è¯´ï¼Ÿ`,"æç¤º",{type:"warning"});try{for(const e of rl.value)await le.delete(`/admin/gallery-novel/novels/${e.id}`);g.success("æ‰¹é‡åˆ é™¤æˆåŠŸ"),rl.value=[],Fl(),Wl()}catch(e){g.error("æ‰¹é‡åˆ é™¤å¤±è´¥")}}async function ta(e){dl.value=e,cl.value=[];try{const{data:l}=await le.get(`/admin/gallery-novel/novels/${e.id}/chapters`);sl.value=l,gl.value=!0}catch(l){g.error("åŠ è½½ç« èŠ‚å¤±è´¥")}}function oa(e=null){if(e)Object.assign(wl,e);else{const e=sl.value.length>0?Math.max(...sl.value.map(e=>e.chapter_num)):0;Object.assign(wl,{id:null,chapter_num:e+1,title:"",content:"",audio_url:"",is_free:!0})}bl.value=!0}function ia(e){const l=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return[".mp3",".wav",".ogg",".m4a",".aac"].includes(l)?e.size/1024/1024>100?(g.error("éŸ³é¢‘æ–‡ä»¶ä¸èƒ½è¶…è¿‡ 100MB"),!1):(Ol.value=!0,!0):(g.error("åªæ”¯æŒ mp3/wav/ogg/m4a/aac æ ¼å¼"),!1)}function na(e){Ol.value=!1,e.url?(wl.audio_url=e.url,g.success("éŸ³é¢‘ä¸Šä¼ æˆåŠŸ")):g.error("ä¸Šä¼ å¤±è´¥")}async function ua(){if(!wl.title)return g.warning("è¯·è¾“å…¥ç« èŠ‚æ ‡é¢˜");ol.value=!0;try{wl.id?await le.put(`/admin/gallery-novel/novels/${dl.value.id}/chapters/${wl.id}`,wl):await le.post(`/admin/gallery-novel/novels/${dl.value.id}/chapters`,wl),g.success("ä¿å­˜æˆåŠŸ"),bl.value=!1,ta(dl.value),Fl(),Wl()}catch(e){g.error("ä¿å­˜å¤±è´¥")}finally{ol.value=!1}}async function sa(e){try{for(const l of cl.value)await le.put(`/admin/gallery-novel/novels/${dl.value.id}/chapters/${l.id}`,{is_free:e});g.success("æ‰¹é‡æ›´æ–°æˆåŠŸ"),ta(dl.value)}catch(l){g.error("æ‰¹é‡æ›´æ–°å¤±è´¥")}}function da(){const e=sl.value.length>0?Math.max(...sl.value.map(e=>e.chapter_num)):0;Object.assign(xl,{start_num:e+1,separator:"====",is_free:!0,content:""}),Vl.value=!0}async function ra(){var e;if(!xl.content.trim())return g.warning("è¯·è¾“å…¥ç« èŠ‚å†…å®¹");const l=xl.separator||"====",a=xl.content.split(l).filter(e=>e.trim());if(0===a.length)return g.warning("æœªè¯†åˆ«åˆ°ç« èŠ‚å†…å®¹");il.value=!0;let t=0;try{for(let l=0;l<a.length;l++){const o=a[l].trim().split("\n"),i=(null==(e=o[0])?void 0:e.trim())||`ç¬¬${xl.start_num+l}ç« `,n=o.slice(1).join("\n").trim();await le.post(`/admin/gallery-novel/novels/${dl.value.id}/chapters`,{chapter_num:xl.start_num+l,title:i,content:n,is_free:xl.is_free}),t++}g.success(`æˆåŠŸæ·»åŠ  ${t} ç« `),Vl.value=!1,ta(dl.value),Fl(),Wl()}catch(o){g.error(`æ·»åŠ å¤±è´¥ï¼Œå·²æˆåŠŸ ${t} ç« `)}finally{il.value=!1}}function ca(){Ul.value=[],zl.value=0,$l.value=[],jl.value=0,Nl.value="",Tl.value="",Ll.value=[],Cl.audioNovelTitle="",Cl.audioNovelAuthor="",Cl.audioNovelDesc="",Cl.audioNovelCover="",kl.value=!0}function pa(){Ul.value=[]}function va(e,l){Ul.value=l}function ma(e){e.url&&(Cl.audioNovelCover=e.url,g.success("å°é¢ä¸Šä¼ æˆåŠŸ"))}async function _a(){"text"===Cl.novel_type?await async function(){$l.value=[];for(const l of Ul.value)try{const e=l.raw,a=fa(await e.text(),e.name);$l.value.push(a)}catch(e){g.warning(`è§£æ ${l.name} å¤±è´¥`)}$l.value.length>0&&(zl.value=1)}():await async function(){if(!Cl.audioNovelTitle)return void g.warning("è¯·è¾“å…¥å°è¯´æ ‡é¢˜");const e=[...Ul.value].sort((e,l)=>e.name.localeCompare(l.name,"zh-CN",{numeric:!0})).map((e,l)=>{const a=e.name,t=function(e,l){let a=e.replace(/\.(mp3|wav|ogg|m4a|aac)$/i,"");if(a=a.replace(/^\d+[._\-\s]*/,""),a.trim())return a.trim();return`ç¬¬${l}ç« `}(a,l+1);return{chapter_num:l+1,title:t,file:e.raw,filename:a,audio_url:""}});$l.value=[{title:Cl.audioNovelTitle,author:Cl.audioNovelAuthor||"ä½šå",description:Cl.audioNovelDesc,cover:Cl.audioNovelCover,chapters:e,totalWords:0,isAudio:!0}],zl.value=1}()}function fa(e,l){const a=e.split(/\r?\n/);let t=l.replace(/\.txt$/i,""),o="ä½šå",i="";const n=[];let u=null,s=0,d=!1,r=[];const c=/^(ç¬¬[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒä¸‡\d]+[ç« å›èŠ‚å·éƒ¨é›†ç¯‡]|Chapter\s*\d+|å·[é›¶ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒä¸‡\d]+|åºç« |åºè¨€|æ¥”å­|å°¾å£°|ç•ªå¤–|åè®°)/i;for(let v=0;v<a.length;v++){const e=a[v].trim();if(e||u)if(!(v<10)||u||e.startsWith("ä½œè€…")||e.startsWith("ç®€ä»‹")||e.startsWith("å†…å®¹ç®€ä»‹")||c.test(e)||0!==s)if(e.match(/^ä½œè€…[ï¼š:]\s*(.+)$/))o=e.replace(/^ä½œè€…[ï¼š:]\s*/,"").trim();else if(e.match(/^(ç®€ä»‹|å†…å®¹ç®€ä»‹|ä½œå“ç®€ä»‹)[ï¼š:]?\s*$/i))d=!0;else{if(d){if(!c.test(e)){r.push(e);continue}d=!1,i=r.join("\n").trim()}c.test(e)?(u&&(u.content=u.contentLines.join("\n").trim(),u.wordCount=u.content.length,delete u.contentLines,n.push(u)),u={chapter_num:n.length+1,title:e,contentLines:[],content:"",wordCount:0}):u&&u.contentLines.push(e)}else t&&t!==l.replace(/\.txt$/i,"")||(t=e.replace(/^ã€Š|ã€‹$/g,"").trim()),s=v+1}if(u&&(u.content=u.contentLines.join("\n").trim(),u.wordCount=u.content.length,delete u.contentLines,n.push(u)),0===n.length&&e.trim()){const e=a.slice(s).join("\n").trim();e&&n.push({chapter_num:1,title:"ç¬¬ä¸€ç« ",content:e,wordCount:e.length})}!i&&n.length>0&&(i=n[0].content.substring(0,200)+"...");const p=n.reduce((e,l)=>e+l.wordCount,0);return{title:t,author:o,description:i,chapters:n,totalWords:p}}async function ha(){var e,l;zl.value=2,jl.value=0,Nl.value="",Ll.value=[];const a=$l.value.length;let t=0;for(let n=0;n<$l.value.length;n++){const u=$l.value[n];Tl.value=`æ­£åœ¨å¯¼å…¥: ${u.title} (${n+1}/${a})`;try{Ll.value.push({type:"info",message:`åˆ›å»ºå°è¯´: ${u.title}`});const{data:e}=await le.post("/admin/gallery-novel/novels",{title:u.title,author:u.author||"ä½šå",description:u.description,novel_type:Cl.novel_type,category_id:Cl.category_id,cover:u.cover||"/images/default-novel-cover.webp",status:"ongoing"});for(let l=0;l<u.chapters.length;l++){const t=u.chapters[l];if(u.isAudio&&t.file){Ll.value.push({type:"info",message:`ä¸Šä¼ éŸ³é¢‘: ${t.filename}`});const e=new FormData;e.append("file",t.file);try{const l=await le.post("/admin/gallery-novel/upload/audio",e,{headers:{"Content-Type":"multipart/form-data"}});t.audio_url=l.data.url}catch(o){Ll.value.push({type:"error",message:`éŸ³é¢‘ä¸Šä¼ å¤±è´¥: ${t.filename}`});continue}}const i={chapter_num:t.chapter_num,title:t.title,is_free:l<Cl.freeChapters};u.isAudio?(i.audio_url=t.audio_url,i.content=""):i.content=t.content,await le.post(`/admin/gallery-novel/novels/${e.id}/chapters`,i);const s=(l+1)/u.chapters.length*(100/a);jl.value=Math.floor(100*n/a+s)}Ll.value.push({type:"success",message:`âœ“ ${u.title} - ${u.chapters.length}ç« å¯¼å…¥æˆåŠŸ`}),t++}catch(i){Ll.value.push({type:"error",message:`âœ— ${u.title} å¯¼å…¥å¤±è´¥: ${(null==(l=null==(e=i.response)?void 0:e.data)?void 0:l.detail)||i.message}`})}}jl.value=100,Nl.value=t===a?"success":"warning",Tl.value=`å¯¼å…¥å®Œæˆ: æˆåŠŸ ${t}/${a} æœ¬`}function ya(){kl.value=!1,Fl(),Wl()}return t(()=>{Il(),Fl(),Wl()}),(e,l)=>{var a;const t=U,ee=C,fa=x,ga=k,ba=V,wa=b,Va=O,xa=L,ka=M,Ca=$,Ua=j,za=T,$a=A,ja=q,Na=S,Ta=w,La=D,Oa=X,Ma=R,Sa=W,Aa=B,qa=F,Xa=E,Da=P,Ra=K,Wa=G,Ia=H,Fa=N;return d(),o("div",ae,[i("div",te,[i("div",oe,[i("div",ie,u(ml.total_novels),1),l[59]||(l[59]=i("div",{class:"stat-label"},"å°è¯´æ€»æ•°",-1))]),i("div",ne,[i("div",ue,u(ml.total_chapters),1),l[60]||(l[60]=i("div",{class:"stat-label"},"ç« èŠ‚æ€»æ•°",-1))]),i("div",se,[i("div",de,u(ml.total_views),1),l[61]||(l[61]=i("div",{class:"stat-label"},"æ€»æµè§ˆé‡",-1))]),i("div",re,[i("div",ce,u(ml.reading_users),1),l[62]||(l[62]=i("div",{class:"stat-label"},"é˜…è¯»ç”¨æˆ·",-1))])]),n(wa,{class:"category-card",shadow:"never"},{header:s(()=>[i("div",pe,[l[64]||(l[64]=i("span",null,"å°è¯´åˆ†ç±»",-1)),n(ee,{type:"primary",size:"small",onClick:l[0]||(l[0]=e=>Kl())},{default:s(()=>[n(t,null,{default:s(()=>[n(c(z))]),_:1}),l[63]||(l[63]=r("æ·»åŠ åˆ†ç±» ",-1))]),_:1})])]),default:s(()=>[n(ba,{data:nl.value,size:"small"},{default:s(()=>[n(fa,{prop:"name",label:"åˆ†ç±»åç§°"}),n(fa,{label:"ç±»å‹",width:"100"},{default:s(({row:e})=>[n(ga,{type:"text"===e.novel_type?"primary":"success",size:"small"},{default:s(()=>[r(u("text"===e.novel_type?"æ–‡å­—":"æœ‰å£°"),1)]),_:2},1032,["type"])]),_:1}),n(fa,{prop:"novel_count",label:"å°è¯´æ•°",width:"80"}),n(fa,{prop:"sort_order",label:"æ’åº",width:"80"}),n(fa,{label:"çŠ¶æ€",width:"80"},{default:s(({row:e})=>[n(ga,{type:e.is_active?"success":"info",size:"small"},{default:s(()=>[r(u(e.is_active?"å¯ç”¨":"ç¦ç”¨"),1)]),_:2},1032,["type"])]),_:1}),n(fa,{label:"æ“ä½œ",width:"120"},{default:s(({row:e})=>[n(ee,{type:"primary",link:"",size:"small",onClick:l=>Kl(e)},{default:s(()=>[...l[65]||(l[65]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),n(ee,{type:"danger",link:"",size:"small",onClick:l=>async function(e){await Z.confirm("ç¡®å®šåˆ é™¤è¯¥åˆ†ç±»ï¼Ÿ","æç¤º");try{await le.delete(`/admin/gallery-novel/novel/categories/${e.id}`),g.success("åˆ é™¤æˆåŠŸ"),Il()}catch(l){g.error("åˆ é™¤å¤±è´¥")}}(e)},{default:s(()=>[...l[66]||(l[66]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),n(wa,{shadow:"never"},{header:s(()=>[i("div",ve,[i("div",me,[n(xa,{modelValue:vl.novel_type,"onUpdate:modelValue":l[1]||(l[1]=e=>vl.novel_type=e),placeholder:"ç±»å‹",clearable:"",style:{width:"100px"}},{default:s(()=>[n(Va,{label:"æ–‡å­—",value:"text"}),n(Va,{label:"æœ‰å£°",value:"audio"})]),_:1},8,["modelValue"]),n(xa,{modelValue:vl.category_id,"onUpdate:modelValue":l[2]||(l[2]=e=>vl.category_id=e),placeholder:"é€‰æ‹©åˆ†ç±»",clearable:"",style:{width:"150px"}},{default:s(()=>[(d(!0),o(_,null,f(Xl.value,e=>(d(),m(Va,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n(xa,{modelValue:vl.status,"onUpdate:modelValue":l[3]||(l[3]=e=>vl.status=e),placeholder:"çŠ¶æ€",clearable:"",style:{width:"100px"}},{default:s(()=>[n(Va,{label:"è¿è½½ä¸­",value:"ongoing"}),n(Va,{label:"å·²å®Œç»“",value:"completed"})]),_:1},8,["modelValue"]),n(ka,{modelValue:vl.keyword,"onUpdate:modelValue":l[4]||(l[4]=e=>vl.keyword=e),placeholder:"æœç´¢æ ‡é¢˜/ä½œè€…",clearable:"",style:{width:"180px"},onKeyup:h(Fl,["enter"])},null,8,["modelValue"]),n(ee,{type:"primary",onClick:Fl},{default:s(()=>[...l[67]||(l[67]=[r("æœç´¢",-1)])]),_:1})]),i("div",_e,[n(ee,{onClick:ca},{default:s(()=>[...l[68]||(l[68]=[r("æ‰¹é‡å¯¼å…¥",-1)])]),_:1}),n(ee,{type:"primary",onClick:l[5]||(l[5]=e=>Gl())},{default:s(()=>[n(t,null,{default:s(()=>[n(c(z))]),_:1}),l[69]||(l[69]=r("æ·»åŠ å°è¯´ ",-1))]),_:1})])])]),default:s(()=>[p((d(),m(ba,{data:ul.value,onSelectionChange:Bl},{default:s(()=>[n(fa,{type:"selection",width:"50"}),n(fa,{label:"å°é¢",width:"80"},{default:s(({row:e})=>[n(Ca,{src:e.cover,style:{width:"50px",height:"70px"},fit:"cover"},null,8,["src"])]),_:1}),n(fa,{prop:"title",label:"æ ‡é¢˜","min-width":"150"},{default:s(({row:e})=>[i("div",fe,[i("span",he,u(e.title),1),i("span",ye,u(e.author||"ä½šå"),1)])]),_:1}),n(fa,{prop:"category_name",label:"åˆ†ç±»",width:"100"}),n(fa,{label:"ç±»å‹",width:"80"},{default:s(({row:e})=>[n(ga,{type:"text"===e.novel_type?"primary":"success",size:"small"},{default:s(()=>[r(u("text"===e.novel_type?"æ–‡å­—":"æœ‰å£°"),1)]),_:2},1032,["type"])]),_:1}),n(fa,{label:"ç« èŠ‚",width:"100"},{default:s(({row:e})=>[i("span",null,u(e.chapter_count)+"ç« ",1),"completed"===e.status?(d(),m(ga,{key:0,type:"success",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[...l[70]||(l[70]=[r("å®Œç»“",-1)])]),_:1})):v("",!0)]),_:1}),n(fa,{label:"æ•°æ®",width:"140"},{default:s(({row:e})=>[i("div",ge,[i("span",null,"ğŸ‘ "+u(e.view_count||0),1),i("span",null,"â¤ï¸ "+u(e.like_count||0),1)])]),_:1}),n(fa,{label:"çƒ­é—¨",width:"70"},{default:s(({row:e})=>[n(Ua,{modelValue:e.is_hot,"onUpdate:modelValue":l=>e.is_hot=l,size:"small",onChange:l=>ea(e,"is_hot")},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(fa,{label:"æ¨è",width:"70"},{default:s(({row:e})=>[n(Ua,{modelValue:e.is_recommended,"onUpdate:modelValue":l=>e.is_recommended=l,size:"small",onChange:l=>ea(e,"is_recommended")},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(fa,{label:"æ“ä½œ",width:"180",fixed:"right"},{default:s(({row:e})=>[n(ee,{type:"primary",link:"",size:"small",onClick:l=>Gl(e)},{default:s(()=>[...l[71]||(l[71]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),n(ee,{type:"success",link:"",size:"small",onClick:l=>ta(e)},{default:s(()=>[...l[72]||(l[72]=[r("ç« èŠ‚",-1)])]),_:1},8,["onClick"]),n(ee,{type:"danger",link:"",size:"small",onClick:l=>async function(e){await Z.confirm("ç¡®å®šåˆ é™¤è¯¥å°è¯´åŠæ‰€æœ‰ç« èŠ‚ï¼Ÿ","æç¤º",{type:"warning"});try{await le.delete(`/admin/gallery-novel/novels/${e.id}`),g.success("åˆ é™¤æˆåŠŸ"),Fl(),Wl()}catch(l){g.error("åˆ é™¤å¤±è´¥")}}(e)},{default:s(()=>[...l[73]||(l[73]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Fa,al.value]]),rl.value.length>0?(d(),o("div",be,[i("span",null,"å·²é€‰ "+u(rl.value.length)+" é¡¹",1),n(ee,{size:"small",onClick:l[6]||(l[6]=e=>la(!0))},{default:s(()=>[...l[74]||(l[74]=[r("è®¾ä¸ºçƒ­é—¨",-1)])]),_:1}),n(ee,{size:"small",onClick:l[7]||(l[7]=e=>la(!1))},{default:s(()=>[...l[75]||(l[75]=[r("å–æ¶ˆçƒ­é—¨",-1)])]),_:1}),n(ee,{size:"small",type:"danger",onClick:aa},{default:s(()=>[...l[76]||(l[76]=[r("æ‰¹é‡åˆ é™¤",-1)])]),_:1})])):v("",!0),n(za,{"current-page":pl.page,"onUpdate:currentPage":l[8]||(l[8]=e=>pl.page=e),"page-size":pl.pageSize,"onUpdate:pageSize":l[9]||(l[9]=e=>pl.pageSize=e),total:pl.total,"page-sizes":[20,50,100],layout:"total, sizes, prev, pager, next",onCurrentChange:Fl,onSizeChange:Fl,style:{"margin-top":"16px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),n(Ta,{modelValue:_l.value,"onUpdate:modelValue":l[15]||(l[15]=e=>_l.value=e),title:fl.id?"ç¼–è¾‘åˆ†ç±»":"æ·»åŠ åˆ†ç±»",width:"400px"},{footer:s(()=>[n(ee,{onClick:l[14]||(l[14]=e=>_l.value=!1)},{default:s(()=>[...l[77]||(l[77]=[r("å–æ¶ˆ",-1)])]),_:1}),n(ee,{type:"primary",onClick:Pl},{default:s(()=>[...l[78]||(l[78]=[r("ä¿å­˜",-1)])]),_:1})]),default:s(()=>[n(Na,{model:fl,"label-width":"80px"},{default:s(()=>[n($a,{label:"åˆ†ç±»åç§°",required:""},{default:s(()=>[n(ka,{modelValue:fl.name,"onUpdate:modelValue":l[10]||(l[10]=e=>fl.name=e)},null,8,["modelValue"])]),_:1}),n($a,{label:"ç±»å‹",required:""},{default:s(()=>[n(xa,{modelValue:fl.novel_type,"onUpdate:modelValue":l[11]||(l[11]=e=>fl.novel_type=e),style:{width:"100%"}},{default:s(()=>[n(Va,{label:"æ–‡å­—å°è¯´",value:"text"}),n(Va,{label:"æœ‰å£°å°è¯´",value:"audio"})]),_:1},8,["modelValue"])]),_:1}),n($a,{label:"æ’åº"},{default:s(()=>[n(ja,{modelValue:fl.sort_order,"onUpdate:modelValue":l[12]||(l[12]=e=>fl.sort_order=e),min:0},null,8,["modelValue"])]),_:1}),n($a,{label:"çŠ¶æ€"},{default:s(()=>[n(Ua,{modelValue:fl.is_active,"onUpdate:modelValue":l[13]||(l[13]=e=>fl.is_active=e),"active-text":"å¯ç”¨","inactive-text":"ç¦ç”¨"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),n(Ta,{modelValue:hl.value,"onUpdate:modelValue":l[31]||(l[31]=e=>hl.value=e),title:yl.id?"ç¼–è¾‘å°è¯´":"æ·»åŠ å°è¯´",width:"700px"},{footer:s(()=>[n(ee,{onClick:l[30]||(l[30]=e=>hl.value=!1)},{default:s(()=>[...l[85]||(l[85]=[r("å–æ¶ˆ",-1)])]),_:1}),n(ee,{type:"primary",onClick:Zl,loading:tl.value},{default:s(()=>[...l[86]||(l[86]=[r("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:s(()=>[n(Na,{model:yl,"label-width":"80px"},{default:s(()=>[n(Oa,{gutter:20},{default:s(()=>[n(La,{span:12},{default:s(()=>[n($a,{label:"æ ‡é¢˜",required:""},{default:s(()=>[n(ka,{modelValue:yl.title,"onUpdate:modelValue":l[16]||(l[16]=e=>yl.title=e)},null,8,["modelValue"])]),_:1})]),_:1}),n(La,{span:12},{default:s(()=>[n($a,{label:"ä½œè€…"},{default:s(()=>[n(ka,{modelValue:yl.author,"onUpdate:modelValue":l[17]||(l[17]=e=>yl.author=e),placeholder:"é»˜è®¤ï¼šä½šå"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(Oa,{gutter:20},{default:s(()=>[n(La,{span:12},{default:s(()=>[n($a,{label:"ç±»å‹",required:""},{default:s(()=>[n(xa,{modelValue:yl.novel_type,"onUpdate:modelValue":l[18]||(l[18]=e=>yl.novel_type=e),style:{width:"100%"}},{default:s(()=>[n(Va,{label:"æ–‡å­—å°è¯´",value:"text"}),n(Va,{label:"æœ‰å£°å°è¯´",value:"audio"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(La,{span:12},{default:s(()=>[n($a,{label:"åˆ†ç±»"},{default:s(()=>[n(xa,{modelValue:yl.category_id,"onUpdate:modelValue":l[19]||(l[19]=e=>yl.category_id=e),placeholder:"é€‰æ‹©åˆ†ç±»",clearable:"",style:{width:"100%"}},{default:s(()=>[(d(!0),o(_,null,f(Dl.value,e=>(d(),m(Va,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n($a,{label:"å°é¢",required:""},{default:s(()=>[i("div",we,[n(Ma,{class:"cover-uploader",action:Sl.value,headers:ql.value,data:{subdir:"novel"},"show-file-list":!1,"on-success":Ql,"before-upload":Hl,accept:"image/*"},{default:s(()=>[yl.cover?(d(),m(Ca,{key:0,src:yl.cover,class:"cover-preview",fit:"cover"},null,8,["src"])):(d(),o("div",Ve,[n(t,null,{default:s(()=>[n(c(z))]),_:1}),l[79]||(l[79]=i("span",null,"ä¸Šä¼ å°é¢",-1))]))]),_:1},8,["action","headers"]),i("div",xe,[n(ka,{modelValue:yl.cover,"onUpdate:modelValue":l[20]||(l[20]=e=>yl.cover=e),placeholder:"æˆ–è¾“å…¥å°é¢URL",clearable:""},null,8,["modelValue"])])])]),_:1}),n(Oa,{gutter:20},{default:s(()=>[n(La,{span:8},{default:s(()=>[n($a,{label:"çŠ¶æ€"},{default:s(()=>[n(xa,{modelValue:yl.status,"onUpdate:modelValue":l[21]||(l[21]=e=>yl.status=e),style:{width:"100%"}},{default:s(()=>[n(Va,{label:"è¿è½½ä¸­",value:"ongoing"}),n(Va,{label:"å·²å®Œç»“",value:"completed"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(La,{span:8},{default:s(()=>[n($a,{label:"çƒ­é—¨"},{default:s(()=>[n(Ua,{modelValue:yl.is_hot,"onUpdate:modelValue":l[22]||(l[22]=e=>yl.is_hot=e)},null,8,["modelValue"])]),_:1})]),_:1}),n(La,{span:8},{default:s(()=>[n($a,{label:"æ¨è"},{default:s(()=>[n(Ua,{modelValue:yl.is_recommended,"onUpdate:modelValue":l[23]||(l[23]=e=>yl.is_recommended=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n($a,{label:"ç®€ä»‹"},{default:s(()=>[n(ka,{modelValue:yl.description,"onUpdate:modelValue":l[24]||(l[24]=e=>yl.description=e),type:"textarea",rows:4,placeholder:"å°è¯´ç®€ä»‹..."},null,8,["modelValue"])]),_:1}),n(Sa,{"content-position":"left"},{default:s(()=>[...l[80]||(l[80]=[r("æ·»åŠ ç« èŠ‚ï¼ˆå¯é€‰ï¼‰",-1)])]),_:1}),"audio"===yl.novel_type?(d(),o(_,{key:0},[n($a,{label:"ç« èŠ‚æ ‡é¢˜"},{default:s(()=>[n(ka,{modelValue:yl.first_chapter_title,"onUpdate:modelValue":l[25]||(l[25]=e=>yl.first_chapter_title=e),placeholder:"ç¬¬1ç«  æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),n($a,{label:"ä¸Šä¼ éŸ³é¢‘"},{default:s(()=>[i("div",ke,[n(Ma,{class:"audio-uploader",action:Al.value,headers:ql.value,"show-file-list":!1,"on-success":Jl,"before-upload":ia,accept:".mp3,.wav,.ogg,.m4a,.aac"},{default:s(()=>[n(ee,{type:"primary",loading:Ml.value},{default:s(()=>[n(t,null,{default:s(()=>[n(c(I))]),_:1}),r(" "+u(Ml.value?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶"),1)]),_:1},8,["loading"])]),_:1},8,["action","headers"]),n(ka,{modelValue:yl.first_chapter_audio,"onUpdate:modelValue":l[26]||(l[26]=e=>yl.first_chapter_audio=e),placeholder:"æˆ–è¾“å…¥éŸ³é¢‘URL",style:{"margin-left":"12px",flex:"1"}},null,8,["modelValue"])]),yl.first_chapter_audio?(d(),o("div",Ce,[i("audio",{src:yl.first_chapter_audio,controls:"",style:{width:"100%","margin-top":"8px"}},null,8,Ue)])):v("",!0)]),_:1})],64)):(d(),o(_,{key:1},[n($a,{label:"ç« èŠ‚æ ‡é¢˜"},{default:s(()=>[n(ka,{modelValue:yl.first_chapter_title,"onUpdate:modelValue":l[27]||(l[27]=e=>yl.first_chapter_title=e),placeholder:"ç¬¬1ç«  æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),n($a,{label:"å†…å®¹æ–¹å¼"},{default:s(()=>[n(qa,{modelValue:yl.content_input_type,"onUpdate:modelValue":l[28]||(l[28]=e=>yl.content_input_type=e)},{default:s(()=>[n(Aa,{label:"text"},{default:s(()=>[...l[81]||(l[81]=[r("ç›´æ¥è¾“å…¥",-1)])]),_:1}),n(Aa,{label:"file"},{default:s(()=>[...l[82]||(l[82]=[r("ä¸Šä¼ TXTæ–‡ä»¶",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),"text"===yl.content_input_type?(d(),m($a,{key:0,label:"ç« èŠ‚å†…å®¹"},{default:s(()=>[n(ka,{modelValue:yl.first_chapter_content,"onUpdate:modelValue":l[29]||(l[29]=e=>yl.first_chapter_content=e),type:"textarea",rows:8,placeholder:"è¾“å…¥ç¬¬ä¸€ç« å†…å®¹..."},null,8,["modelValue"]),i("div",ze,"å­—æ•°: "+u((yl.first_chapter_content||"").length),1)]),_:1})):(d(),m($a,{key:1,label:"ä¸Šä¼ æ–‡ä»¶"},{default:s(()=>[n(Ma,{drag:"","auto-upload":!1,limit:1,"file-list":yl.txt_file_list,onChange:Yl,accept:".txt"},{tip:s(()=>[...l[83]||(l[83]=[i("div",{class:"el-upload__tip"},"æ”¯æŒTXTæ ¼å¼ï¼Œå°†è‡ªåŠ¨è§£æç« èŠ‚",-1)])]),default:s(()=>[n(t,{class:"el-icon--upload"},{default:s(()=>[n(c(I))]),_:1}),l[84]||(l[84]=i("div",{class:"el-upload__text"},[r("æ‹–æ‹½TXTæ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–"),i("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list"])]),_:1}))],64))]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),n(Ta,{modelValue:gl.value,"onUpdate:modelValue":l[35]||(l[35]=e=>gl.value=e),title:"ç« èŠ‚ç®¡ç† - "+((null==(a=dl.value)?void 0:a.title)||""),width:"900px"},{default:s(()=>[i("div",$e,[i("div",je,[n(ee,{type:"primary",size:"small",onClick:l[32]||(l[32]=e=>oa())},{default:s(()=>[n(t,null,{default:s(()=>[n(c(z))]),_:1}),l[87]||(l[87]=r("æ·»åŠ ç« èŠ‚ ",-1))]),_:1}),n(ee,{size:"small",onClick:da},{default:s(()=>[...l[88]||(l[88]=[r("æ‰¹é‡æ·»åŠ ",-1)])]),_:1})]),i("div",Ne,[n(ee,{size:"small",onClick:l[33]||(l[33]=e=>sa(!0)),disabled:0===cl.value.length},{default:s(()=>[...l[89]||(l[89]=[r(" è®¾ä¸ºå…è´¹ ",-1)])]),_:1},8,["disabled"]),n(ee,{size:"small",onClick:l[34]||(l[34]=e=>sa(!1)),disabled:0===cl.value.length},{default:s(()=>[...l[90]||(l[90]=[r(" è®¾ä¸ºä»˜è´¹ ",-1)])]),_:1},8,["disabled"])])]),n(ba,{data:sl.value,size:"small","max-height":"450",onSelectionChange:El},{default:s(()=>[n(fa,{type:"selection",width:"50"}),n(fa,{prop:"chapter_num",label:"ç« èŠ‚",width:"70"}),n(fa,{prop:"title",label:"æ ‡é¢˜","min-width":"200"}),n(fa,{label:"å†…å®¹",width:"120"},{default:s(({row:e})=>{var l;return["audio"===(null==(l=dl.value)?void 0:l.novel_type)?(d(),o("span",Te,u(e.audio_url?"âœ“ æœ‰éŸ³é¢‘":"âœ— æ— éŸ³é¢‘"),1)):(d(),o("span",Le,u(e.content_length>0?e.content_length+"å­—":"æ— å†…å®¹"),1))]}),_:1}),n(fa,{label:"å…è´¹",width:"80"},{default:s(({row:e})=>[n(Ua,{modelValue:e.is_free,"onUpdate:modelValue":l=>e.is_free=l,size:"small",onChange:l=>async function(e){try{await le.put(`/admin/gallery-novel/novels/${dl.value.id}/chapters/${e.id}`,{is_free:e.is_free})}catch(l){g.error("æ›´æ–°å¤±è´¥"),e.is_free=!e.is_free}}(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),n(fa,{prop:"created_at",label:"åˆ›å»ºæ—¶é—´",width:"160"},{default:s(({row:e})=>{return[r(u((l=e.created_at,l?new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-")),1)];var l}),_:1}),n(fa,{label:"æ“ä½œ",width:"120",fixed:"right"},{default:s(({row:e})=>[n(ee,{type:"primary",link:"",size:"small",onClick:l=>oa(e)},{default:s(()=>[...l[91]||(l[91]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),n(ee,{type:"danger",link:"",size:"small",onClick:l=>async function(e){await Z.confirm("ç¡®å®šåˆ é™¤è¯¥ç« èŠ‚ï¼Ÿ","æç¤º");try{await le.delete(`/admin/gallery-novel/novels/${dl.value.id}/chapters/${e.id}`),g.success("åˆ é™¤æˆåŠŸ"),ta(dl.value),Fl()}catch(l){g.error("åˆ é™¤å¤±è´¥")}}(e)},{default:s(()=>[...l[92]||(l[92]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),i("div",Oe,[i("span",null,"å…± "+u(sl.value.length)+" ç« ",1),i("span",null,"å…è´¹ç« èŠ‚: "+u(sl.value.filter(e=>e.is_free).length)+" ç« ",1)])]),_:1},8,["modelValue","title"]),n(Ta,{modelValue:bl.value,"onUpdate:modelValue":l[42]||(l[42]=e=>bl.value=e),title:wl.id?"ç¼–è¾‘ç« èŠ‚":"æ·»åŠ ç« èŠ‚",width:"750px"},{footer:s(()=>[n(ee,{onClick:l[41]||(l[41]=e=>bl.value=!1)},{default:s(()=>[...l[93]||(l[93]=[r("å–æ¶ˆ",-1)])]),_:1}),n(ee,{type:"primary",onClick:ua,loading:ol.value},{default:s(()=>[...l[94]||(l[94]=[r("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:s(()=>[n(Na,{model:wl,"label-width":"80px"},{default:s(()=>{var e;return[n(Oa,{gutter:20},{default:s(()=>[n(La,{span:8},{default:s(()=>[n($a,{label:"ç« èŠ‚å·",required:""},{default:s(()=>[n(ja,{modelValue:wl.chapter_num,"onUpdate:modelValue":l[36]||(l[36]=e=>wl.chapter_num=e),min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),n(La,{span:8},{default:s(()=>[n($a,{label:"å…è´¹"},{default:s(()=>[n(Ua,{modelValue:wl.is_free,"onUpdate:modelValue":l[37]||(l[37]=e=>wl.is_free=e)},null,8,["modelValue"]),i("span",Me,u(wl.is_free?"æ‰€æœ‰ç”¨æˆ·å¯è¯»":"ä»…VIPå¯è¯»"),1)]),_:1})]),_:1})]),_:1}),n($a,{label:"æ ‡é¢˜",required:""},{default:s(()=>[n(ka,{modelValue:wl.title,"onUpdate:modelValue":l[38]||(l[38]=e=>wl.title=e),placeholder:"ç« èŠ‚æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),"audio"===(null==(e=dl.value)?void 0:e.novel_type)?(d(),m($a,{key:0,label:"éŸ³é¢‘"},{default:s(()=>[i("div",Se,[n(Ma,{class:"audio-uploader",action:Al.value,headers:ql.value,"show-file-list":!1,"on-success":na,"before-upload":ia,accept:".mp3,.wav,.ogg,.m4a,.aac"},{default:s(()=>[n(ee,{type:"primary",loading:Ol.value},{default:s(()=>[n(t,null,{default:s(()=>[n(c(I))]),_:1}),r(" "+u(Ol.value?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ éŸ³é¢‘"),1)]),_:1},8,["loading"])]),_:1},8,["action","headers"]),n(ka,{modelValue:wl.audio_url,"onUpdate:modelValue":l[39]||(l[39]=e=>wl.audio_url=e),placeholder:"æˆ–è¾“å…¥éŸ³é¢‘URL",style:{"margin-left":"12px",flex:"1"}},null,8,["modelValue"])]),wl.audio_url?(d(),o("div",Ae,[i("audio",{src:wl.audio_url,controls:"",style:{width:"100%","margin-top":"8px"}},null,8,qe)])):v("",!0)]),_:1})):(d(),m($a,{key:1,label:"å†…å®¹"},{default:s(()=>[n(ka,{modelValue:wl.content,"onUpdate:modelValue":l[40]||(l[40]=e=>wl.content=e),type:"textarea",rows:15,placeholder:"è¾“å…¥ç« èŠ‚å†…å®¹..."},null,8,["modelValue"]),i("div",Xe,"å­—æ•°: "+u((wl.content||"").length),1)]),_:1}))]}),_:1},8,["model"])]),_:1},8,["modelValue","title"]),n(Ta,{modelValue:Vl.value,"onUpdate:modelValue":l[48]||(l[48]=e=>Vl.value=e),title:"æ‰¹é‡æ·»åŠ ç« èŠ‚",width:"700px"},{footer:s(()=>[n(ee,{onClick:l[47]||(l[47]=e=>Vl.value=!1)},{default:s(()=>[...l[96]||(l[96]=[r("å–æ¶ˆ",-1)])]),_:1}),n(ee,{type:"primary",onClick:ra,loading:il.value},{default:s(()=>[...l[97]||(l[97]=[r(" æ‰¹é‡æ·»åŠ  ",-1)])]),_:1},8,["loading"])]),default:s(()=>[n(Xa,{type:"info",closable:!1,style:{"margin-bottom":"16px"}},{title:s(()=>[...l[95]||(l[95]=[r(" æ ¼å¼è¯´æ˜ï¼šæ¯ç« ç”¨åˆ†éš”ç¬¦éš”å¼€ï¼Œç¬¬ä¸€è¡Œä¸ºç« èŠ‚æ ‡é¢˜ï¼Œåé¢ä¸ºå†…å®¹ ",-1)])]),_:1}),n(Na,{"label-width":"100px"},{default:s(()=>[n($a,{label:"èµ·å§‹ç« èŠ‚å·"},{default:s(()=>[n(ja,{modelValue:xl.start_num,"onUpdate:modelValue":l[43]||(l[43]=e=>xl.start_num=e),min:1},null,8,["modelValue"])]),_:1}),n($a,{label:"ç« èŠ‚åˆ†éš”ç¬¦"},{default:s(()=>[n(ka,{modelValue:xl.separator,"onUpdate:modelValue":l[44]||(l[44]=e=>xl.separator=e),placeholder:"é»˜è®¤: ====",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),n($a,{label:"é»˜è®¤å…è´¹"},{default:s(()=>[n(Ua,{modelValue:xl.is_free,"onUpdate:modelValue":l[45]||(l[45]=e=>xl.is_free=e)},null,8,["modelValue"])]),_:1}),n($a,{label:"ç« èŠ‚å†…å®¹"},{default:s(()=>[n(ka,{modelValue:xl.content,"onUpdate:modelValue":l[46]||(l[46]=e=>xl.content=e),type:"textarea",rows:15,placeholder:"ç¬¬ä¸€ç«  å¼€å§‹\nç« èŠ‚å†…å®¹...\n====\nç¬¬äºŒç«  ç»§ç»­\nç« èŠ‚å†…å®¹..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(Ta,{modelValue:kl.value,"onUpdate:modelValue":l[58]||(l[58]=e=>kl.value=e),title:"æ™ºèƒ½å¯¼å…¥TXTå°è¯´",width:"900px"},{footer:s(()=>[2!==zl.value||Nl.value?(d(),m(ee,{key:0,onClick:l[56]||(l[56]=e=>kl.value=!1)},{default:s(()=>[...l[103]||(l[103]=[r("å–æ¶ˆ",-1)])]),_:1})):v("",!0),1===zl.value?(d(),m(ee,{key:1,onClick:l[57]||(l[57]=e=>zl.value--)},{default:s(()=>[...l[104]||(l[104]=[r("ä¸Šä¸€æ­¥",-1)])]),_:1})):v("",!0),0===zl.value?(d(),m(ee,{key:2,type:"primary",onClick:_a,disabled:0===Ul.value.length},{default:s(()=>[r(" è§£ææ–‡ä»¶ ("+u(Ul.value.length)+"ä¸ª) ",1)]),_:1},8,["disabled"])):v("",!0),1===zl.value?(d(),m(ee,{key:3,type:"primary",onClick:ha,disabled:0===$l.value.length},{default:s(()=>[r(" ç¡®è®¤å¯¼å…¥ ("+u($l.value.length)+"æœ¬) ",1)]),_:1},8,["disabled"])):v("",!0),2===zl.value&&Nl.value?(d(),m(ee,{key:4,type:"primary",onClick:ya},{default:s(()=>[...l[105]||(l[105]=[r(" å®Œæˆ ",-1)])]),_:1})):v("",!0)]),default:s(()=>[n(Ra,{active:zl.value,"finish-status":"success",style:{"margin-bottom":"20px"}},{default:s(()=>[n(Da,{title:"ä¸Šä¼ æ–‡ä»¶"}),n(Da,{title:"é¢„è§ˆè§£æ"}),n(Da,{title:"ç¡®è®¤å¯¼å…¥"})]),_:1},8,["active"]),0===zl.value?(d(),o("div",De,[n(Xa,{type:"info",closable:!1,style:{"margin-bottom":"16px"}},{title:s(()=>["text"===Cl.novel_type?(d(),o("div",Re,[...l[98]||(l[98]=[i("div",null,"æ”¯æŒæ™ºèƒ½è¯†åˆ«TXTå°è¯´çš„æ ‡é¢˜ã€ä½œè€…ã€ç®€ä»‹å’Œç« èŠ‚",-1),i("div",{style:{"margin-top":"4px","font-size":"12px",color:"#909399"}},' è¯†åˆ«è§„åˆ™ï¼šç¬¬ä¸€è¡Œä¸ºæ ‡é¢˜ï¼Œ"ä½œè€…ï¼š"å¼€å¤´ä¸ºä½œè€…ï¼Œ"ç®€ä»‹ï¼š"åä¸ºç®€ä»‹ï¼Œ"ç¬¬Xç« "ä¸ºç« èŠ‚åˆ†éš” ',-1)])])):(d(),o("div",We,[...l[99]||(l[99]=[i("div",null,"æœ‰å£°å°è¯´æ‰¹é‡å¯¼å…¥ï¼šä¸Šä¼ éŸ³é¢‘æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºç« èŠ‚",-1),i("div",{style:{"margin-top":"4px","font-size":"12px",color:"#909399"}}," éŸ³é¢‘æ–‡ä»¶åæ ¼å¼ï¼š001_ç¬¬ä¸€ç« æ ‡é¢˜.mp3 æˆ– ç¬¬1ç« _æ ‡é¢˜.mp3ï¼ˆæŒ‰æ–‡ä»¶åæ’åºï¼‰ ",-1)])]))]),_:1}),n(Na,{"label-width":"80px"},{default:s(()=>[n($a,{label:"å°è¯´ç±»å‹"},{default:s(()=>[n(xa,{modelValue:Cl.novel_type,"onUpdate:modelValue":l[49]||(l[49]=e=>Cl.novel_type=e),style:{width:"200px"},onChange:pa},{default:s(()=>[n(Va,{label:"æ–‡å­—å°è¯´",value:"text"}),n(Va,{label:"æœ‰å£°å°è¯´",value:"audio"})]),_:1},8,["modelValue"])]),_:1}),n($a,{label:"åˆ†ç±»"},{default:s(()=>[n(xa,{modelValue:Cl.category_id,"onUpdate:modelValue":l[50]||(l[50]=e=>Cl.category_id=e),placeholder:"é€‰æ‹©åˆ†ç±»",clearable:"",style:{width:"200px"}},{default:s(()=>[(d(!0),o(_,null,f(Rl.value,e=>(d(),m(Va,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n($a,{label:"å…è´¹ç« èŠ‚"},{default:s(()=>[n(ja,{modelValue:Cl.freeChapters,"onUpdate:modelValue":l[51]||(l[51]=e=>Cl.freeChapters=e),min:0,max:100},null,8,["modelValue"]),l[100]||(l[100]=i("span",{style:{"margin-left":"8px",color:"#909399"}},"å‰Nç« è®¾ä¸ºå…è´¹",-1))]),_:1}),"audio"===Cl.novel_type?(d(),o(_,{key:0},[n($a,{label:"å°è¯´æ ‡é¢˜",required:""},{default:s(()=>[n(ka,{modelValue:Cl.audioNovelTitle,"onUpdate:modelValue":l[52]||(l[52]=e=>Cl.audioNovelTitle=e),placeholder:"è¯·è¾“å…¥å°è¯´æ ‡é¢˜",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),n($a,{label:"ä½œè€…"},{default:s(()=>[n(ka,{modelValue:Cl.audioNovelAuthor,"onUpdate:modelValue":l[53]||(l[53]=e=>Cl.audioNovelAuthor=e),placeholder:"ä½šå",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),n($a,{label:"ç®€ä»‹"},{default:s(()=>[n(ka,{modelValue:Cl.audioNovelDesc,"onUpdate:modelValue":l[54]||(l[54]=e=>Cl.audioNovelDesc=e),type:"textarea",rows:2,placeholder:"å°è¯´ç®€ä»‹ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),n($a,{label:"å°é¢"},{default:s(()=>[i("div",Ie,[n(Ma,{class:"cover-uploader-small",action:Sl.value,headers:ql.value,data:{subdir:"novel"},"show-file-list":!1,"on-success":ma,"before-upload":Hl,accept:"image/*"},{default:s(()=>[Cl.audioNovelCover?(d(),m(Ca,{key:0,src:Cl.audioNovelCover,class:"cover-preview-small",fit:"cover"},null,8,["src"])):(d(),o("div",Fe,[n(t,null,{default:s(()=>[n(c(z))]),_:1})]))]),_:1},8,["action","headers"]),n(ka,{modelValue:Cl.audioNovelCover,"onUpdate:modelValue":l[55]||(l[55]=e=>Cl.audioNovelCover=e),placeholder:"æˆ–è¾“å…¥å°é¢URL",style:{flex:"1","margin-left":"12px"}},null,8,["modelValue"])])]),_:1})],64)):v("",!0),n($a,{label:"text"===Cl.novel_type?"ä¸Šä¼ TXT":"ä¸Šä¼ éŸ³é¢‘"},{default:s(()=>[n(Ma,{drag:"",multiple:"","auto-upload":!1,"file-list":Ul.value,onChange:va,accept:"text"===Cl.novel_type?".txt":".mp3,.wav,.ogg,.m4a,.aac"},{tip:s(()=>["text"===Cl.novel_type?(d(),o("div",Be," æ”¯æŒå¤šä¸ªTXTæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸ºä¸€æœ¬å°è¯´ ")):(d(),o("div",Ee," æ”¯æŒ mp3/wav/ogg/m4a/aac æ ¼å¼ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸ºä¸€ä¸ªç« èŠ‚ "))]),default:s(()=>[n(t,{class:"el-icon--upload"},{default:s(()=>[n(c(I))]),_:1}),l[101]||(l[101]=i("div",{class:"el-upload__text"},[r(" æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–"),i("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list","accept"])]),_:1},8,["label"])]),_:1})])):1===zl.value?(d(),o("div",Ke,[i("div",Pe,[(d(!0),o(_,null,f($l.value,(e,a)=>(d(),o("div",{key:a,class:"parsed-novel-card"},[i("div",Ge,[n(ga,{type:"primary",size:"small"},{default:s(()=>[r("å°è¯´ "+u(a+1),1)]),_:2},1024),n(ee,{type:"danger",link:"",size:"small",onClick:e=>function(e){$l.value.splice(e,1)}(a)},{default:s(()=>[...l[102]||(l[102]=[r("ç§»é™¤",-1)])]),_:1},8,["onClick"])]),n(Na,{model:e,"label-width":"70px",size:"small"},{default:s(()=>[n(Oa,{gutter:16},{default:s(()=>[n(La,{span:12},{default:s(()=>[n($a,{label:"æ ‡é¢˜"},{default:s(()=>[n(ka,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),n(La,{span:12},{default:s(()=>[n($a,{label:"ä½œè€…"},{default:s(()=>[n(ka,{modelValue:e.author,"onUpdate:modelValue":l=>e.author=l,placeholder:"ä½šå"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),n($a,{label:"ç®€ä»‹"},{default:s(()=>[n(ka,{modelValue:e.description,"onUpdate:modelValue":l=>e.description=l,type:"textarea",rows:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n($a,{label:"ç« èŠ‚"},{default:s(()=>{return[i("div",He,[(d(!0),o(_,null,f(e.chapters.slice(0,10),(e,l)=>(d(),m(ga,{key:l,size:"small",type:l<Cl.freeChapters?"success":"info",style:{margin:"2px"}},{default:s(()=>[r(u(e.title),1)]),_:2},1032,["type"]))),128)),e.chapters.length>10?(d(),m(ga,{key:0,size:"small",type:"warning"},{default:s(()=>[r(" +"+u(e.chapters.length-10)+"ç«  ",1)]),_:2},1024)):v("",!0)]),i("div",Qe," å…± "+u(e.chapters.length)+" ç« ï¼Œçº¦ "+u((l=e.totalWords,l>=1e4?(l/1e4).toFixed(1)+"ä¸‡":l))+" å­— ",1)];var l}),_:2},1024)]),_:2},1032,["model"])]))),128)),0===$l.value.length?(d(),o("div",Je,[n(Wa,{description:"æš‚æ— è§£æç»“æœï¼Œè¯·è¿”å›ä¸Šä¼ æ–‡ä»¶"})])):v("",!0)])])):2===zl.value?(d(),o("div",Ye,[i("div",Ze,[n(Ia,{percentage:jl.value,status:Nl.value},null,8,["percentage","status"]),i("div",el,u(Tl.value),1),Ll.value.length?(d(),o("div",ll,[(d(!0),o(_,null,f(Ll.value,(e,l)=>(d(),o("div",{key:l,class:y(["log-item",e.type])},["success"===e.type?(d(),m(t,{key:0},{default:s(()=>[n(c(Q))]),_:1})):"error"===e.type?(d(),m(t,{key:1},{default:s(()=>[n(c(J))]),_:1})):(d(),m(t,{key:2},{default:s(()=>[n(c(Y))]),_:1})),i("span",null,u(e.message),1)],2))),128))])):v("",!0)])])):v("",!0)]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-245d155d"]]);export{al as default};
