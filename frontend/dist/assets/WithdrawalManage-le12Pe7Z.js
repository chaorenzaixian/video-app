/* empty css             *//* empty css                   *//* empty css                     *//* empty css                   *//* empty css                             *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  *//* empty css                             */import{_ as a,a as e}from"./index-C3P4JTuA.js";import{bl as l,aT as t,bD as s,aM as i,bs as d,bt as r,bk as n,bh as o,bm as u,bi as c,b6 as p,bj as m,bG as w,bH as h,aR as v,aS as b,E as _}from"./element-plus-DlIn_qXi.js";import{r as f,l as y,j as g,y as k,C as V,O as j,L as C,F as x,G as z,E as S,z as U,K as M,I as $,M as D}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const I={class:"admin-page"},N={class:"stats-row"},R={class:"stat-card pending"},T={class:"stat-info"},F={class:"stat-value"},G={class:"stat-card processing"},E={class:"stat-info"},H={class:"stat-value"},K={class:"stat-card success"},q={class:"stat-info"},J={class:"stat-value"},L={class:"stat-card info"},O={class:"stat-info"},P={class:"stat-value"},W={class:"filter-bar"},X={class:"table-container"},Y={class:"user-cell"},A={class:"user-info"},B={class:"user-name"},Q={class:"user-id"},Z={class:"amount-cell"},aa={class:"coins"},ea={class:"cash"},la={class:"payment-info"},ta={class:"account"},sa={class:"dialog-content"},ia={class:"dialog-content"},da=a({__name:"WithdrawalManage",setup(a){const da=f(!1),ra=f([]),na=f({pending:0,processing:0,todayCompleted:0,monthTotal:0}),oa=y({status:"pending",paymentMethod:"",keyword:"",dateRange:null}),ua=y({page:1,pageSize:15,total:0}),ca=y({visible:!1,withdrawal:null}),pa=y({visible:!1,withdrawal:null,reason:""}),ma=y({visible:!1,withdrawal:null,transactionNo:""}),wa=y({visible:!1,withdrawal:null}),ha=a=>({alipay:"æ”¯ä»˜å®",wechat:"å¾®ä¿¡",bank:"é“¶è¡Œå¡"}[a]||a),va=a=>({pending:"warning",processing:"primary",completed:"success",rejected:"danger"}[a]||"info"),ba=a=>({pending:"å¾…å¤„ç†",processing:"å¤„ç†ä¸­",completed:"å·²å®Œæˆ",rejected:"å·²æ‹’ç»"}[a]||a),_a=a=>{if(!a)return"-";const e=new Date(a);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},fa=async()=>{var a,l;da.value=!0;try{const t=await e.get("/admin/creator-withdrawals",{params:{status:oa.status,payment_method:oa.paymentMethod,page:ua.page}});ra.value=(null==(a=t.data)?void 0:a.items)||[],ua.total=(null==(l=t.data)?void 0:l.total)||0}catch(t){ra.value=[]}finally{da.value=!1}},ya=()=>{oa.status="pending",oa.paymentMethod="",oa.keyword="",oa.dateRange=null,ua.page=1,fa()},ga=async()=>{try{await e.post(`/admin/creator-withdrawals/${ca.withdrawal.id}/approve`),_.success("å·²é€šè¿‡ï¼Œè¯·å°½å¿«å®Œæˆæ‰“æ¬¾"),ca.visible=!1,await fa()}catch(a){_.error("æ“ä½œå¤±è´¥")}},ka=async()=>{if(pa.reason)try{await e.post(`/admin/creator-withdrawals/${pa.withdrawal.id}/reject`,{reason:pa.reason}),_.success("å·²æ‹’ç»"),pa.visible=!1,await fa()}catch(a){_.error("æ“ä½œå¤±è´¥")}else _.warning("è¯·è¾“å…¥æ‹’ç»åŽŸå› ")},Va=async()=>{try{await e.post(`/admin/creator-withdrawals/${ma.withdrawal.id}/complete`,{transaction_no:ma.transactionNo}),_.success("æ‰“æ¬¾å®Œæˆ"),ma.visible=!1,await fa()}catch(a){_.error("æ“ä½œå¤±è´¥")}};return g(()=>{fa()}),(a,e)=>{const _=u,f=l,y=t,g=s,ja=i,Ca=c,xa=p,za=m,Sa=o,Ua=r,Ma=h,$a=w,Da=n,Ia=b,Na=v,Ra=d;return U(),k("div",I,[e[37]||(e[37]=V("div",{class:"page-header"},[V("h1",null,"æçŽ°å®¡æ ¸"),V("p",{class:"page-desc"},"å®¡æ ¸åˆ›ä½œè€…æçŽ°ç”³è¯·ã€å¤„ç†æ‰“æ¬¾")],-1)),V("div",N,[V("div",R,[e[15]||(e[15]=V("div",{class:"stat-icon"},"â³",-1)),V("div",T,[V("span",F,C(na.value.pending),1),e[14]||(e[14]=V("span",{class:"stat-label"},"å¾…å¤„ç†",-1))])]),V("div",G,[e[17]||(e[17]=V("div",{class:"stat-icon"},"ðŸ”„",-1)),V("div",E,[V("span",H,C(na.value.processing),1),e[16]||(e[16]=V("span",{class:"stat-label"},"å¤„ç†ä¸­",-1))])]),V("div",K,[e[19]||(e[19]=V("div",{class:"stat-icon"},"âœ…",-1)),V("div",q,[V("span",J,"Â¥"+C(na.value.todayCompleted),1),e[18]||(e[18]=V("span",{class:"stat-label"},"ä»Šæ—¥æ‰“æ¬¾",-1))])]),V("div",L,[e[21]||(e[21]=V("div",{class:"stat-icon"},"ðŸ’°",-1)),V("div",O,[V("span",P,"Â¥"+C(na.value.monthTotal),1),e[20]||(e[20]=V("span",{class:"stat-label"},"æœ¬æœˆç´¯è®¡",-1))])])]),V("div",W,[j(f,{modelValue:oa.status,"onUpdate:modelValue":e[0]||(e[0]=a=>oa.status=a),placeholder:"çŠ¶æ€",clearable:"",style:{width:"120px"}},{default:x(()=>[j(_,{label:"å¾…å¤„ç†",value:"pending"}),j(_,{label:"å¤„ç†ä¸­",value:"processing"}),j(_,{label:"å·²å®Œæˆ",value:"completed"}),j(_,{label:"å·²æ‹’ç»",value:"rejected"})]),_:1},8,["modelValue"]),j(f,{modelValue:oa.paymentMethod,"onUpdate:modelValue":e[1]||(e[1]=a=>oa.paymentMethod=a),placeholder:"æ”¶æ¬¾æ–¹å¼",clearable:"",style:{width:"120px"}},{default:x(()=>[j(_,{label:"æ”¯ä»˜å®",value:"alipay"}),j(_,{label:"å¾®ä¿¡",value:"wechat"}),j(_,{label:"é“¶è¡Œå¡",value:"bank"})]),_:1},8,["modelValue"]),j(y,{modelValue:oa.keyword,"onUpdate:modelValue":e[2]||(e[2]=a=>oa.keyword=a),placeholder:"åˆ›ä½œè€…æ˜µç§°",clearable:"",style:{width:"160px"}},null,8,["modelValue"]),j(g,{modelValue:oa.dateRange,"onUpdate:modelValue":e[3]||(e[3]=a=>oa.dateRange=a),type:"daterange","start-placeholder":"å¼€å§‹","end-placeholder":"ç»“æŸ",style:{width:"220px"}},null,8,["modelValue"]),j(ja,{type:"primary",onClick:fa},{default:x(()=>[...e[22]||(e[22]=[M("æŸ¥è¯¢",-1)])]),_:1}),j(ja,{onClick:ya},{default:x(()=>[...e[23]||(e[23]=[M("é‡ç½®",-1)])]),_:1})]),V("div",X,[z((U(),S(Sa,{data:ra.value,stripe:"",border:""},{default:x(()=>[j(Ca,{prop:"id",label:"ID",width:"70"}),j(Ca,{label:"ç”³è¯·äºº",width:"180"},{default:x(({row:a})=>{var e,l;return[V("div",Y,[j(xa,{size:36,src:null==(e=a.user)?void 0:e.avatar},null,8,["src"]),V("div",A,[V("span",B,C(null==(l=a.user)?void 0:l.nickname),1),V("span",Q,"åˆ›ä½œè€…ID: "+C(a.creator_id),1)])])]}),_:1}),j(Ca,{label:"æçŽ°é‡‘é¢",width:"140",align:"right"},{default:x(({row:a})=>[V("div",Z,[V("span",aa,C(a.coins_amount)+" é‡‘å¸",1),V("span",ea,"Â¥"+C(a.cash_amount),1)])]),_:1}),j(Ca,{label:"æ”¶æ¬¾æ–¹å¼",width:"120",align:"center"},{default:x(({row:a})=>{return[j(za,{type:(e=a.payment_method,{alipay:"primary",wechat:"success",bank:"info"}[e]||"info"),size:"small"},{default:x(()=>[M(C(ha(a.payment_method)),1)]),_:2},1032,["type"])];var e}),_:1}),j(Ca,{label:"æ”¶æ¬¾ä¿¡æ¯",width:"200"},{default:x(({row:a})=>{return[V("div",la,[V("span",null,C(a.payment_name),1),V("span",ta,C((e=a.payment_account,e?e.length>8?e.slice(0,4)+"****"+e.slice(-4):e:"-")),1)])];var e}),_:1}),j(Ca,{label:"çŠ¶æ€",width:"100",align:"center"},{default:x(({row:a})=>[j(za,{type:va(a.status),size:"small"},{default:x(()=>[M(C(ba(a.status)),1)]),_:2},1032,["type"])]),_:1}),j(Ca,{prop:"created_at",label:"ç”³è¯·æ—¶é—´",width:"160"},{default:x(({row:a})=>[M(C(_a(a.created_at)),1)]),_:1}),j(Ca,{label:"æ“ä½œ",width:"200",fixed:"right",align:"center"},{default:x(({row:a})=>["pending"===a.status?(U(),k(D,{key:0},[j(ja,{type:"success",size:"small",onClick:e=>{return l=a,ca.withdrawal=l,void(ca.visible=!0);var l}},{default:x(()=>[...e[24]||(e[24]=[M("é€šè¿‡",-1)])]),_:1},8,["onClick"]),j(ja,{type:"danger",size:"small",onClick:e=>{return l=a,pa.withdrawal=l,pa.reason="",void(pa.visible=!0);var l}},{default:x(()=>[...e[25]||(e[25]=[M("æ‹’ç»",-1)])]),_:1},8,["onClick"])],64)):"processing"===a.status?(U(),S(ja,{key:1,type:"primary",size:"small",onClick:e=>{return l=a,ma.withdrawal=l,ma.transactionNo="",void(ma.visible=!0);var l}},{default:x(()=>[...e[26]||(e[26]=[M("ç¡®è®¤æ‰“æ¬¾",-1)])]),_:1},8,["onClick"])):$("",!0),j(ja,{size:"small",onClick:e=>{return l=a,wa.withdrawal=l,void(wa.visible=!0);var l}},{default:x(()=>[...e[27]||(e[27]=[M("è¯¦æƒ…",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ra,da.value]]),j(Ua,{"current-page":ua.page,"onUpdate:currentPage":e[4]||(e[4]=a=>ua.page=a),"page-size":ua.pageSize,total:ua.total,layout:"total, prev, pager, next, jumper",onCurrentChange:fa,class:"pagination"},null,8,["current-page","page-size","total"])]),j(Da,{modelValue:ca.visible,"onUpdate:modelValue":e[6]||(e[6]=a=>ca.visible=a),title:"é€šè¿‡æçŽ°ç”³è¯·",width:"400px"},{footer:x(()=>[j(ja,{onClick:e[5]||(e[5]=a=>ca.visible=!1)},{default:x(()=>[...e[30]||(e[30]=[M("å–æ¶ˆ",-1)])]),_:1}),j(ja,{type:"success",onClick:ga},{default:x(()=>[...e[31]||(e[31]=[M("ç¡®è®¤é€šè¿‡",-1)])]),_:1})]),default:x(()=>[V("div",sa,[e[28]||(e[28]=V("p",null,"ç¡®è®¤é€šè¿‡ä»¥ä¸‹æçŽ°ç”³è¯·ï¼Ÿ",-1)),ca.withdrawal?(U(),S($a,{key:0,column:1,border:"",size:"small"},{default:x(()=>[j(Ma,{label:"ç”³è¯·äºº"},{default:x(()=>{var a;return[M(C(null==(a=ca.withdrawal.user)?void 0:a.nickname),1)]}),_:1}),j(Ma,{label:"æçŽ°é‡‘é¢"},{default:x(()=>[M("Â¥"+C(ca.withdrawal.cash_amount),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾æ–¹å¼"},{default:x(()=>[M(C(ha(ca.withdrawal.payment_method)),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾è´¦å·"},{default:x(()=>[M(C(ca.withdrawal.payment_account),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾äºº"},{default:x(()=>[M(C(ca.withdrawal.payment_name),1)]),_:1})]),_:1})):$("",!0),e[29]||(e[29]=V("p",{class:"dialog-tip"},'é€šè¿‡åŽï¼ŒæçŽ°çŠ¶æ€å°†å˜ä¸º"å¤„ç†ä¸­"ï¼Œè¯·å°½å¿«å®Œæˆæ‰“æ¬¾ã€‚',-1))])]),_:1},8,["modelValue"]),j(Da,{modelValue:pa.visible,"onUpdate:modelValue":e[9]||(e[9]=a=>pa.visible=a),title:"æ‹’ç»æçŽ°",width:"400px"},{footer:x(()=>[j(ja,{onClick:e[8]||(e[8]=a=>pa.visible=!1)},{default:x(()=>[...e[32]||(e[32]=[M("å–æ¶ˆ",-1)])]),_:1}),j(ja,{type:"danger",onClick:ka},{default:x(()=>[...e[33]||(e[33]=[M("ç¡®è®¤æ‹’ç»",-1)])]),_:1})]),default:x(()=>[j(y,{modelValue:pa.reason,"onUpdate:modelValue":e[7]||(e[7]=a=>pa.reason=a),type:"textarea",rows:"4",placeholder:"è¯·è¾“å…¥æ‹’ç»åŽŸå› "},null,8,["modelValue"])]),_:1},8,["modelValue"]),j(Da,{modelValue:ma.visible,"onUpdate:modelValue":e[12]||(e[12]=a=>ma.visible=a),title:"ç¡®è®¤æ‰“æ¬¾",width:"400px"},{footer:x(()=>[j(ja,{onClick:e[11]||(e[11]=a=>ma.visible=!1)},{default:x(()=>[...e[35]||(e[35]=[M("å–æ¶ˆ",-1)])]),_:1}),j(ja,{type:"primary",onClick:Va},{default:x(()=>[...e[36]||(e[36]=[M("ç¡®è®¤å·²æ‰“æ¬¾",-1)])]),_:1})]),default:x(()=>[V("div",ia,[e[34]||(e[34]=V("p",null,"è¯·ç¡®è®¤å·²å®Œæˆä»¥ä¸‹æ‰“æ¬¾ï¼š",-1)),ma.withdrawal?(U(),S($a,{key:0,column:1,border:"",size:"small"},{default:x(()=>[j(Ma,{label:"æ‰“æ¬¾é‡‘é¢"},{default:x(()=>[M("Â¥"+C(ma.withdrawal.cash_amount),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾è´¦å·"},{default:x(()=>[M(C(ma.withdrawal.payment_account),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾äºº"},{default:x(()=>[M(C(ma.withdrawal.payment_name),1)]),_:1})]),_:1})):$("",!0),j(Na,{style:{"margin-top":"16px"}},{default:x(()=>[j(Ia,{label:"äº¤æ˜“æµæ°´å·"},{default:x(()=>[j(y,{modelValue:ma.transactionNo,"onUpdate:modelValue":e[10]||(e[10]=a=>ma.transactionNo=a),placeholder:"è¯·è¾“å…¥æ‰“æ¬¾æµæ°´å·(é€‰å¡«)"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),j(Da,{modelValue:wa.visible,"onUpdate:modelValue":e[13]||(e[13]=a=>wa.visible=a),title:"æçŽ°è¯¦æƒ…",width:"500px"},{default:x(()=>[wa.withdrawal?(U(),S($a,{key:0,column:1,border:""},{default:x(()=>[j(Ma,{label:"æçŽ°ID"},{default:x(()=>[M(C(wa.withdrawal.id),1)]),_:1}),j(Ma,{label:"åˆ›ä½œè€…"},{default:x(()=>{var a;return[M(C(null==(a=wa.withdrawal.user)?void 0:a.nickname),1)]}),_:1}),j(Ma,{label:"æçŽ°é‡‘å¸"},{default:x(()=>[M(C(wa.withdrawal.coins_amount),1)]),_:1}),j(Ma,{label:"æŠ˜åˆçŽ°é‡‘"},{default:x(()=>[M("Â¥"+C(wa.withdrawal.cash_amount),1)]),_:1}),j(Ma,{label:"å…‘æ¢æ¯”ä¾‹"},{default:x(()=>[M("1é‡‘å¸ = Â¥"+C(wa.withdrawal.exchange_rate),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾æ–¹å¼"},{default:x(()=>[M(C(ha(wa.withdrawal.payment_method)),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾è´¦å·"},{default:x(()=>[M(C(wa.withdrawal.payment_account),1)]),_:1}),j(Ma,{label:"æ”¶æ¬¾äºº"},{default:x(()=>[M(C(wa.withdrawal.payment_name),1)]),_:1}),j(Ma,{label:"çŠ¶æ€"},{default:x(()=>[j(za,{type:va(wa.withdrawal.status)},{default:x(()=>[M(C(ba(wa.withdrawal.status)),1)]),_:1},8,["type"])]),_:1}),j(Ma,{label:"ç”³è¯·æ—¶é—´"},{default:x(()=>[M(C(_a(wa.withdrawal.created_at)),1)]),_:1}),wa.withdrawal.processed_at?(U(),S(Ma,{key:0,label:"å¤„ç†æ—¶é—´"},{default:x(()=>[M(C(_a(wa.withdrawal.processed_at)),1)]),_:1})):$("",!0),wa.withdrawal.transaction_no?(U(),S(Ma,{key:1,label:"äº¤æ˜“æµæ°´"},{default:x(()=>[M(C(wa.withdrawal.transaction_no),1)]),_:1})):$("",!0),wa.withdrawal.reject_reason?(U(),S(Ma,{key:2,label:"æ‹’ç»åŽŸå› "},{default:x(()=>[M(C(wa.withdrawal.reject_reason),1)]),_:1})):$("",!0)]),_:1})):$("",!0)]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-ce757c68"]]);export{da as default};
