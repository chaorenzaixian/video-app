import{r as e,c as a,w as l,j as s,n as i,R as t,y as n,C as o,E as c,G as u,I as r,L as v,H as d,K as p,U as m,a0 as _,M as g,P as y,aa as f,u as h,ae as k,af as w,V as b,az as C,aC as x,z as $}from"./vue-vendor-Ba_vealp.js";import{_ as M}from"./ic_back-BPdSG6fy.js";import{_ as I}from"./ic_launcher-GoPvjxRC.js";import{_ as S}from"./super_vip_blue-CukdgMfT.js";import{_ as T}from"./god_comment-Dp4lzx7s.js";import{_ as z,a as P}from"./index-C3P4JTuA.js";import{a as V}from"./utils-DflAyOWx.js";import{e as j,H as L}from"./video-player-CxH5brnW.js";import{aL as B,E}from"./element-plus-DlIn_qXi.js";import{r as H}from"./zh-cn-StHTbzJD.js";import{u as D}from"./useAbortController-pf-gfr0d.js";import{u as R,a as U,b as W}from"./useCleanup-GCaf3062.js";import{f as O,b as Y,a as A}from"./format-s96t4k9e.js";import{V as F}from"./vip-C8N2TCfr.js";/* empty css             *//* empty css                 *//* empty css                   */const q={class:"video-player-page"},J={class:"player-container"},G={key:0,class:"pre-roll-ad"},N={class:"ad-video-container"},K=["src"],Q=["src"],X={class:"ad-overlay"},Z={key:0,class:"ad-countdown"},ee=["href"],ae={key:1,class:"access-badge"},le={key:0,class:"vip-free-badge"},se={key:1,class:"purchased-badge"},ie={key:2,class:"trial-ended-overlay"},te={class:"trial-ended-content"},ne={class:"trial-ended-actions"},oe={key:0,class:"coin-purchase-option"},ce={class:"share-modal-content"},ue={class:"share-promo-image"},re=["src"],ve={class:"share-qr-section"},de={class:"share-qrcode"},pe=["src"],me={class:"share-invite-info"},_e={class:"invite-code"},ge={class:"official-url"},ye={class:"share-actions"},fe={class:"vip-member-center"},he=["src"],ke={class:"vip-expire-text"},we={class:"content-tabs"},be={class:"intro-content"},Ce={class:"intro-section"},xe={class:"video-title"},$e={class:"video-tags"},Me={class:"uploader-info"},Ie=["src"],Se={class:"uploader-detail"},Te={class:"name-row"},ze=["src"],Pe={key:1,class:"badge"},Ve={class:"stats"},je={class:"video-stats"},Le={class:"stat-item views"},Be={class:"stat-value"},Ee={class:"stat-value"},He={class:"stat-value"},De={key:0,class:"vip-badge"},Re={key:0,class:"ad-icons-section"},Ue={class:"ad-icons-scroll",ref:"adIconsScrollRef"},We={class:"ad-icons-track"},Oe=["onClick"],Ye={class:"icon-wrap"},Ae=["src","alt"],Fe={key:1,class:"icon-emoji"},qe={class:"icon-name"},Je=["onClick"],Ge={class:"icon-wrap"},Ne=["src","alt"],Ke={key:1,class:"icon-emoji"},Qe={class:"icon-name"},Xe={class:"recommend-tabs"},Ze=["onClick"],ea={class:"recommend-section"},aa={class:"video-list double-column"},la=["onClick","onMouseenter","onMouseleave"],sa={class:"video-cover"},ia=["src","alt"],ta=["data-src"],na={class:"cover-views"},oa={class:"video-duration"},ca={class:"video-info"},ua={class:"video-title"},ra={class:"video-meta"},va={key:0,class:"video-tag"},da={key:1,class:"video-tag"},pa={key:2,class:"video-tag"},ma={class:"video-comments"},_a={class:"comments-content"},ga={class:"comment-list-wrapper"},ya={key:0,class:"comment-item official-announcement"},fa=["src"],ha={class:"comment-body"},ka={class:"comment-user"},wa={class:"username official-name"},ba={class:"comment-text official-text"},Ca={class:"comment-meta"},xa={class:"time"},$a={key:1,class:"comment-list"},Ma=["src","onClick"],Ia={class:"comment-body"},Sa={class:"comment-user"},Ta=["onClick"],za=["src"],Pa={key:1,src:T,class:"god-badge",title:"Á•ûËØÑ"},Va={key:2,class:"pin-badge"},ja={class:"comment-text"},La=["onClick"],Ba=["src"],Ea={class:"comment-meta"},Ha={class:"time"},Da=["onClick"],Ra=["onClick"],Ua=["onClick"],Wa={key:1,class:"reply-list"},Oa=["src","onClick"],Ya={class:"reply-body"},Aa=["onClick"],Fa={key:0,class:"official-badge small"},qa=["src"],Ja={class:"reply-text"},Ga=["onClick"],Na=["src"],Ka={class:"reply-meta"},Qa={class:"time"},Xa=["onClick"],Za=["onClick"],el=["onClick"],al={key:2,class:"empty-comments"},ll={key:3,class:"load-more"},sl=["disabled"],il={key:0,class:"loading-spinner"},tl={key:1},nl={key:4,class:"no-more-comments"},ol={class:"comment-input-bar"},cl={key:1,class:"input-area"},ul={key:0,class:"image-preview"},rl=["src"],vl={class:"input-row"},dl=["placeholder"],pl={class:"input-actions"},ml={class:"image-btn"},_l={key:1,class:"emoji-picker"},gl={class:"emoji-grid"},yl=["onClick"],fl={class:"lightbox-container"},hl=["src"],kl={class:"lightbox-controls"},wl=z({__name:"VideoPlayer",setup(T){B.extend(H),B.locale("zh-cn");const z=C(),wl=x(),{signal:bl}=D(),Cl=R(),xl=U();W();const $l=e(null),Ml=e(null),Il=e(null);let Sl=null;const Tl=e({}),zl=e([]),Pl=e([]),Vl=e([]),jl=e(""),Ll=e("intro"),Bl=e(0),El=e(!1),Hl=e(!1),Dl=e(!1),Rl=e(!1),Ul=e(!1),Wl=e(0),Ol=e("ÈùûVIP"),Yl=e(null),Al=e(1),Fl=e(!1),ql=e(!1),Jl=e(!1),Gl=e(!1);e(!1);const Nl=e(!1),Kl=e(!1),Ql=e(0),Xl=e(0),Zl=e(!1),es=e(0),as=e("3AUUHR"),ls=a(()=>window.location.origin.replace(/^https?:\/\//,"")),ss=a(()=>`${window.location.origin}/user/video/${Tl.value.id}?ref=${as.value}`),is=a(()=>`https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(ss.value)}`),ts=e(null),ns=e(null),os=e(!1),cs=e(5),us=e(!1),rs=e(!1),vs=async()=>{if(!Ul.value)try{const e=await P.get("/ads",{params:{position:"VIDEO_PRE",limit:1}}),a=e.data||e||[];a.length>0&&(ns.value=a[0],setTimeout(()=>{ds()},500))}catch(e){}},ds=()=>!(!ns.value||rs.value||Ul.value)&&(os.value=!0,cs.value=ns.value.duration||5,rs.value=!0,!0),ps=()=>{var e;if(ts.value){const a=ts.value.currentTime,l=(null==(e=ns.value)?void 0:e.duration)||5,s=Math.max(0,Math.ceil(l-a));cs.value=s,s<=0&&(us.value=!0)}},ms=()=>{ts.value&&ts.value.play().catch(()=>{ts.value.muted=!0,ts.value.play()})},_s=()=>{var e;us.value=!0,cs.value=0,ts.value&&"video"===(null==(e=ns.value)?void 0:e.ad_type)&&(ts.value.currentTime=0,ts.value.play().catch(()=>{}))},gs=()=>{os.value=!1,fs&&(Cl.clearInterval(fs),fs=null),ts.value&&ts.value.pause(),Cl.setTimeout(()=>{Sl&&(El.value=!0,Sl.play())},100)},ys=async()=>{var e;if(null==(e=ns.value)?void 0:e.id)try{await P.post(`/ads/${ns.value.id}/click`)}catch(a){}};let fs=null;const hs=()=>{var e;const a=(null==(e=ns.value)?void 0:e.duration)||5;cs.value=a,us.value=!1,fs=Cl.setInterval(()=>{cs.value--,cs.value<=0&&(Cl.clearInterval(fs),fs=null,us.value=!0)},1e3)},ks=()=>{var e;(null==(e=ns.value)?void 0:e.target_url)&&(ys(),window.open(ns.value.target_url,"_blank"))};a(()=>{if(!Jl.value||ql.value||Gl.value||Zl.value)return!1;const e=Tl.value.free_preview_seconds||0;return!(e<=0)&&(es.value>=e-10&&es.value<e)}),a(()=>{const e=Tl.value.free_preview_seconds||30;return Math.max(0,Math.ceil(e-es.value))}),a(()=>Ol.value||"‰ºöÂëò");const ws=a(()=>F[Wl.value]||""),bs=a(()=>{if(!Yl.value)return"";const e=new Date(Yl.value);return`${e.getFullYear()}.${String(e.getMonth()+1).padStart(2,"0")}.${String(e.getDate()).padStart(2,"0")}`}),Cs=a(()=>Tl.value.coin_price?Ul.value&&Tl.value.vip_discount&&Tl.value.vip_discount<1?Math.ceil(Tl.value.coin_price*Tl.value.vip_discount):Tl.value.coin_price:0),xs=e(0),$s=e(1),Ms=e(10),Is=e(null),Ss=e("newest"),Ts=e(!1),zs=e(!1),Ps=e(!1),Vs=e(null),js=e(null),Ls=e(!1),Bs=e(!1),Es=e(null),Hs=e(""),Ds=["üòÄ","üòÇ","ü§£","üòä","üòç","ü•∞","üòò","üòú","ü§™","üòé","ü•≥","üòá","ü§©","üòã","üòõ","ü§§","üòè","üòí","üòî","üò¢","üò≠","üò§","üò†","ü§¨","üò±","üò∞","üò•","ü§ß","üò∑","ü§í","üëç","üëé","üëè","üôè","üí™","‚ù§Ô∏è","üíî","üíØ","üî•","‚ú®","üéâ","üéä","üíé","üèÜ","ü•á","‚≠ê","üåü","üí´","üåà","‚òÄÔ∏è","üåô","‚ö°","üí•","üí¢","üí§","üëª","üíÄ","üëΩ","ü§ñ","üê∂","üê±","üê∞","ü¶ä","üêª","üêº","üêØ","ü¶Å","üêÆ","üê∑","üê∏"],Rs=["‰∏ªÊí≠","ÁÉ≠Èó®"],Us=["ËßÜÈ¢ëÊé®Ëçê","Âä®Êº´Êé®Ëçê","Êº´ÁîªÊé®Ëçê"],Ws=e=>{const a=e%52;if(a<17)return`/images/avatars/icon_avatar_${a+1}.webp`;if(a<32){return`/images/avatars/DM_20251217202131_${String(a-17+1).padStart(3,"0")}.JPEG`}return`/images/avatars/DM_20251217202341_${String(a-32+1).padStart(3,"0")}.JPEG`};a(()=>{const e=js.value||1;return Ws(e)});const Os=e({}),Ys=e(null);let As=null;const Fs=e(!1),qs=e=>Ys.value===e,Js=e=>{if(Ys.value&&Ys.value!==e.id){const e=Os.value[Ys.value];e&&(e.pause(),e.currentTime=0,e.src="")}Ys.value=e.id;const a=Os.value[e.id];a&&(!a.src&&a.dataset.src&&(a.src=a.dataset.src),a.currentTime=0,a.play().catch(e=>{}))},Gs=()=>{Fs.value=!0},Ns=e=>{Fs.value&&e.preview_url?Ys.value===e.id?((()=>{if(Ys.value){const e=Os.value[Ys.value];e&&(e.pause(),e.currentTime=0),Ys.value=null}})(),Ui(e.id)):Js(e):Ui(e.id)},Ks=a(()=>{const e=Tl.value.uploader_videos||0,a=Tl.value.uploader_followers||0;return`${e} ‰ΩúÂìÅ  ${O(a)} Á≤â‰∏ù`}),Qs=e=>e?e.startsWith("http")||e.startsWith("/")?e:"/"+e:"/placeholder.webp",Xs=(e,a)=>{if(e)return e;const l=parseInt(a)||1;return Ws(l)},Zs=e=>F[e]||"",ei=async()=>{var e;const a=z.params.id;if(a)try{const s=await P.get(`/videos/${a}`,{signal:bl});if(Tl.value=s.data||s,Tl.value.needs_vip&&(Ul.value=!1),await ai(),Tl.value.uploader_id)try{const a=await P.get(`/users/${Tl.value.uploader_id}/follow/status`,{signal:bl});Rl.value=(null==(e=a.data)?void 0:e.is_followed)||!1}catch(l){}await P.post(`/videos/${a}/view`)}catch(s){if("CanceledError"===s.name||"AbortError"===s.name)return;Tl.value={id:a,title:"ËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•",description:"ËØ∑Á®çÂêéÈáçËØï",cover_url:"/uploads/thumbnails/3.webp",hls_url:"",duration:0,view_count:0,like_count:0,favorite_count:0,is_vip_only:!1,is_verified:!1,uploader_name:"Êú™Áü•",uploader_avatar:"",uploader_videos:0,uploader_followers:0,tags:[]}}else wl.replace("/")},ai=async()=>{const e=Tl.value;if(Zl.value=!1,Gl.value=!1,ql.value=!1,Jl.value=!1,es.value=0,Xl.value=0,!e.pay_type||"free"===e.pay_type)return Jl.value=!1,void(ql.value=!0);if("vip_free"===e.pay_type&&Ul.value)return Jl.value=!1,ql.value=!0,void(Zl.value=!0);if(Wl.value>=5)return Jl.value=!1,ql.value=!0,void(Zl.value=!0);if(e.vip_free_level>0&&Wl.value>=e.vip_free_level)return Jl.value=!1,ql.value=!0,void(Zl.value=!0);Jl.value=!0;try{const a=await P.get(`/coins/purchase/video/${e.id}/check`,{signal:bl}),l=a.data||a;ql.value=!0===l.purchased||!0===l.can_watch,l.is_vip_free&&(Zl.value=!0,ql.value=!0,Jl.value=!1)}catch(a){"CanceledError"!==a.name&&a.name,ql.value=!1}},li=async()=>{try{const e=await P.get("/coins/balance",{signal:bl}),a=e.data||e;Ql.value=a.balance||0}catch(e){"CanceledError"!==e.name&&e.name,Ql.value=0}},si=async()=>{var e,a;if(await li(),Ql.value<Cs.value)return E.warning("‰ΩôÈ¢ù‰∏çË∂≥ÔºåËØ∑ÂÖàÂÖÖÂÄº"),void wl.push("/user/coins");if(!Kl.value){Kl.value=!0;try{const e=await P.post(`/coins/purchase/video/${Tl.value.id}`),a=e.data||e;a.success?(ql.value=!0,Gl.value=!1,Ql.value=a.balance_after||Ql.value-Cs.value,await ei(),await i(),Ci(),E.success("Ë¥≠‰π∞ÊàêÂäüÔºÅ")):E.error(a.message||"Ë¥≠‰π∞Â§±Ë¥•")}catch(l){(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.detail)?E.error(l.response.data.detail):E.error("Ë¥≠‰π∞Â§±Ë¥•ÔºåËØ∑ÈáçËØï")}finally{Kl.value=!1}}},ii=async()=>{try{const e=await P.get("/settings/comment-announcement",{signal:bl});Is.value=e.data||e}catch(e){"CanceledError"!==e.name&&e.name}},ti=e=>{if(!e)return"";const a=new Date(e);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")} ${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`},ni=async(e=!0)=>{const a=z.params.id;if(a){e&&($s.value=1,zs.value=!0);try{const l=await P.get(`/comments/video/${a}`,{params:{page:$s.value,page_size:Ms.value,sort_by:Ss.value},signal:bl}),s=l.data||l;zl.value=e?s.items||[]:[...zl.value,...s.items||[]],xs.value=s.total||0,Ts.value=$s.value*Ms.value<xs.value}catch(l){"CanceledError"!==l.name&&l.name,e&&(zl.value=[])}finally{zs.value=!1}}},oi=async()=>{!zs.value&&Ts.value&&(zs.value=!0,$s.value++,await ni(!1))},ci=(e,a=null)=>{Vs.value={parent_id:e.id,user_name:a?a.user_name:e.user_name},setTimeout(()=>{var e;null==(e=Il.value)||e.focus()},100)},ui=()=>{Vs.value=null,jl.value="",Es.value=null,Hs.value="",Bs.value=!1},ri=e=>{const a=e.target.files[0];a&&(a.size>5242880?alert("ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá5MB"):a.type.startsWith("image/")?(Es.value=a,Hs.value=URL.createObjectURL(a)):alert("ËØ∑ÈÄâÊã©ÂõæÁâáÊñá‰ª∂"))},vi=()=>{Es.value=null,Hs.value=""},di=e(!1),pi=e(""),mi=e(1),_i=e=>{pi.value=e,mi.value=1,di.value=!0},gi=()=>{di.value=!1,pi.value="",mi.value=1},yi=()=>{mi.value<3&&(mi.value+=.5)},fi=()=>{mi.value>.5&&(mi.value-=.5)},hi=()=>{mi.value=1},ki=async()=>{try{const e=await P.get("/videos",{params:{page:1,page_size:12,sort_by:"random"},signal:bl}),a=e.data||e;if(a.items&&a.items.length>0){const e=parseInt(z.params.id);Pl.value=a.items.filter(a=>a.id!==e).slice(0,10)}else bi()}catch(e){"CanceledError"!==e.name&&"AbortError"!==e.name&&bi()}},wi=async()=>{try{const e=await V.get("/api/v1/ads/icons",{signal:bl});Vl.value=(e.data||[]).filter(e=>!1!==e.is_active)}catch(e){"CanceledError"!==e.name&&e.name}},bi=()=>{Pl.value=[{id:101,title:"ÊûÅÂìÅÂ§ñÂõΩÂ•≥Á•û Ë∂ÖÁæéÂ´©Á©¥ Âàù‰∏ãÊµ∑Ë¢´ÊìçÂñ∑Ê∞¥ÔºÅ",cover_url:"/uploads/thumbnails/3.webp",duration:4099,view_count:1098e3},{id:102,title:"Ê≠£ÂÆóÂ§ßÂ≠¶ÁîüÂÆøËàçÁõ¥Êí≠ÈÅìÂÖ∑ÊèíÈÄºÈ™öËØùËøûÁØá",cover_url:"/uploads/thumbnails/3.webp",duration:1608,view_count:1752e3},{id:103,title:"Êé®ËçêËßÜÈ¢ë3",cover_url:"/uploads/thumbnails/3.webp",duration:3200,view_count:12300},{id:104,title:"Êé®ËçêËßÜÈ¢ë4",cover_url:"/uploads/thumbnails/3.webp",duration:1500,view_count:4500}]},Ci=()=>{if(!Ml.value)return;const e=Tl.value.hls_url?Tl.value.hls_url:Tl.value.original_url||"";e&&(Sl&&(Sl.destroy(),Sl=null),Sl=new j({container:Ml.value,url:e,poster:Qs(Tl.value.cover_url),volume:.7,isLive:!1,muted:!1,autoplay:!1,pip:!0,autoSize:!1,autoMini:!0,screenshot:!1,setting:!0,loop:!1,flip:!0,playbackRate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!1,miniProgressBar:!0,mutex:!0,backdrop:!0,playsInline:!0,autoPlayback:!0,airplay:!0,theme:"#ec4899",lang:"zh-cn",moreVideoAttr:{crossOrigin:"anonymous"},customType:{m3u8:function(e,a,l){if(L.isSupported()){l.hls&&l.hls.destroy();const s=new L({maxBufferLength:30,maxMaxBufferLength:60,maxBufferSize:6e7,maxBufferHole:.5,lowLatencyMode:!1,startLevel:-1,abrEwmaDefaultEstimate:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,backBufferLength:30});s.loadSource(a),s.attachMedia(e),l.hls=s,l.on("destroy",()=>s.destroy())}else e.canPlayType("application/vnd.apple.mpegurl")?e.src=a:l.notice.show="‰∏çÊîØÊåÅÊí≠ÊîæÊ†ºÂºè: m3u8"}},controls:[{name:"fast-rewind",position:"right",html:'<svg viewBox="0 0 24 24" width="22" height="22" fill="white"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"/></svg>',tooltip:"Âø´ÈÄÄ10Áßí",click:function(){Sl&&(Sl.currentTime=Math.max(0,Sl.currentTime-10))}},{name:"fast-forward",position:"right",html:'<svg viewBox="0 0 24 24" width="22" height="22" fill="white"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/></svg>',tooltip:"Âø´Ëøõ10Áßí",click:function(){Sl&&(Sl.currentTime=Math.min(Sl.duration,Sl.currentTime+10))}}]}),$l.value=Sl.video,Sl.on("play",()=>{El.value=!0}),Sl.on("pause",()=>{El.value=!1}),Sl.on("video:ended",()=>{El.value=!1,$i()}),Sl.on("video:timeupdate",()=>{xi()}),Sl.on("video:waiting",()=>{Sl.loading.show=!0}),Sl.on("video:canplay",()=>{Sl.loading.show=!1}))},xi=()=>{if(Sl&&(El.value=Sl.playing,es.value=Sl.currentTime,Jl.value&&!ql.value&&!Zl.value)){const e=Sl.currentTime,a=Tl.value.free_preview_seconds||30;e>=a&&(Sl.pause(),Sl.currentTime=a,Gl.value=!0,El.value=!1)}},$i=()=>{El.value=!1},Mi=async()=>{var e;const a=Hl.value,l=Tl.value.like_count||0;Hl.value=!a,Tl.value.like_count=a?Math.max(0,l-1):l+1;try{const e=await P.post(`/videos/${Tl.value.id}/like`),a=e.data||e;Hl.value=a.liked,Tl.value.like_count=a.like_count}catch(s){Hl.value=a,Tl.value.like_count=l,401===(null==(e=s.response)?void 0:e.status)&&E.warning("ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçÁÇπËµû")}},Ii=async()=>{var e;const a=Dl.value,l=Tl.value.favorite_count||0;Dl.value=!a,Tl.value.favorite_count=a?Math.max(0,l-1):l+1;try{const e=await P.post(`/videos/${Tl.value.id}/favorite`),a=e.data||e;Dl.value=a.favorited,Tl.value.favorite_count=a.favorite_count,E.success(a.favorited?"Êî∂ËóèÊàêÂäü":"Â∑≤ÂèñÊ∂àÊî∂Ëóè")}catch(s){Dl.value=a,Tl.value.favorite_count=l,401===(null==(e=s.response)?void 0:e.status)&&E.warning("ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçÊî∂Ëóè")}},Si=async()=>{var e,a,l;const s=Tl.value.uploader_id;if(s)try{Rl.value?(await P.delete(`/users/${s}/follow`),Rl.value=!1,E.success("Â∑≤ÂèñÊ∂àÂÖ≥Ê≥®")):(await P.post(`/users/${s}/follow`),Rl.value=!0,E.success("ÂÖ≥Ê≥®ÊàêÂäü"))}catch(i){401===(null==(e=i.response)?void 0:e.status)?E.warning("ËØ∑ÂÖàÁôªÂΩï"):E.error((null==(l=null==(a=i.response)?void 0:a.data)?void 0:l.detail)||"Êìç‰ΩúÂ§±Ë¥•")}},Ti=e=>{e&&wl.push(`/user/member/${e}`)},zi=()=>{Nl.value=!0},Pi=async()=>{var e,a;if(!Ul.value)return E.warning("‰∏ãËΩΩÂäüËÉΩ‰ªÖÈôêVIP‰ºöÂëò‰ΩøÁî®ÔºåËØ∑ÂÖàÂºÄÈÄöVIP"),void wl.push("/user/vip");try{const e=await P.get(`/videos/${Tl.value.id}/download-info`),a=e.data||e;if(!a.can_download)return void E.warning(a.message||"Êó†Ê≥ï‰∏ãËΩΩÊ≠§ËßÜÈ¢ë");const l=a.file_size_mb||0;E.info(`Ê≠£Âú®‰∏ãËΩΩ: ${a.title} (${l}MB)`),Vi({id:`video_${Tl.value.id}_${Date.now()}`,videoId:Tl.value.id,title:Tl.value.title,thumbnail:Tl.value.cover_url||Tl.value.thumbnail,duration:Tl.value.duration,views:Tl.value.view_count,fileSize:l,type:"video",status:"completed",downloadTime:Date.now()});const s=`/api/v1/videos/${Tl.value.id}/download`,i=document.createElement("a");i.href=s,i.download=`${a.title}.mp4`,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),E.success("‰∏ãËΩΩÂ∑≤ÂºÄÂßã")}catch(l){403===(null==(e=l.response)?void 0:e.status)?(E.warning("‰∏ãËΩΩÂäüËÉΩ‰ªÖÈôêVIP‰ºöÂëò‰ΩøÁî®"),wl.push("/user/vip")):404===(null==(a=l.response)?void 0:a.status)?E.error("ËßÜÈ¢ëÊñá‰ª∂‰∏çÂ≠òÂú®"):E.error("‰∏ãËΩΩÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï")}},Vi=e=>{try{const a=localStorage.getItem("video_downloads"),l=a?JSON.parse(a):[],s=l.findIndex(a=>a.videoId===e.videoId&&a.type===e.type);s>-1?l[s]=e:l.unshift(e),l.length>100&&l.pop(),localStorage.setItem("video_downloads",JSON.stringify(l))}catch(a){}},ji=async()=>{var e,a,l,s,i;if((jl.value.trim()||Es.value)&&!Ps.value)if(Ul.value){Ps.value=!0;try{let s=null;if(Es.value){const a=new FormData;a.append("file",Es.value);const l=await P.post("/comments/upload-image",a,{headers:{"Content-Type":"multipart/form-data"}});s=(null==(e=l.data)?void 0:e.url)||l.url}const i={content:jl.value.trim(),video_id:parseInt(z.params.id),parent_id:(null==(a=Vs.value)?void 0:a.parent_id)||(null==(l=Vs.value)?void 0:l.id)||null,image_url:s},t=await P.post("/comments",i),n=t.data||t;if(Vs.value){const e=Vs.value.parent_id||Vs.value.id,a=zl.value.find(a=>a.id===e);a&&(a.replies||(a.replies=[]),a.replies.push(n),a.reply_count=(a.reply_count||0)+1)}else{const e=zl.value.findIndex(e=>!e.is_pinned);-1===e?zl.value.push(n):zl.value.splice(e,0,n),xs.value++}jl.value="",Vs.value=null,Es.value=null,Hs.value="",Bs.value=!1}catch(t){401===(null==(s=t.response)?void 0:s.status)?alert("ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçÂèëË°®ËØÑËÆ∫"):403===(null==(i=t.response)?void 0:i.status)?alert("ËØ∑ÂÖàÂºÄÈÄöVIP‰ºöÂëòÊâçËÉΩÂèëË°®ËØÑËÆ∫"):alert("ÂèëË°®ËØÑËÆ∫Â§±Ë¥•ÔºåËØ∑ÈáçËØï")}finally{Ps.value=!1}}else alert("ËØ∑ÂÖàÂºÄÈÄöVIP‰ºöÂëòÊâçËÉΩÂèëË°®ËØÑËÆ∫")},Li=async e=>{var a;try{const a=await P.post(`/comments/${e.id}/like`),l=a.data||a;e.is_liked=!e.is_liked,e.like_count=l.like_count}catch(l){401===(null==(a=l.response)?void 0:a.status)&&alert("ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçÁÇπËµû")}};let Bi=0;const Ei=()=>{Bi++,Bi>=3?(Bi=0,wl.push("/user")):wl.back()},Hi=()=>{Bi=0},Di=()=>{Nl.value=!0},Ri=async()=>{E.info("ÈïøÊåâÂõæÁâá‰øùÂ≠òÂà∞Áõ∏ÂÜå")},Ui=e=>{Hi(),wl.push(`/user/video/${e}`).then(()=>{window.scrollTo(0,0)})},Wi=e=>{e.link&&window.open(e.link,"_blank")},Oi=e=>{const a=B(e),l=B().diff(a,"day");return 0===l?a.format("HH:mm"):l<7?a.fromNow():a.format("YYYY-MM-DD HH:mm")};return l(()=>z.params.id,async(e,a)=>{e&&e!==a&&(Sl&&(Sl.destroy(),Sl=null),rs.value=!1,os.value=!1,ns.value=null,us.value=!1,fs&&(Cl.clearInterval(fs),fs=null),await ei(),await Promise.all([ni(),ki(),wi(),vs()]),await i(),Ci())}),s(async()=>{Hi();try{const e=await P.get("/users/me"),a=e.data||e;js.value=a.id,Ul.value=a.is_vip||!1,Wl.value=a.vip_level||0,Ol.value=a.vip_level_name||"ÈùûVIP",Yl.value=a.vip_expire_date||null,Ls.value="admin"===a.role||"super_admin"===a.role}catch(e){}await ei(),await Promise.all([ni(),ki(),wi(),ii(),li(),vs()]),await i(),Ci()}),t(()=>{Sl&&(Sl.destroy(),Sl=null),fs&&Cl.clearInterval(fs)}),(e,a)=>($(),n("div",q,[o("div",{class:"back-btn",onClick:Ei},[...a[14]||(a[14]=[o("img",{src:M,alt:"ËøîÂõû",class:"back-icon"},null,-1)])]),o("div",J,[os.value&&ns.value?($(),n("div",G,[o("div",N,["video"===ns.value.ad_type?($(),n("video",{key:0,ref_key:"adVideoRef",ref:ts,class:"ad-video",src:ns.value.media_url,onTimeupdate:ps,onEnded:_s,onCanplay:ms,autoplay:"",playsinline:"",muted:""},null,40,K)):($(),n("div",{key:1,class:"ad-image-wrapper",onClick:ks},[o("img",{src:ns.value.media_url,class:"ad-image",onLoad:hs},null,40,Q)])),o("div",X,[us.value?($(),n("div",{key:1,class:"ad-close-btn",onClick:gs}," ÂÖ≥Èó≠ÂπøÂëä ‚úï ")):($(),n("div",Z," ÂπøÂëä "+v(cs.value)+"s ",1)),ns.value.target_url?($(),n("a",{key:2,href:ns.value.target_url,target:"_blank",class:"ad-link",onClick:ys}," ‰∫ÜËß£Êõ¥Â§ö ",8,ee)):r("",!0)]),a[15]||(a[15]=o("div",{class:"ad-label"},"ÂπøÂëä",-1))])])):r("",!0),o("div",{ref_key:"artPlayerRef",ref:Ml,class:d(["artplayer-container",{"hidden-by-ad":os.value}])},null,2),ql.value||Zl.value?($(),n("div",ae,[Zl.value?($(),n("span",le,[...a[16]||(a[16]=[o("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[o("path",{fill:"currentColor",d:"M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5z"})],-1),p(" VIPÂÖçË¥π ",-1)])])):($(),n("span",se,"‚úì Â∑≤Ë¥≠‰π∞"))])):r("",!0),Gl.value&&!ql.value?($(),n("div",ie,[o("div",te,[a[20]||(a[20]=o("h2",{class:"trial-ended-title"},"ËØïÁúãÁªìÊùü",-1)),a[21]||(a[21]=o("p",{class:"trial-ended-subtitle"},"ÂºÄÈÄöVIP Ê∞∏‰πÖÂÖçË¥πËßÇÁúã",-1)),o("div",ne,[o("button",{class:"share-btn",onClick:Di}," ÂàÜ‰∫´Âæó3Êó•VIP "),o("button",{class:"vip-btn",onClick:a[0]||(a[0]=a=>e.$router.push("/user/vip"))}," ÂºÄÈÄöVIPÂÖçË¥πÁúã ")]),Jl.value&&Tl.value.coin_price>0?($(),n("div",oe,[a[19]||(a[19]=o("span",{class:"divider-text"},"Êàñ",-1)),o("div",{class:"coin-price-info",onClick:si},[a[17]||(a[17]=o("span",{class:"coin-icon"},"ü™ô",-1)),o("span",null,v(Cs.value)+" ÈáëÂ∏ÅË¥≠‰π∞Êú¨Áâá",1),a[18]||(a[18]=o("span",{class:"arrow"},"‚Ä∫",-1))])])):r("",!0)])])):r("",!0)]),($(),c(_,{to:"body"},[Nl.value?($(),n("div",{key:0,class:"share-modal-overlay",onClick:a[3]||(a[3]=m(e=>Nl.value=!1,["self"]))},[o("div",ce,[o("button",{class:"share-modal-close",onClick:a[1]||(a[1]=e=>Nl.value=!1)},"√ó"),a[23]||(a[23]=o("div",{class:"share-header"},[o("img",{src:I,alt:"Logo",class:"share-logo"}),o("div",{class:"share-title-info"},[o("h3",{class:"share-site-name"},"SoulÊàê‰∫∫Áâà"),o("p",{class:"share-site-desc"},"ÂÖ®ÁΩëÊúÄÂÖ®Êàê‰∫∫ËßÜÈ¢ëÂπ≥Âè∞")])],-1)),o("div",ue,[o("img",{src:Tl.value.cover_url||"/images/default-cover.webp",alt:"Êé®ÂπøÂõæ"},null,8,re)]),o("div",ve,[o("div",de,[o("img",{src:is.value,alt:"‰∫åÁª¥Á†Å"},null,8,pe)]),o("div",me,[o("div",_e,[a[22]||(a[22]=p("ÈÇÄËØ∑Á†Å ",-1)),o("span",null,v(as.value),1)]),o("div",ge,"ÂÆòÊñπÁΩëÂùÄ:"+v(ls.value),1)])]),o("div",ye,[o("button",{class:"copy-link-btn",onClick:a[2]||(a[2]=e=>{return a=ss.value,void navigator.clipboard.writeText(a).then(()=>{E.success("ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂ÔºåÂàÜ‰∫´ÁªôÂ•ΩÂèãÊ≥®ÂÜåÂêéÂèØËé∑Âæó3Êó•VIP")}).catch(()=>{E.info("ËØ∑Â§çÂà∂ÈìæÊé•ÂàÜ‰∫´Ôºö"+a)});var a})},"Â§çÂà∂ÈìæÊé•"),o("button",{class:"save-image-btn",onClick:Ri},"‰øùÂ≠òÂõæÁâá")])])])):r("",!0)])),o("div",{class:"vip-promo",onClick:a[4]||(a[4]=a=>e.$router.push("/user/vip"))},[Ul.value?($(),n(g,{key:1},[o("div",fe,[Wl.value>0?($(),n("img",{key:0,src:ws.value,class:"vip-icon-promo"},null,8,he)):r("",!0),o("span",ke,"Âà∞ÊúüÊó∂Èó¥Ôºö"+v(bs.value||"Ê∞∏‰πÖ"),1)]),a[26]||(a[26]=o("div",{class:"promo-btn upgrade"},[p(" ÂçáÁ∫ß‰ºöÂëò "),o("span",{class:"arrow"},"‚Ä∫")],-1))],64)):($(),n(g,{key:0},[a[24]||(a[24]=o("span",{class:"promo-text"},"ÂºÄÈÄö‰ºöÂëò ‰∫´‰∏ìÂ±ûÁâπÊùÉ",-1)),a[25]||(a[25]=o("div",{class:"promo-btn"},[p(" ÂºÄÈÄö‰ºöÂëò "),o("span",{class:"arrow"},"‚Ä∫")],-1))],64))]),o("div",we,[o("div",{class:d(["tab-item",{active:"intro"===Ll.value}]),onClick:a[5]||(a[5]=e=>Ll.value="intro")}," ÁÆÄ‰ªã ",2),o("div",{class:d(["tab-item",{active:"comments"===Ll.value}]),onClick:a[6]||(a[6]=e=>Ll.value="comments")}," ËØÑËÆ∫ ("+v(xs.value)+") ",3),o("div",{class:"tab-right",onClick:a[7]||(a[7]=e=>Fl.value=!0)},[a[27]||(a[27]=o("span",{class:"line-icon"},"‚ö°",-1)),p(" Á∫øË∑Ø"+v(Al.value),1)])]),u(o("div",be,[o("div",Ce,[o("h1",xe,v(Tl.value.title),1),o("div",$e,[($(!0),n(g,null,f(Tl.value.tags||Rs,e=>($(),n("span",{key:e,class:"tag-item"},v(e),1))),128))]),o("div",Me,[o("img",{src:Xs(Tl.value.uploader_avatar,Tl.value.uploader_id||Tl.value.id),class:"avatar clickable",onClick:a[8]||(a[8]=e=>Ti(Tl.value.uploader_id))},null,8,Ie),o("div",Se,[o("div",Te,[o("span",{class:"name clickable",onClick:a[9]||(a[9]=e=>Ti(Tl.value.uploader_id))},v(Tl.value.uploader_name||"ÂåøÂêçÁî®Êà∑"),1),Tl.value.uploader_vip_level>0?($(),n("img",{key:0,src:Zs(Tl.value.uploader_vip_level),class:"vip-badge"},null,8,ze)):r("",!0),Tl.value.is_verified?($(),n("span",Pe,"üî∑ Ëá≥Â∞ä")):r("",!0)]),o("div",Ve,v(Ks.value),1)]),o("button",{class:d(["follow-btn",{followed:Rl.value}]),onClick:Si},v(Rl.value?"Â∑≤ÂÖ≥Ê≥®":"+ ÂÖ≥Ê≥®"),3)]),o("div",je,[o("div",Le,[o("span",Be,v(h(Y)(Tl.value.view_count))+"ËßÇÁúãÈáè",1)]),o("div",{class:"stat-item clickable",onClick:Mi},[o("span",{class:d(["stat-icon","heart",{active:Hl.value}])},[...a[28]||(a[28]=[o("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],2),o("span",Ee,v(h(O)(Tl.value.like_count)),1)]),o("div",{class:"stat-item clickable",onClick:Ii},[o("span",{class:d(["stat-icon","star",{active:Dl.value}])},[...a[29]||(a[29]=[o("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})],-1)])],2),o("span",He,v(Tl.value.favorite_count||0),1)]),o("div",{class:"stat-item clickable",onClick:zi},[...a[30]||(a[30]=[o("span",{class:"stat-icon share"},[o("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})])],-1),o("span",{class:"stat-label"},"ÂàÜ‰∫´",-1)])]),o("div",{class:"stat-item clickable",onClick:Pi},[o("span",{class:d(["stat-icon download",{"vip-feature":!Ul.value}])},[a[31]||(a[31]=o("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})],-1)),Ul.value?r("",!0):($(),n("span",De,"VIP"))],2),a[32]||(a[32]=o("span",{class:"stat-label"},"‰∏ãËΩΩ",-1))])])]),Vl.value.length>0?($(),n("div",Re,[o("div",Ue,[o("div",We,[($(!0),n(g,null,f(Vl.value,e=>($(),n("div",{key:"a-"+e.id,class:"ad-icon-item",onClick:a=>Wi(e)},[o("div",Ye,[e.image?($(),n("img",{key:0,src:e.image,alt:e.name},null,8,Ae)):($(),n("span",Fe,v(e.icon),1))]),o("span",qe,v(e.name),1)],8,Oe))),128)),($(!0),n(g,null,f(Vl.value,e=>($(),n("div",{key:"b-"+e.id,class:"ad-icon-item",onClick:a=>Wi(e)},[o("div",Ge,[e.image?($(),n("img",{key:0,src:e.image,alt:e.name},null,8,Ne)):($(),n("span",Ke,v(e.icon),1))]),o("span",Qe,v(e.name),1)],8,Je))),128))])],512)])):r("",!0),o("div",Xe,[($(),n(g,null,f(Us,(e,a)=>o("div",{key:a,class:d(["rec-tab",{active:Bl.value===a}]),onClick:e=>Bl.value=a},v(e),11,Ze)),64))]),o("div",ea,[o("div",aa,[($(!0),n(g,null,f(Pl.value,e=>{return $(),n("div",{key:e.id,class:"video-card",onClick:a=>Ns(e),onMouseenter:a=>{var l;(l=e).preview_url&&!Fs.value&&(Ys.value=l.id,As&&Cl.clearTimeout(As),As=Cl.setTimeout(()=>{Ys.value===l.id&&Js(l)},300))},onMouseleave:a=>(e=>{if(!Fs.value&&(As&&(Cl.clearTimeout(As),As=null),Ys.value===e.id)){Ys.value=null;const a=Os.value[e.id];a&&(a.pause(),a.currentTime=0,a.src="")}})(e),onTouchstartPassive:Gs},[o("div",sa,[o("img",{src:Qs(e.cover_url),alt:e.title,class:d({hidden:qs(e.id)})},null,10,ia),e.preview_url?($(),n("video",{key:0,ref_for:!0,ref:a=>((e,a)=>{a&&(Os.value[e]=a,xl.registerVideo(`preview_${e}`,a))})(e.id,a),"data-src":(l=e.preview_url,l?(l.startsWith("http"),l):""),class:d(["preview-video",{visible:qs(e.id)}]),muted:"",loop:"",playsinline:"",preload:"none"},null,10,ta)):r("",!0),o("div",na,[a[33]||(a[33]=o("span",{class:"play-icon"},"‚ñ∂",-1)),o("span",null,v(h(Y)(e.view_count)),1)]),o("div",oa,v(h(A)(e.duration)),1)]),o("div",ca,[o("p",ua,v(e.title),1),o("div",ra,[e.tags&&e.tags.length>0?($(),n("span",va,v(e.tags[0]),1)):e.category_name?($(),n("span",da,v(e.category_name),1)):($(),n("span",pa,"Á≤æÈÄâ")),o("span",ma,"ËØÑËÆ∫ "+v(e.comment_count||0),1)])])],40,la);var l}),128))])])],512),[[y,"intro"===Ll.value]]),u(o("div",_a,[o("div",ga,[Is.value&&Is.value.enabled?($(),n("div",ya,[o("img",{src:Is.value.avatar||"/images/avatars/icon_avatar_1.webp",class:"avatar"},null,8,fa),o("div",ha,[o("div",ka,[o("span",wa,v(Is.value.name),1),a[34]||(a[34]=o("img",{src:S,class:"supreme-vip-icon"},null,-1))]),o("p",ba,v(Is.value.content),1),o("div",Ca,[o("span",xa,v(ti(Is.value.updated_at)),1)])])])):r("",!0),zl.value.length>0?($(),n("div",$a,[($(!0),n(g,null,f(zl.value,e=>($(),n("div",{key:e.id,class:d(["comment-item",{"is-pinned":e.is_pinned,"is-official":e.is_official}])},[o("img",{src:Xs(e.user_avatar,e.user_id||e.id),class:"avatar clickable",onClick:a=>Ti(e.user_id)},null,8,Ma),o("div",Ia,[o("div",Sa,[o("span",{class:"username clickable",onClick:a=>Ti(e.user_id)},v(e.user_name),9,Ta),e.user_vip_level>0?($(),n("img",{key:0,src:Zs(e.user_vip_level),class:"vip-badge-sm"},null,8,za)):r("",!0),e.is_god?($(),n("img",Pa)):r("",!0),e.is_pinned?($(),n("span",Va,"üìå ÁΩÆÈ°∂")):r("",!0)]),o("p",ja,v(e.content),1),e.image_url?($(),n("div",{key:0,class:"comment-image",onClick:a=>_i(e.image_url)},[o("img",{src:e.image_url,alt:"comment image"},null,8,Ba)],8,La)):r("",!0),o("div",Ea,[o("span",Ha,v(Oi(e.created_at)),1),o("span",{class:d(["like-btn",{liked:e.is_liked}]),onClick:a=>Li(e)},v(e.is_liked?"‚ù§Ô∏è":"ü§ç")+" "+v(e.like_count||0),11,Da),o("span",{class:"reply-btn",onClick:a=>ci(e)},"ÂõûÂ§ç",8,Ra),Ls.value?($(),n("span",{key:0,class:"delete-btn",onClick:a=>(async(e,a=null)=>{if(confirm("Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°ËØÑËÆ∫ÂêóÔºü"))try{if(await P.delete(`/comments/${e.id}`),a){const l=a.replies.findIndex(a=>a.id===e.id);l>-1&&(a.replies.splice(l,1),a.reply_count=Math.max(0,(a.reply_count||1)-1))}else{const a=zl.value.findIndex(a=>a.id===e.id);a>-1&&(zl.value.splice(a,1),xs.value=Math.max(0,xs.value-1))}}catch(l){alert("Âà†Èô§Â§±Ë¥•ÔºåËØ∑ÈáçËØï")}})(e)},"Âà†Èô§",8,Ua)):r("",!0)]),e.replies&&e.replies.length>0?($(),n("div",Wa,[($(!0),n(g,null,f(e.replies,a=>($(),n("div",{key:a.id,class:"reply-item"},[o("img",{src:Xs(a.user_avatar,a.user_id||a.id),class:"reply-avatar clickable",onClick:e=>Ti(a.user_id)},null,8,Oa),o("div",Ya,[o("span",{class:"username clickable",onClick:e=>Ti(a.user_id)},v(a.user_name),9,Aa),a.is_official?($(),n("span",Fa,"ÂÆòÊñπ")):r("",!0),a.user_vip_level>0?($(),n("img",{key:1,src:Zs(a.user_vip_level),class:"vip-badge-tiny"},null,8,qa)):r("",!0),o("p",Ja,v(a.content),1),a.image_url?($(),n("div",{key:2,class:"comment-image small",onClick:e=>_i(a.image_url)},[o("img",{src:a.image_url,alt:"reply image"},null,8,Na)],8,Ga)):r("",!0),o("div",Ka,[o("span",Qa,v(Oi(a.created_at)),1),o("span",{class:d(["like-btn",{liked:a.is_liked}]),onClick:e=>Li(a)},v(a.is_liked?"‚ù§Ô∏è":"ü§ç")+" "+v(a.like_count||0),11,Xa),o("span",{class:"reply-btn",onClick:l=>ci(e,a)},"ÂõûÂ§ç",8,Za)])])]))),128)),e.reply_count>e.replies.length?($(),n("div",{key:0,class:"more-replies",onClick:e=>(async()=>{})()}," Â±ïÂºÄÊõ¥Â§ö "+v(e.reply_count-e.replies.length)+" Êù°ÂõûÂ§ç ‚Ä∫ ",9,el)):r("",!0)])):r("",!0)])],2))),128))])):($(),n("div",al,[...a[35]||(a[35]=[o("p",null,"ËøòÊ≤°ÊúâËØÑËÆ∫ÔºåÂø´Êù•Êä¢Ê≤ôÂèëÂêß~",-1)])])),Ts.value||zs.value?($(),n("div",ll,[o("button",{onClick:oi,disabled:zs.value,class:"load-more-btn"},[zs.value?($(),n("span",il,[...a[36]||(a[36]=[o("svg",{viewBox:"0 0 24 24",class:"spin-icon"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"3",fill:"none","stroke-dasharray":"31.4 31.4"})],-1),p(" Âä†ËΩΩ‰∏≠... ",-1)])])):($(),n("span",tl," üìú Âä†ËΩΩÊõ¥Â§öËØÑËÆ∫ "))],8,sl)])):r("",!0),!Ts.value&&zl.value.length>0&&!zs.value?($(),n("div",nl,[...a[37]||(a[37]=[o("span",null,"‚Äî‚Äî Â∑≤Âä†ËΩΩÂÖ®ÈÉ®ËØÑËÆ∫ ‚Äî‚Äî",-1)])])):r("",!0)]),o("div",ol,[Ul.value?($(),n("div",cl,[Es.value?($(),n("div",ul,[o("img",{src:Hs.value,alt:"preview"},null,8,rl),o("span",{class:"remove-image",onClick:vi},"√ó")])):r("",!0),o("div",vl,[u(o("input",{"onUpdate:modelValue":a[11]||(a[11]=e=>jl.value=e),type:"text",placeholder:Vs.value?`ÂõûÂ§ç @${Vs.value.user_name}`:"ËØ¥ÁÇπ‰ªÄ‰πàÂêß...",onKeyup:k(ji,["enter"]),ref_key:"commentInputRef",ref:Il},null,40,dl),[[w,jl.value]]),o("div",pl,[Vs.value?($(),n("span",{key:0,class:"cancel-btn",onClick:ui},"ÂèñÊ∂à")):r("",!0),o("span",{class:"emoji-btn",onClick:a[12]||(a[12]=e=>Bs.value=!Bs.value)},"üòä"),o("label",ml,[o("input",{type:"file",accept:"image/*",onChange:ri,hidden:""},null,32),a[39]||(a[39]=p(" üñºÔ∏è ",-1))]),o("span",{class:d(["send-btn",{disabled:Ps.value}]),onClick:ji},[...a[40]||(a[40]=[o("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20"},[o("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})],-1)])],2)])]),Bs.value?($(),n("div",_l,[o("div",gl,[($(),n(g,null,f(Ds,e=>o("span",{key:e,class:"emoji-item",onClick:a=>(e=>{var a;jl.value+=e,Bs.value=!1,null==(a=Il.value)||a.focus()})(e)},v(e),9,yl)),64))])])):r("",!0)])):($(),n("div",{key:0,class:"vip-comment-tip",onClick:a[10]||(a[10]=a=>e.$router.push("/user/vip"))},[...a[38]||(a[38]=[o("span",{class:"tip-icon"},"üëë",-1),o("span",{class:"tip-text"},"ÂºÄÈÄöVIPÂç≥ÂèØÂèëË°®ËØÑËÆ∫",-1),o("span",{class:"tip-btn"},"Á´ãÂç≥ÂºÄÈÄö ‚Ä∫",-1)])]))])],512),[[y,"comments"===Ll.value]]),($(),c(_,{to:"body"},[di.value?($(),n("div",{key:0,class:"lightbox-overlay",onClick:m(gi,["self"])},[o("div",fl,[o("button",{class:"lightbox-close",onClick:gi},"‚úï"),o("img",{src:pi.value,class:"lightbox-image",style:b({transform:`scale(${mi.value})`}),onClick:a[13]||(a[13]=m(()=>{},["stop"]))},null,12,hl),o("div",kl,[o("button",{class:"control-btn",onClick:fi,title:"Áº©Â∞è"},[...a[41]||(a[41]=[o("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[o("path",{d:"M19 13H5v-2h14v2z"})],-1)])]),o("button",{class:"control-btn",onClick:hi,title:"ÈáçÁΩÆ"},v(Math.round(100*mi.value))+"% ",1),o("button",{class:"control-btn",onClick:yi,title:"ÊîæÂ§ß"},[...a[42]||(a[42]=[o("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[o("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])])])])])):r("",!0)]))]))}},[["__scopeId","data-v-269ba052"]]);export{wl as default};
