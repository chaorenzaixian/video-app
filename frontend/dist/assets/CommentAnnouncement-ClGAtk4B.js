/* empty css             *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                    *//* empty css                 *//* empty css                  */import{be as a,E as e,aR as l,aS as t,bo as n,aT as s,bw as o,aQ as u,a6 as d,aM as r,aL as m}from"./element-plus-DlIn_qXi.js";import{_ as c,a as p}from"./index-C3P4JTuA.js";import{r as v,j as i,y as f,O as _,F as b,z as y,C as g,E as h,I as j,u as w,K as V,L as x}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const C={class:"announcement-page"},k={class:"avatar-upload"},M=["src"],S={style:{color:"#999"}},Y=c({__name:"CommentAnnouncement",setup(c){const Y=v({enabled:!0,name:"Soulå®˜æ–¹",avatar:"",content:"",updated_at:null}),D=v(!1),U=v(!0),z=async a=>{const l=new FormData;l.append("file",a.raw);try{const a=await p.post("/settings/comment-announcement/avatar",l,{headers:{"Content-Type":"multipart/form-data"}}),t=a.data||a;Y.value.avatar=t.avatar,e.success("å¤´åƒä¸Šä¼ æˆåŠŸ")}catch(t){e.error("å¤´åƒä¸Šä¼ å¤±è´¥")}},A=async()=>{D.value=!0;try{const a=await p.put("/settings/comment-announcement",{enabled:Y.value.enabled,name:Y.value.name,content:Y.value.content,avatar:Y.value.avatar}),l=a.data||a;Y.value.updated_at=l.updated_at,e.success("ä¿å­˜æˆåŠŸ")}catch(a){e.error("ä¿å­˜å¤±è´¥")}finally{D.value=!1}};return i(()=>{(async()=>{U.value=!0;try{const a=await p.get("/settings/comment-announcement"),e=a.data||a;Y.value={enabled:!1!==e.enabled,name:e.name||"Soulå®˜æ–¹",avatar:e.avatar||"",content:e.content||"",updated_at:e.updated_at}}catch(a){e.warning("è·å–å…¬å‘Šè®¾ç½®å¤±è´¥ï¼Œè¯·ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨"),Y.value.enabled=!0}finally{U.value=!1}})()}),(e,c)=>{const p=n,v=t,i=s,E=u,F=o,H=r,I=l,L=a;return y(),f("div",C,[_(L,null,{header:b(()=>[...c[4]||(c[4]=[g("div",{class:"card-header"},[g("span",null,"è¯„è®ºåŒºå…¬å‘Šè®¾ç½®")],-1)])]),default:b(()=>[_(I,{model:Y.value,"label-width":"100px",style:{"max-width":"600px"}},{default:b(()=>[_(v,{label:"å¯ç”¨å…¬å‘Š"},{default:b(()=>[_(p,{modelValue:Y.value.enabled,"onUpdate:modelValue":c[0]||(c[0]=a=>Y.value.enabled=a),loading:U.value},null,8,["modelValue","loading"])]),_:1}),_(v,{label:"å…¬å‘Šåç§°"},{default:b(()=>[_(i,{modelValue:Y.value.name,"onUpdate:modelValue":c[1]||(c[1]=a=>Y.value.name=a),placeholder:"å¦‚ï¼šSoulå®˜æ–¹"},null,8,["modelValue"])]),_:1}),_(v,{label:"å…¬å‘Šå¤´åƒ"},{default:b(()=>[g("div",k,[_(F,{class:"avatar-uploader",action:"","show-file-list":!1,"auto-upload":!1,accept:"image/*",onChange:z},{default:b(()=>[Y.value.avatar?(y(),f("img",{key:0,src:Y.value.avatar,class:"avatar-preview"},null,8,M)):(y(),h(E,{key:1,class:"avatar-uploader-icon"},{default:b(()=>[_(w(d))]),_:1}))]),_:1}),Y.value.avatar?(y(),h(H,{key:0,type:"danger",size:"small",onClick:c[2]||(c[2]=a=>Y.value.avatar="")},{default:b(()=>[...c[5]||(c[5]=[V(" åˆ é™¤å¤´åƒ ",-1)])]),_:1})):j("",!0)])]),_:1}),_(v,{label:"å…¬å‘Šå†…å®¹"},{default:b(()=>[_(i,{modelValue:Y.value.content,"onUpdate:modelValue":c[3]||(c[3]=a=>Y.value.content=a),type:"textarea",rows:5,placeholder:"æ”¯æŒè¡¨æƒ…ç¬¦å·ï¼Œå¦‚ï¼šğŸ”¥é™æ—¶ä¼˜æƒ ğŸ”¥..."},null,8,["modelValue"])]),_:1}),_(v,{label:"æ›´æ–°æ—¶é—´"},{default:b(()=>{return[g("span",S,x((a=Y.value.updated_at,a?m(a).format("YYYY-MM-DD HH:mm"):"")),1)];var a}),_:1}),_(v,null,{default:b(()=>[_(H,{type:"primary",onClick:A,loading:D.value},{default:b(()=>[...c[6]||(c[6]=[V(" ä¿å­˜è®¾ç½® ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},[["__scopeId","data-v-2297329d"]]);export{Y as default};
