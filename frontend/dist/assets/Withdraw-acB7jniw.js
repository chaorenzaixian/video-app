import{c as a,az as e,r as l,j as s,y as t,C as c,I as u,L as n,G as i,af as o,M as r,H as v,K as d,aa as p,U as m,aC as h,z as w}from"./vue-vendor-Ba_vealp.js";import{_ as k}from"./ic_back-BPdSG6fy.js";import{_ as g}from"./ic_coin-Bb_SXkyj.js";import{_ as y,a as b}from"./index-C3P4JTuA.js";import{E as f}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const _="/images/backgrounds/ic_union_pay.webp",x="/images/backgrounds/mine_withdraw_sel.webp",$={class:"withdraw-page"},U={class:"page-header"},C={class:"balance-card"},j={class:"balance-value"},D={class:"value-num gradient-gold"},S={key:0,class:"balance-cash"},V={class:"withdraw-form"},T={class:"form-row"},F={class:"row-label"},M=["placeholder"],z={key:0,class:"exchange-tip"},H={class:"form-row method-row"},I={class:"method-options"},q={class:"check-circle"},E={key:0,src:x,alt:"selected",class:"check-img"},G={class:"check-circle"},K={key:0,src:x,alt:"selected",class:"check-img"},L={class:"check-circle"},W={key:0,src:x,alt:"selected",class:"check-img"},A={class:"check-circle"},B={key:0,src:x,alt:"selected",class:"check-img"},J={class:"check-circle"},N={key:0,src:x,alt:"selected",class:"check-img"},O={class:"form-row"},P={class:"form-row"},Q={class:"form-row"},R={key:2,class:"form-row"},X={class:"form-row"},Y=["placeholder"],Z={class:"form-row"},aa={key:4,class:"fee-info"},ea={class:"fee-rate"},la={class:"actual-amount"},sa={class:"withdraw-rules"},ta={class:"submit-section"},ca=["disabled"],ua={class:"modal-content"},na={class:"modal-header"},ia={class:"modal-body"},oa={class:"record-info"},ra={class:"record-amount"},va={key:0,class:"record-cash"},da={class:"record-time"},pa={key:0,class:"empty"},ma=y({__name:"Withdraw",setup(y){const x=h(),ma=e(),ha=a(()=>ma.query.type||"agent"),wa=l(0),ka=l(""),ga=l(""),ya=l(""),ba=l(""),fa=l(""),_a=l(""),xa=l(""),$a=l(""),Ua=l(20),Ca=l(250),ja=l(1e4),Da=l([]),Sa=l(!1),Va=l(!1),Ta=l([]);s(()=>{"creator"===ha.value?(ga.value="alipay",Ca.value=1e3):ga.value="usdt"});const Fa=a(()=>"creator"===ha.value?`最低提现${Ca.value}金币`:`单笔提现金额范围${Ca.value}-${ja.value}元`),Ma=a(()=>{const a=parseFloat(ka.value)||0;if(a<=0)return 0;return(a-a*(Ua.value/100)).toFixed(2)}),za=a=>{const e=new Date(a);return`${e.getMonth()+1}/${e.getDate()} ${e.getHours()}:${String(e.getMinutes()).padStart(2,"0")}`},Ha=()=>{"creator"===ha.value?(Va.value=!0,Ia()):x.push("/user/withdraw-history")},Ia=async()=>{var a;if("creator"===ha.value)try{const a=await b.get("/creator/withdrawals");Ta.value=a.data||[]}catch(e){null==(a=e.response)||a.status}},qa=async()=>{var a,e;const l=parseFloat(ka.value);if(!l||l<Ca.value)f.warning(`提现${"creator"===ha.value?"金币":"金额"}最低${Ca.value}${"creator"===ha.value?"金币":"元"}`);else if("agent"===ha.value&&l>ja.value)f.warning(`单笔提现最大${ja.value}元`);else if(l>wa.value)f.warning("余额不足");else{if("bank"===ga.value){if(!ya.value)return void f.warning("请输入银行卡号");if(!ba.value)return void f.warning("请输入开户姓名");if(!fa.value)return void f.warning("请输入开户银行")}else if("usdt"===ga.value){if(!_a.value)return void f.warning("请输入USDT地址")}else if("alipay"===ga.value||"wechat"===ga.value){if(!xa.value)return void f.warning("请输入收款账号");if(!$a.value)return void f.warning("请输入收款人姓名")}Sa.value=!0;try{"creator"===ha.value?await b.post("/creator/withdraw",{coins_amount:l,payment_method:ga.value,payment_account:"bank"===ga.value?`${ya.value}|${ba.value}|${fa.value}`:xa.value,payment_name:"bank"===ga.value?ba.value:$a.value}):await b.post("/promotion/withdraw/apply",{amount:l,method:ga.value,account:"bank"===ga.value?`${ya.value}|${ba.value}|${fa.value}`:_a.value,fee_rate:Ua.value}),f.success("提现申请已提交，请等待审核"),x.back()}catch(s){f.error((null==(e=null==(a=s.response)?void 0:a.data)?void 0:e.detail)||"提现失败")}finally{Sa.value=!1}}},Ea=()=>{f.info("请联系在线客服")};return s(()=>{(async()=>{var a;if("agent"===ha.value)try{const a=await b.get("/config/withdraw"),e=a.data||a;Ua.value=e.fee_rate||20,Ca.value=e.min_amount||250,ja.value=e.max_amount||1e4,Da.value=e.rules||[]}catch(e){null==(a=e.response)||a.status}})(),(async()=>{var a;try{if("creator"===ha.value){const a=await b.get("/creator/dashboard"),e=a.data||a;wa.value=e.available_coins||0}else{const a=await b.get("/promotion/agent/info"),e=a.data||a;wa.value=e.available_balance||0}}catch(e){null==(a=e.response)||a.status,wa.value=0}})()}),(a,e)=>(w(),t("div",$,[c("header",U,[c("div",{class:"back-btn",onClick:e[0]||(e[0]=e=>a.$router.back())},[...e[15]||(e[15]=[c("img",{src:k,alt:"返回",class:"back-icon"},null,-1)])]),e[16]||(e[16]=c("h1",{class:"page-title"},"立即提现",-1)),c("div",{class:"header-right",onClick:Ha},"明细")]),c("div",C,[e[18]||(e[18]=c("div",{class:"balance-label"},[c("span",{class:"label-icon"}),c("span",{class:"label-text"},"余额(金币)")],-1)),c("div",j,[e[17]||(e[17]=c("img",{src:g,alt:"coin",class:"coin-icon"},null,-1)),c("span",D,n(Math.floor(wa.value)),1)]),"creator"===ha.value?(w(),t("div",S," ≈ ¥"+n((.01*wa.value).toFixed(2)),1)):u("",!0)]),c("div",V,[e[44]||(e[44]=c("div",{class:"form-row"},[c("span",{class:"row-label"},"提现币类："),c("span",{class:"row-value"},"人民币")],-1)),c("div",T,[c("span",F,n("creator"===ha.value?"提现金币：":"提现金额："),1),i(c("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>ka.value=a),class:"amount-input",placeholder:Fa.value},null,8,M),[[o,ka.value]])]),"creator"===ha.value?(w(),t("div",z," 兑换比例: 100金币 = 1元，预计到账 ¥"+n((.01*(ka.value||0)).toFixed(2)),1)):u("",!0),c("div",H,[e[29]||(e[29]=c("span",{class:"row-label"},"提现方式：",-1)),c("div",I,["agent"===ha.value?(w(),t(r,{key:0},[c("div",{class:v(["method-item",{active:"bank"===ga.value}]),onClick:e[2]||(e[2]=a=>ga.value="bank")},[e[19]||(e[19]=c("img",{src:_,alt:"银行卡",class:"method-icon"},null,-1)),e[20]||(e[20]=c("span",null,"银行卡",-1)),c("div",q,["bank"===ga.value?(w(),t("img",E)):u("",!0)])],2),c("div",{class:v(["method-item",{active:"usdt"===ga.value}]),onClick:e[3]||(e[3]=a=>ga.value="usdt")},[e[21]||(e[21]=c("img",{src:"/images/backgrounds/ic_usdt.webp",alt:"USDT",class:"method-icon"},null,-1)),e[22]||(e[22]=c("span",null,"USDT",-1)),c("div",G,["usdt"===ga.value?(w(),t("img",K)):u("",!0)])],2)],64)):(w(),t(r,{key:1},[c("div",{class:v(["method-item",{active:"alipay"===ga.value}]),onClick:e[4]||(e[4]=a=>ga.value="alipay")},[e[23]||(e[23]=c("div",{class:"method-icon-text alipay"},"支",-1)),e[24]||(e[24]=c("span",null,"支付宝",-1)),c("div",L,["alipay"===ga.value?(w(),t("img",W)):u("",!0)])],2),c("div",{class:v(["method-item",{active:"wechat"===ga.value}]),onClick:e[5]||(e[5]=a=>ga.value="wechat")},[e[25]||(e[25]=c("div",{class:"method-icon-text wechat"},"微",-1)),e[26]||(e[26]=c("span",null,"微信",-1)),c("div",A,["wechat"===ga.value?(w(),t("img",B)):u("",!0)])],2),c("div",{class:v(["method-item",{active:"bank"===ga.value}]),onClick:e[6]||(e[6]=a=>ga.value="bank")},[e[27]||(e[27]=c("img",{src:_,alt:"银行卡",class:"method-icon"},null,-1)),e[28]||(e[28]=c("span",null,"银行卡",-1)),c("div",J,["bank"===ga.value?(w(),t("img",N)):u("",!0)])],2)],64))])]),"bank"===ga.value?(w(),t(r,{key:1},[c("div",O,[e[30]||(e[30]=c("span",{class:"row-label"},"银行卡号：",-1)),i(c("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=a=>ya.value=a),class:"text-input",placeholder:"请输入银行卡号"},null,512),[[o,ya.value]])]),c("div",P,[e[31]||(e[31]=c("span",{class:"row-label"},"开户姓名：",-1)),i(c("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=a=>ba.value=a),class:"text-input",placeholder:"请输入开户姓名"},null,512),[[o,ba.value]])]),c("div",Q,[e[32]||(e[32]=c("span",{class:"row-label"},"开户银行：",-1)),i(c("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=a=>fa.value=a),class:"text-input",placeholder:"请输入开户银行"},null,512),[[o,fa.value]])])],64)):u("",!0),"usdt"===ga.value?(w(),t("div",R,[e[33]||(e[33]=c("span",{class:"row-label"},"USDT地址：",-1)),i(c("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=a=>_a.value=a),class:"text-input",placeholder:"请输入USDT地址"},null,512),[[o,_a.value]])])):u("",!0),"creator"!==ha.value||"alipay"!==ga.value&&"wechat"!==ga.value?u("",!0):(w(),t(r,{key:3},[c("div",X,[e[34]||(e[34]=c("span",{class:"row-label"},"收款账号：",-1)),i(c("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=a=>xa.value=a),class:"text-input",placeholder:"alipay"===ga.value?"请输入支付宝账号":"请输入微信账号"},null,8,Y),[[o,xa.value]])]),c("div",Z,[e[35]||(e[35]=c("span",{class:"row-label"},"收款姓名：",-1)),i(c("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=a=>$a.value=a),class:"text-input",placeholder:"请输入真实姓名"},null,512),[[o,$a.value]])])],64)),"agent"===ha.value?(w(),t("div",aa,[c("span",ea,[e[36]||(e[36]=d("手续费率：",-1)),c("em",null,n(Ua.value)+"%",1)]),c("span",la,[e[37]||(e[37]=d("实际到账金额: ",-1)),c("em",null,n(Ma.value),1)])])):u("",!0),c("div",sa,[e[43]||(e[43]=c("h4",null,"提现规则：",-1)),"creator"===ha.value?(w(),t(r,{key:0},[c("p",null,"1、每次提现最低"+n(Ca.value)+"金币起，且为整数。",1),e[38]||(e[38]=c("p",null,"2、兑换比例: 100金币 = 1元人民币。",-1)),e[39]||(e[39]=c("p",null,"3、支持支付宝、微信、银行卡提现，到账时间不超72小时。",-1)),e[40]||(e[40]=c("p",null,"4、申请提现后请随时关注收款账户进款通知，长时间未到账，请及时联系客服。",-1))],64)):Da.value.length?(w(!0),t(r,{key:1},p(Da.value,(a,e)=>(w(),t("p",{key:e},n(e+1)+"、"+n(a),1))),128)):(w(),t(r,{key:2},[c("p",null,"1、每次提现金额最低"+n(Ca.value)+"元起，单笔提现最大"+n(ja.value)+"元，且为整数。",1),c("p",null,"2、每次提现收取"+n(Ua.value)+"%手续费。",1),e[41]||(e[41]=c("p",null,"3、支持银行卡或USDT提现，收款账户卡号与姓名一致，到账时间不超72小时内",-1)),e[42]||(e[42]=c("p",null,"4、申请提现后请随时关注收款账户进款通知，长时间未到账，请及时联系客服",-1))],64))])]),c("div",ta,[c("button",{class:"submit-btn",onClick:qa,disabled:Sa.value},n(Sa.value?"提交中...":"立即提现"),9,ca),c("p",{class:"contact-tip"},[e[45]||(e[45]=d(" 提现中如有问题，请联系 ",-1)),c("span",{class:"link",onClick:Ea},"在线客服")])]),Va.value?(w(),t("div",{key:0,class:"history-modal",onClick:e[14]||(e[14]=m(a=>Va.value=!1,["self"]))},[c("div",ua,[c("div",na,[e[46]||(e[46]=c("span",null,"提现记录",-1)),c("button",{onClick:e[13]||(e[13]=a=>Va.value=!1)},"×")]),c("div",ia,[(w(!0),t(r,null,p(Ta.value,a=>{return w(),t("div",{key:a.id,class:"record-item"},[c("div",oa,[c("span",ra,n(a.coins_amount||a.amount)+n("creator"===ha.value?"金币":"元"),1),a.cash_amount?(w(),t("span",va,"¥"+n(a.cash_amount),1)):u("",!0),c("span",da,n(za(a.created_at)),1)]),c("span",{class:v(["record-status",a.status])},n((e=a.status,{pending:"待处理",processing:"处理中",completed:"已完成",rejected:"已拒绝",approved:"已通过"}[e]||e)),3)]);var e}),128)),0===Ta.value.length?(w(),t("div",pa,"暂无记录")):u("",!0)])])])):u("",!0)]))}},[["__scopeId","data-v-50fc3c02"]]);export{ma as default};
