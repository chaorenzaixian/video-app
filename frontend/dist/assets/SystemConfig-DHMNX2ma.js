/* empty css             *//* empty css                   *//* empty css                 *//* empty css                 *//* empty css                    *//* empty css                  */import{_ as e,a}from"./index-C3P4JTuA.js";import{aM as l,bz as s,bs as t,E as o,bA as n,aT as u,bI as i}from"./element-plus-DlIn_qXi.js";import{r,j as d,y as c,C as p,O as m,G as v,F as y,E as g,I as f,M as h,aa as k,z as _,K as b,L as w}from"./vue-vendor-Ba_vealp.js";import"./utils-DflAyOWx.js";const j={class:"system-config-page"},V={class:"page-header"},U={class:"config-list"},C={class:"config-info"},x={class:"config-label"},E={class:"config-key"},I={class:"config-value"},z=e({__name:"SystemConfig",setup(e){const z=r(!1),F=r(!1),M=r("credential"),T=r([]),A=r([]),G=["credential_tip","share_desc","withdraw_rule_1","withdraw_rule_2","withdraw_rule_3","withdraw_rule_4"],K=async()=>{z.value=!0;try{const e=await a.get("/config/",{params:{group_name:M.value}});A.value=e.data||[]}catch(e){o.error("获取配置失败")}finally{z.value=!1}},L=async()=>{F.value=!0;try{const e={};A.value.forEach(a=>{e[a.key]=a.value||""}),await a.post("/config/batch",e),o.success("保存成功")}catch(e){o.error("保存失败")}finally{F.value=!1}};return d(()=>{(async()=>{try{const e=await a.get("/config/groups");T.value=e.data||[],T.value.length>0&&!T.value.find(e=>e.key===M.value)&&(M.value=T.value[0].key)}catch(e){T.value=[{key:"credential",name:"账号凭证"},{key:"basic",name:"基础配置"},{key:"share",name:"分享配置"}]}})(),K()}),(e,a)=>{const o=l,r=n,d=s,O=u,R=i,S=t;return _(),c("div",j,[p("div",V,[a[2]||(a[2]=p("h2",null,"系统配置",-1)),m(o,{type:"primary",onClick:L,loading:F.value},{default:y(()=>[...a[1]||(a[1]=[b(" 保存全部 ",-1)])]),_:1},8,["loading"])]),m(d,{modelValue:M.value,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),onTabChange:K},{default:y(()=>[(_(!0),c(h,null,k(T.value,e=>(_(),g(r,{key:e.key,label:e.name,name:e.key},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),v((_(),c("div",U,[(_(!0),c(h,null,k(A.value,e=>{return _(),c("div",{class:"config-item",key:e.key},[p("div",C,[p("label",x,w(e.description||e.key),1),p("span",E,w(e.key),1)]),p("div",I,[(a=e.key,G.includes(a)?(_(),g(O,{key:1,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"textarea",rows:3,placeholder:e.description},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(_(),g(O,{key:0,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:e.description},null,8,["modelValue","onUpdate:modelValue","placeholder"])))])]);var a}),128)),z.value||0!==A.value.length?f("",!0):(_(),g(R,{key:0,description:"暂无配置项"}))])),[[S,z.value]])])}}},[["__scopeId","data-v-4e16d98d"]]);export{z as default};
