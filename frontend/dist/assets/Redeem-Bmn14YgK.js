import{r as s,j as a,y as e,C as l,G as t,af as c,M as o,aa as n,L as i,z as r}from"./vue-vendor-Ba_vealp.js";import{_ as d}from"./ic_back-BPdSG6fy.js";import{_ as u,a as p}from"./index-C3P4JTuA.js";import{E as v}from"./element-plus-DlIn_qXi.js";import"./utils-DflAyOWx.js";const m={class:"redeem-page"},b={class:"page-header"},y={class:"content"},h={class:"input-section"},g={class:"input-group"},k={class:"records-section"},f={class:"records-table"},_={key:0,class:"table-body"},j={class:"col"},w={class:"col"},x={class:"col"},C={key:1,class:"empty-records"},I={class:"bottom-bar"},U=["disabled"],z=u({__name:"Redeem",setup(u){const z=s(""),E=s(!1),G=s([]),L=async()=>{var s;try{const s=await p.get("/redeem/records");G.value=s.data||s||[]}catch(a){null==(s=a.response)||s.status,G.value=[]}},M=async()=>{var s,a,e;if(z.value){E.value=!0;try{const s=await p.post("/redeem/use",{code:z.value});v.success(s.message||"兑换成功"),z.value="",L()}catch(l){404===(null==(s=l.response)?void 0:s.status)?v.warning("兑换功能暂未开放"):v.error((null==(e=null==(a=l.response)?void 0:a.data)?void 0:e.detail)||"兑换失败，请检查兑换码是否正确")}finally{E.value=!1}}else v.warning("请输入兑换码")};return a(()=>{L()}),(s,a)=>(r(),e("div",m,[l("header",b,[l("div",{class:"back-btn",onClick:a[0]||(a[0]=a=>s.$router.back())},[...a[3]||(a[3]=[l("img",{src:d,alt:"返回",class:"back-icon"},null,-1)])]),a[4]||(a[4]=l("h1",{class:"page-title"},"领取兑换",-1)),a[5]||(a[5]=l("div",{class:"header-right"},null,-1))]),l("div",y,[l("div",h,[a[7]||(a[7]=l("h2",{class:"section-title"},"输入兑换码",-1)),a[8]||(a[8]=l("p",{class:"section-desc"},"兑换码只能兑换一次",-1)),l("div",g,[a[6]||(a[6]=l("label",{class:"input-label"},"兑换码",-1)),t(l("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>z.value=s),type:"text",class:"code-input",placeholder:"请输入兑换码（字母大写）",onInput:a[2]||(a[2]=s=>z.value=z.value.toUpperCase())},null,544),[[c,z.value]])]),a[9]||(a[9]=l("p",{class:"tip-text"},"官方社群领取更多福利",-1))]),l("div",k,[a[12]||(a[12]=l("h2",{class:"section-title"},"兑换记录",-1)),l("div",f,[a[11]||(a[11]=l("div",{class:"table-header"},[l("span",{class:"col"},"兑换码"),l("span",{class:"col"},"兑换类型"),l("span",{class:"col"},"兑换时间")],-1)),G.value.length>0?(r(),e("div",_,[(r(!0),e(o,null,n(G.value,s=>(r(),e("div",{key:s.id,class:"table-row"},[l("span",j,i(s.code),1),l("span",w,i(s.type),1),l("span",x,i(s.time),1)]))),128))])):(r(),e("div",C,[...a[10]||(a[10]=[l("p",null,"暂无兑换记录",-1)])]))])])]),l("div",I,[l("button",{class:"redeem-btn",disabled:!z.value||E.value,onClick:M},i(E.value?"兑换中...":"立即兑换"),9,U)])]))}},[["__scopeId","data-v-4c854413"]]);export{z as default};
