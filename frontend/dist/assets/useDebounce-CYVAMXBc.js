import{r as e,W as n}from"./vue-vendor-Ba_vealp.js";function t(n,t={}){const{minDelay:a=0}=t,r=e(!1);return{execute:async(...e)=>{if(r.value)return null;r.value=!0;const t=Date.now();try{const r=await n(...e),o=Date.now()-t;return a>0&&o<a&&await new Promise(e=>setTimeout(e,a-o)),r}finally{r.value=!1}},loading:r}}function a(){const e=new Map,t=n=>!0===e.get(n),a=n=>{e.set(n,!0)},r=n=>{e.delete(n)};return n(()=>{e.clear()}),{isLocked:t,lock:a,unlock:r,withLock:async(e,n)=>{if(t(e))return null;a(e);try{return await n()}finally{r(e)}}}}export{a,t as u};
